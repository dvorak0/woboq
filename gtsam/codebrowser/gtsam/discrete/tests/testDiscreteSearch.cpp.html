<!doctype html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0"><title>testDiscreteSearch.cpp source code [codebrowser/gtsam/discrete/tests/testDiscreteSearch.cpp] - Woboq Code Browser</title>
<meta name="woboq:interestingDefinitions" content="main "/>
<link rel="stylesheet" href="../../../../../data/qtcreator.css" title="QtCreator"/>
<link rel="alternate stylesheet" href="../../../../../data/kdevelop.css" title="KDevelop"/>
<script type="text/javascript" src="../../../../../data/jquery/jquery.min.js"></script>
<script type="text/javascript" src="../../../../../data/jquery/jquery-ui.min.js"></script>
<script>var file = 'codebrowser/gtsam/discrete/tests/testDiscreteSearch.cpp'; var root_path = '../../../..'; var data_path = '../../../../../data'; var ecma_script_api_version = 2;</script>
<script src='../../../../../data/codebrowser.js'></script>
</head>
<body><div id='header'><h1 id='breadcrumb'><span>Browse the source code of </span><a href='../../..'>codebrowser</a>/<a href='../..'>gtsam</a>/<a href='..'>discrete</a>/<a href='./'>tests</a>/<a href='testDiscreteSearch.cpp.html'>testDiscreteSearch.cpp</a></h1></div>
<hr/><div id='content'><table class="code">
<tr><th id="1">1</th><td><i>/* ----------------------------------------------------------------------------</i></td></tr>
<tr><th id="2">2</th><td><i></i></td></tr>
<tr><th id="3">3</th><td><i> * GTSAM Copyright 2010, Georgia Tech Research Corporation,</i></td></tr>
<tr><th id="4">4</th><td><i> * Atlanta, Georgia 30332-0415</i></td></tr>
<tr><th id="5">5</th><td><i> * All Rights Reserved</i></td></tr>
<tr><th id="6">6</th><td><i> * Authors: Frank Dellaert, et al. (see THANKS for the full author list)</i></td></tr>
<tr><th id="7">7</th><td><i></i></td></tr>
<tr><th id="8">8</th><td><i> * See LICENSE for the license information</i></td></tr>
<tr><th id="9">9</th><td><i></i></td></tr>
<tr><th id="10">10</th><td><i> * -------------------------------------------------------------------------- */</i></td></tr>
<tr><th id="11">11</th><td></td></tr>
<tr><th id="12">12</th><td><i>/*</i></td></tr>
<tr><th id="13">13</th><td><i> * testDiscreteSearch.cpp</i></td></tr>
<tr><th id="14">14</th><td><i> *</i></td></tr>
<tr><th id="15">15</th><td><i> *  @date January, 2025</i></td></tr>
<tr><th id="16">16</th><td><i> *  @author Frank Dellaert</i></td></tr>
<tr><th id="17">17</th><td><i> */</i></td></tr>
<tr><th id="18">18</th><td></td></tr>
<tr><th id="19">19</th><td><u>#include <a href="../../../CppUnitLite/TestHarness.h.html">&lt;CppUnitLite/TestHarness.h&gt;</a></u></td></tr>
<tr><th id="20">20</th><td><u>#include <a href="../../base/Testable.h.html">&lt;gtsam/base/Testable.h&gt;</a></u></td></tr>
<tr><th id="21">21</th><td><u>#include <a href="../DiscreteSearch.h.html">&lt;gtsam/discrete/DiscreteSearch.h&gt;</a></u></td></tr>
<tr><th id="22">22</th><td></td></tr>
<tr><th id="23">23</th><td><u>#include <a href="AsiaExample.h.html">"AsiaExample.h"</a></u></td></tr>
<tr><th id="24">24</th><td></td></tr>
<tr><th id="25">25</th><td><b>using</b> <b>namespace</b> <span class="namespace">gtsam</span>;</td></tr>
<tr><th id="26">26</th><td></td></tr>
<tr><th id="27">27</th><td><i>// Create Asia Bayes net, FG, and Bayes tree once</i></td></tr>
<tr><th id="28">28</th><td><b>namespace</b> <span class="namespace">asia</span> {</td></tr>
<tr><th id="29">29</th><td><b>using</b> <b>namespace</b> <span class="namespace">asia_example</span>;</td></tr>
<tr><th id="30">30</th><td><em>static</em> <em>const</em> <a class="type" href="../DiscreteBayesNet.h.html#gtsam::DiscreteBayesNet" title='gtsam::DiscreteBayesNet' data-ref="gtsam::DiscreteBayesNet">DiscreteBayesNet</a> <dfn class="tu decl def" id="asia::bayesNet" title='asia::bayesNet' data-type='const DiscreteBayesNet' data-ref="asia::bayesNet">bayesNet</dfn> = <a class="ref fn" href="AsiaExample.h.html#_ZN5gtsam12asia_exampleL17createAsiaExampleEv" title='gtsam::asia_example::createAsiaExample' data-ref="_ZN5gtsam12asia_exampleL17createAsiaExampleEv">createAsiaExample</a>();</td></tr>
<tr><th id="31">31</th><td></td></tr>
<tr><th id="32">32</th><td><i  data-doc="asia::factorGraph">// Create factor graph and optimize with max-product for MPE</i></td></tr>
<tr><th id="33">33</th><td><em>static</em> <em>const</em> <a class="type" href="../DiscreteFactorGraph.h.html#gtsam::DiscreteFactorGraph" title='gtsam::DiscreteFactorGraph' data-ref="gtsam::DiscreteFactorGraph">DiscreteFactorGraph</a> <dfn class="tu decl def" id="asia::factorGraph" title='asia::factorGraph' data-type='const DiscreteFactorGraph' data-ref="asia::factorGraph">factorGraph</dfn><a class="ref fn" href="../DiscreteFactorGraph.h.html#_ZN5gtsam19DiscreteFactorGraphC1ERKT_" title='gtsam::DiscreteFactorGraph::DiscreteFactorGraph' data-ref="_ZN5gtsam19DiscreteFactorGraphC1ERKT_">(</a><a class="tu ref" href="#asia::bayesNet" title='asia::bayesNet' data-use='r' data-ref="asia::bayesNet">bayesNet</a>);</td></tr>
<tr><th id="34">34</th><td><em>static</em> <em>const</em> <a class="type" href="../DiscreteValues.h.html#gtsam::DiscreteValues" title='gtsam::DiscreteValues' data-ref="gtsam::DiscreteValues">DiscreteValues</a> <dfn class="tu decl def" id="asia::mpe" title='asia::mpe' data-type='const DiscreteValues' data-ref="asia::mpe">mpe</dfn> = <a class="tu ref" href="#asia::factorGraph" title='asia::factorGraph' data-use='m' data-ref="asia::factorGraph">factorGraph</a>.<a class="ref fn" href="../DiscreteFactorGraph.h.html#_ZNK5gtsam19DiscreteFactorGraph8optimizeESt8optionalINS_8Ordering12OrderingTypeEE" title='gtsam::DiscreteFactorGraph::optimize' data-ref="_ZNK5gtsam19DiscreteFactorGraph8optimizeESt8optionalINS_8Ordering12OrderingTypeEE">optimize</a>();</td></tr>
<tr><th id="35">35</th><td></td></tr>
<tr><th id="36">36</th><td><i  data-doc="asia::ordering">// Create ordering</i></td></tr>
<tr><th id="37">37</th><td><em>static</em> <em>const</em> <a class="type" href="../../inference/Ordering.h.html#gtsam::Ordering" title='gtsam::Ordering' data-ref="gtsam::Ordering">Ordering</a> <dfn class="tu decl def" id="asia::ordering" title='asia::ordering' data-type='const Ordering' data-ref="asia::ordering">ordering</dfn><a class="ref fn" href="../../inference/Ordering.h.html#51" title='gtsam::Ordering::vector' data-ref="_ZN5gtsam8OrderingCI1St6vectorImSaImEEESt16initializer_listImERKS2_">{</a><a class="ref" href="AsiaExample.h.html#gtsam::asia_example::D" title='gtsam::asia_example::D' data-ref="gtsam::asia_example::D">D</a>, <a class="ref" href="AsiaExample.h.html#gtsam::asia_example::X" title='gtsam::asia_example::X' data-ref="gtsam::asia_example::X">X</a>, <a class="ref" href="AsiaExample.h.html#gtsam::asia_example::B" title='gtsam::asia_example::B' data-ref="gtsam::asia_example::B">B</a>, <a class="ref" href="AsiaExample.h.html#gtsam::asia_example::E" title='gtsam::asia_example::E' data-ref="gtsam::asia_example::E">E</a>, <a class="ref" href="AsiaExample.h.html#gtsam::asia_example::L" title='gtsam::asia_example::L' data-ref="gtsam::asia_example::L">L</a>, <a class="ref" href="AsiaExample.h.html#gtsam::asia_example::T" title='gtsam::asia_example::T' data-ref="gtsam::asia_example::T">T</a>, <a class="ref" href="AsiaExample.h.html#gtsam::asia_example::S" title='gtsam::asia_example::S' data-ref="gtsam::asia_example::S">S</a>, <a class="ref" href="AsiaExample.h.html#gtsam::asia_example::A" title='gtsam::asia_example::A' data-ref="gtsam::asia_example::A">A</a>};</td></tr>
<tr><th id="38">38</th><td></td></tr>
<tr><th id="39">39</th><td><i  data-doc="asia::bayesTree">// Create Bayes tree</i></td></tr>
<tr><th id="40">40</th><td><em>static</em> <em>const</em> <a class="type" href="../DiscreteBayesTree.h.html#gtsam::DiscreteBayesTree" title='gtsam::DiscreteBayesTree' data-ref="gtsam::DiscreteBayesTree">DiscreteBayesTree</a> <dfn class="tu decl def" id="asia::bayesTree" title='asia::bayesTree' data-type='const DiscreteBayesTree' data-ref="asia::bayesTree">bayesTree</dfn> =</td></tr>
<tr><th id="41">41</th><td>    <a class="ref fn fake" href="../DiscreteBayesTree.h.html#73" title='gtsam::DiscreteBayesTree::DiscreteBayesTree' data-ref="_ZN5gtsam17DiscreteBayesTreeC1ERKS0_"></a><a class="ref fn" href="../../../../include/c++/13/bits/shared_ptr_base.h.html#_ZNKSt19__shared_ptr_accessdeEv" title='std::__shared_ptr_access::operator*' data-ref="_ZNKSt19__shared_ptr_accessdeEv">*</a><a class="tu ref" href="#asia::factorGraph" title='asia::factorGraph' data-use='m' data-ref="asia::factorGraph">factorGraph</a>.<a class="ref fn" href="../../inference/EliminateableFactorGraph.h.html#_ZNK5gtsam24EliminateableFactorGraph21eliminateMultifrontalERKNS_8OrderingERKSt8functionIFSt4pairISt10shared_ptrINS_17EliminationTraitsIT_E15Condition5013609" title='gtsam::EliminateableFactorGraph::eliminateMultifrontal' data-ref="_ZNK5gtsam24EliminateableFactorGraph21eliminateMultifrontalERKNS_8OrderingERKSt8functionIFSt4pairISt10shared_ptrINS_17EliminationTraitsIT_E15Condition5013609">eliminateMultifrontal</a>(<a class="tu ref" href="#asia::ordering" title='asia::ordering' data-use='r' data-ref="asia::ordering">ordering</a>);</td></tr>
<tr><th id="42">42</th><td>}  <i>// namespace asia</i></td></tr>
<tr><th id="43">43</th><td></td></tr>
<tr><th id="44">44</th><td><i>/* ************************************************************************* */</i></td></tr>
<tr><th id="45">45</th><td><a class="macro" href="../../../CppUnitLite/Test.h.html#63" title="class DiscreteBayesNetEmptyKBestTest : public Test { public: DiscreteBayesNetEmptyKBestTest () : Test (&quot;EmptyKBest&quot; &quot;Test&quot;, &quot;/home/dvorak/gtsam/gtsam/discrete/tests/testDiscreteSearch.cpp&quot;, 45, true) {} void run (TestResult&amp; result_) override;} DiscreteBayesNetEmptyKBestInstance; void DiscreteBayesNetEmptyKBestTest::run (TestResult&amp; result_)" data-ref="_M/TEST">TEST</a>(DiscreteBayesNet, EmptyKBest) {</td></tr>
<tr><th id="46">46</th><td>  <a class="type" href="../DiscreteBayesNet.h.html#gtsam::DiscreteBayesNet" title='gtsam::DiscreteBayesNet' data-ref="gtsam::DiscreteBayesNet">DiscreteBayesNet</a> <a class="ref fn fake" href="../DiscreteBayesNet.h.html#_ZN5gtsam16DiscreteBayesNetC1Ev" title='gtsam::DiscreteBayesNet::DiscreteBayesNet' data-ref="_ZN5gtsam16DiscreteBayesNetC1Ev"></a><dfn class="local col1 decl" id="1net" title='net' data-type='DiscreteBayesNet' data-ref="1net">net</dfn>;  <i>// no factors</i></td></tr>
<tr><th id="47">47</th><td>  <a class="type" href="../DiscreteSearch.h.html#gtsam::DiscreteSearch" title='gtsam::DiscreteSearch' data-ref="gtsam::DiscreteSearch">DiscreteSearch</a> <dfn class="local col2 decl" id="2search" title='search' data-type='DiscreteSearch' data-ref="2search">search</dfn><a class="ref fn" href="../DiscreteSearch.h.html#_ZN5gtsam14DiscreteSearchC1ERKNS_16DiscreteBayesNetE" title='gtsam::DiscreteSearch::DiscreteSearch' data-ref="_ZN5gtsam14DiscreteSearchC1ERKNS_16DiscreteBayesNetE">(</a><a class="local col1 ref" href="#1net" title='net' data-ref="1net">net</a>);</td></tr>
<tr><th id="48">48</th><td>  <em>auto</em> <dfn class="local col3 decl" id="3solutions" title='solutions' data-type='std::vector&lt;Solution&gt;' data-ref="3solutions">solutions</dfn> = <a class="local col2 ref" href="#2search" title='search' data-ref="2search">search</a>.<a class="ref fn" href="../DiscreteSearch.h.html#_ZNK5gtsam14DiscreteSearch3runEm" title='gtsam::DiscreteSearch::run' data-ref="_ZNK5gtsam14DiscreteSearch3runEm">run</a>(<span class='inlayHint'>K:&nbsp;</span><var>3</var>);</td></tr>
<tr><th id="49">49</th><td>  <i>// Expect one solution with empty assignment, error=0</i></td></tr>
<tr><th id="50">50</th><td>  <a class="macro" href="../../../CppUnitLite/Test.h.html#154" title="{ long actualTemp = solutions.size(); long expectedTemp = 1; if ((expectedTemp) != (actualTemp)) { result_.addFailure (Failure (name_, &quot;/home/dvorak/gtsam/gtsam/discrete/tests/testDiscreteSearch.cpp&quot;, 50, std::to_string(expectedTemp), std::to_string(actualTemp))); } }" data-ref="_M/EXPECT_LONGS_EQUAL">EXPECT_LONGS_EQUAL</a>(<var>1</var>, <a class="local col3 ref" href="#3solutions" title='solutions' data-ref="3solutions">solutions</a>.<a class="ref fn" href="../../../../include/c++/13/bits/stl_vector.h.html#_ZNKSt6vector4sizeEv" title='std::vector::size' data-ref="_ZNKSt6vector4sizeEv">size</a>());</td></tr>
<tr><th id="51">51</th><td>  <a class="macro" href="../../../CppUnitLite/Test.h.html#161" title="{ double actualTemp = std::fabs(solutions[0].error); double expectedTemp = 0; if (!std::isfinite(actualTemp) || !std::isfinite(expectedTemp) || fabs ((expectedTemp)-(actualTemp)) &gt; 1e-9) { result_.addFailure (Failure (name_, &quot;/home/dvorak/gtsam/gtsam/discrete/tests/testDiscreteSearch.cpp&quot;, 51, std::to_string((double)expectedTemp), std::to_string((double)actualTemp))); } }" data-ref="_M/EXPECT_DOUBLES_EQUAL">EXPECT_DOUBLES_EQUAL</a>(<var>0</var>, std::<a class="ref fn" href="../../../../include/x86_64-linux-gnu/bits/mathcalls.h.html#162" title='fabs' data-ref="fabs">fabs</a>(<a class="local col3 ref" href="#3solutions" title='solutions' data-ref="3solutions">solutions</a>[<var>0</var>].<a class="ref field" href="../DiscreteSearch.h.html#gtsam::DiscreteSearch::Solution::error" title='gtsam::DiscreteSearch::Solution::error' data-ref="gtsam::DiscreteSearch::Solution::error">error</a>), <var>1e-9</var>);</td></tr>
<tr><th id="52">52</th><td>}</td></tr>
<tr><th id="53">53</th><td></td></tr>
<tr><th id="54">54</th><td><i>/* ************************************************************************* */</i></td></tr>
<tr><th id="55">55</th><td><a class="macro" href="../../../CppUnitLite/Test.h.html#63" title="class DiscreteBayesTreeEmptyTreeTest : public Test { public: DiscreteBayesTreeEmptyTreeTest () : Test (&quot;EmptyTree&quot; &quot;Test&quot;, &quot;/home/dvorak/gtsam/gtsam/discrete/tests/testDiscreteSearch.cpp&quot;, 55, true) {} void run (TestResult&amp; result_) override;} DiscreteBayesTreeEmptyTreeInstance; void DiscreteBayesTreeEmptyTreeTest::run (TestResult&amp; result_)" data-ref="_M/TEST">TEST</a>(DiscreteBayesTree, EmptyTree) {</td></tr>
<tr><th id="56">56</th><td>  <a class="type" href="../DiscreteBayesTree.h.html#gtsam::DiscreteBayesTree" title='gtsam::DiscreteBayesTree' data-ref="gtsam::DiscreteBayesTree">DiscreteBayesTree</a> <a class="ref fn fake" href="../DiscreteBayesTree.h.html#_ZN5gtsam17DiscreteBayesTreeC1Ev" title='gtsam::DiscreteBayesTree::DiscreteBayesTree' data-ref="_ZN5gtsam17DiscreteBayesTreeC1Ev"></a><dfn class="local col4 decl" id="4bt" title='bt' data-type='DiscreteBayesTree' data-ref="4bt">bt</dfn>;</td></tr>
<tr><th id="57">57</th><td></td></tr>
<tr><th id="58">58</th><td>  <a class="type" href="../DiscreteSearch.h.html#gtsam::DiscreteSearch" title='gtsam::DiscreteSearch' data-ref="gtsam::DiscreteSearch">DiscreteSearch</a> <dfn class="local col5 decl" id="5search" title='search' data-type='DiscreteSearch' data-ref="5search">search</dfn><a class="ref fn" href="../DiscreteSearch.h.html#_ZN5gtsam14DiscreteSearchC1ERKNS_17DiscreteBayesTreeE" title='gtsam::DiscreteSearch::DiscreteSearch' data-ref="_ZN5gtsam14DiscreteSearchC1ERKNS_17DiscreteBayesTreeE">(</a><a class="local col4 ref" href="#4bt" title='bt' data-ref="4bt">bt</a>);</td></tr>
<tr><th id="59">59</th><td>  <em>auto</em> <dfn class="local col6 decl" id="6solutions" title='solutions' data-type='std::vector&lt;Solution&gt;' data-ref="6solutions">solutions</dfn> = <a class="local col5 ref" href="#5search" title='search' data-ref="5search">search</a>.<a class="ref fn" href="../DiscreteSearch.h.html#_ZNK5gtsam14DiscreteSearch3runEm" title='gtsam::DiscreteSearch::run' data-ref="_ZNK5gtsam14DiscreteSearch3runEm">run</a>(<span class='inlayHint'>K:&nbsp;</span><var>3</var>);</td></tr>
<tr><th id="60">60</th><td></td></tr>
<tr><th id="61">61</th><td>  <i>// We expect exactly 1 solution with error = 0.0 (the empty assignment).</i></td></tr>
<tr><th id="62">62</th><td>  <a class="macro" href="../../../CppUnitLite/Test.h.html#154" title="{ long actualTemp = solutions.size(); long expectedTemp = 1; if ((expectedTemp) != (actualTemp)) { result_.addFailure (Failure (name_, &quot;/home/dvorak/gtsam/gtsam/discrete/tests/testDiscreteSearch.cpp&quot;, 62, std::to_string(expectedTemp), std::to_string(actualTemp))); } }" data-ref="_M/EXPECT_LONGS_EQUAL">EXPECT_LONGS_EQUAL</a>(<var>1</var>, <a class="local col6 ref" href="#6solutions" title='solutions' data-ref="6solutions">solutions</a>.<a class="ref fn" href="../../../../include/c++/13/bits/stl_vector.h.html#_ZNKSt6vector4sizeEv" title='std::vector::size' data-ref="_ZNKSt6vector4sizeEv">size</a>());</td></tr>
<tr><th id="63">63</th><td>  <a class="macro" href="../../../CppUnitLite/Test.h.html#161" title="{ double actualTemp = std::fabs(solutions[0].error); double expectedTemp = 0; if (!std::isfinite(actualTemp) || !std::isfinite(expectedTemp) || fabs ((expectedTemp)-(actualTemp)) &gt; 1e-9) { result_.addFailure (Failure (name_, &quot;/home/dvorak/gtsam/gtsam/discrete/tests/testDiscreteSearch.cpp&quot;, 63, std::to_string((double)expectedTemp), std::to_string((double)actualTemp))); } }" data-ref="_M/EXPECT_DOUBLES_EQUAL">EXPECT_DOUBLES_EQUAL</a>(<var>0</var>, std::<a class="ref fn" href="../../../../include/x86_64-linux-gnu/bits/mathcalls.h.html#162" title='fabs' data-ref="fabs">fabs</a>(<a class="local col6 ref" href="#6solutions" title='solutions' data-ref="6solutions">solutions</a>[<var>0</var>].<a class="ref field" href="../DiscreteSearch.h.html#gtsam::DiscreteSearch::Solution::error" title='gtsam::DiscreteSearch::Solution::error' data-ref="gtsam::DiscreteSearch::Solution::error">error</a>), <var>1e-9</var>);</td></tr>
<tr><th id="64">64</th><td>}</td></tr>
<tr><th id="65">65</th><td></td></tr>
<tr><th id="66">66</th><td><i>/* ************************************************************************* */</i></td></tr>
<tr><th id="67">67</th><td><a class="macro" href="../../../CppUnitLite/Test.h.html#63" title="class DiscreteBayesNetAsiaKBestTest : public Test { public: DiscreteBayesNetAsiaKBestTest () : Test (&quot;AsiaKBest&quot; &quot;Test&quot;, &quot;/home/dvorak/gtsam/gtsam/discrete/tests/testDiscreteSearch.cpp&quot;, 67, true) {} void run (TestResult&amp; result_) override;} DiscreteBayesNetAsiaKBestInstance; void DiscreteBayesNetAsiaKBestTest::run (TestResult&amp; result_)" data-ref="_M/TEST">TEST</a>(DiscreteBayesNet, AsiaKBest) {</td></tr>
<tr><th id="68">68</th><td>  <em>auto</em> <dfn class="local col7 decl" id="7fromETree" title='fromETree' data-type='DiscreteSearch' data-ref="7fromETree">fromETree</dfn> =</td></tr>
<tr><th id="69">69</th><td>      <a class="type" href="../DiscreteSearch.h.html#gtsam::DiscreteSearch" title='gtsam::DiscreteSearch' data-ref="gtsam::DiscreteSearch">DiscreteSearch</a>::<a class="ref fn" href="../DiscreteSearch.h.html#_ZN5gtsam14DiscreteSearch15FromFactorGraphERKNS_19DiscreteFactorGraphERKNS_8OrderingEb" title='gtsam::DiscreteSearch::FromFactorGraph' data-ref="_ZN5gtsam14DiscreteSearch15FromFactorGraphERKNS_19DiscreteFactorGraphERKNS_8OrderingEb">FromFactorGraph</a>(<span class='inlayHint'>factorGraph:&nbsp;</span><span class="namespace">asia::</span><a class="tu ref" href="#asia::factorGraph" title='asia::factorGraph' data-use='r' data-ref="asia::factorGraph">factorGraph</a>, <span class='inlayHint'>ordering:&nbsp;</span><span class="namespace">asia::</span><a class="tu ref" href="#asia::ordering" title='asia::ordering' data-use='r' data-ref="asia::ordering">ordering</a>);</td></tr>
<tr><th id="70">70</th><td>  <em>auto</em> <dfn class="local col8 decl" id="8fromJunctionTree" title='fromJunctionTree' data-type='DiscreteSearch' data-ref="8fromJunctionTree">fromJunctionTree</dfn> =</td></tr>
<tr><th id="71">71</th><td>      <a class="type" href="../DiscreteSearch.h.html#gtsam::DiscreteSearch" title='gtsam::DiscreteSearch' data-ref="gtsam::DiscreteSearch">DiscreteSearch</a>::<a class="ref fn" href="../DiscreteSearch.h.html#_ZN5gtsam14DiscreteSearch15FromFactorGraphERKNS_19DiscreteFactorGraphERKNS_8OrderingEb" title='gtsam::DiscreteSearch::FromFactorGraph' data-ref="_ZN5gtsam14DiscreteSearch15FromFactorGraphERKNS_19DiscreteFactorGraphERKNS_8OrderingEb">FromFactorGraph</a>(<span class='inlayHint'>factorGraph:&nbsp;</span><span class="namespace">asia::</span><a class="tu ref" href="#asia::factorGraph" title='asia::factorGraph' data-use='r' data-ref="asia::factorGraph">factorGraph</a>, <span class='inlayHint'>ordering:&nbsp;</span><span class="namespace">asia::</span><a class="tu ref" href="#asia::ordering" title='asia::ordering' data-use='r' data-ref="asia::ordering">ordering</a>, <span class='inlayHint'>buildJunctionTree:&nbsp;</span><b>true</b>);</td></tr>
<tr><th id="72">72</th><td>  <em>const</em> <a class="type" href="../DiscreteSearch.h.html#gtsam::DiscreteSearch" title='gtsam::DiscreteSearch' data-ref="gtsam::DiscreteSearch">DiscreteSearch</a> <dfn class="local col9 decl" id="9fromBayesNet" title='fromBayesNet' data-type='const DiscreteSearch' data-ref="9fromBayesNet">fromBayesNet</dfn><a class="ref fn" href="../DiscreteSearch.h.html#_ZN5gtsam14DiscreteSearchC1ERKNS_16DiscreteBayesNetE" title='gtsam::DiscreteSearch::DiscreteSearch' data-ref="_ZN5gtsam14DiscreteSearchC1ERKNS_16DiscreteBayesNetE">(</a><span class="namespace">asia::</span><a class="tu ref" href="#asia::bayesNet" title='asia::bayesNet' data-use='r' data-ref="asia::bayesNet">bayesNet</a>);</td></tr>
<tr><th id="73">73</th><td>  <em>const</em> <a class="type" href="../DiscreteSearch.h.html#gtsam::DiscreteSearch" title='gtsam::DiscreteSearch' data-ref="gtsam::DiscreteSearch">DiscreteSearch</a> <dfn class="local col0 decl" id="10fromBayesTree" title='fromBayesTree' data-type='const DiscreteSearch' data-ref="10fromBayesTree">fromBayesTree</dfn><a class="ref fn" href="../DiscreteSearch.h.html#_ZN5gtsam14DiscreteSearchC1ERKNS_17DiscreteBayesTreeE" title='gtsam::DiscreteSearch::DiscreteSearch' data-ref="_ZN5gtsam14DiscreteSearchC1ERKNS_17DiscreteBayesTreeE">(</a><span class="namespace">asia::</span><a class="tu ref" href="#asia::bayesTree" title='asia::bayesTree' data-use='r' data-ref="asia::bayesTree">bayesTree</a>);</td></tr>
<tr><th id="74">74</th><td></td></tr>
<tr><th id="75">75</th><td>  <b>for</b> (<em>auto</em>&amp; <dfn class="local col1 decl" id="11search" title='search' data-type='const gtsam::DiscreteSearch &amp;' data-ref="11search">search</dfn> :</td></tr>
<tr><th id="76">76</th><td>       {<a class="local col7 ref" href="#7fromETree" title='fromETree' data-ref="7fromETree">fromETree</a>, <a class="local col8 ref" href="#8fromJunctionTree" title='fromJunctionTree' data-ref="8fromJunctionTree">fromJunctionTree</a>, <a class="local col9 ref" href="#9fromBayesNet" title='fromBayesNet' data-ref="9fromBayesNet">fromBayesNet</a>, <a class="local col0 ref" href="#10fromBayesTree" title='fromBayesTree' data-ref="10fromBayesTree">fromBayesTree</a>}) {</td></tr>
<tr><th id="77">77</th><td>    <i>// Ask for the MPE</i></td></tr>
<tr><th id="78">78</th><td>    <em>auto</em> <dfn class="local col2 decl" id="12mpe" title='mpe' data-type='std::vector&lt;Solution&gt;' data-ref="12mpe">mpe</dfn> = <a class="local col1 ref" href="#11search" title='search' data-ref="11search">search</a>.<a class="ref fn" href="../DiscreteSearch.h.html#_ZNK5gtsam14DiscreteSearch3runEm" title='gtsam::DiscreteSearch::run' data-ref="_ZNK5gtsam14DiscreteSearch3runEm">run</a>();</td></tr>
<tr><th id="79">79</th><td></td></tr>
<tr><th id="80">80</th><td>    <i>// Regression on error lower bound</i></td></tr>
<tr><th id="81">81</th><td>    <a class="macro" href="../../../CppUnitLite/Test.h.html#161" title="{ double actualTemp = search.lowerBound(); double expectedTemp = 1.205536; if (!std::isfinite(actualTemp) || !std::isfinite(expectedTemp) || fabs ((expectedTemp)-(actualTemp)) &gt; 1e-5) { result_.addFailure (Failure (name_, &quot;/home/dvorak/gtsam/gtsam/discrete/tests/testDiscreteSearch.cpp&quot;, 81, std::to_string((double)expectedTemp), std::to_string((double)actualTemp))); } }" data-ref="_M/EXPECT_DOUBLES_EQUAL">EXPECT_DOUBLES_EQUAL</a>(<var>1.205536</var>, <a class="local col1 ref" href="#11search" title='search' data-ref="11search">search</a>.<a class="ref fn" href="../DiscreteSearch.h.html#_ZNK5gtsam14DiscreteSearch10lowerBoundEv" title='gtsam::DiscreteSearch::lowerBound' data-ref="_ZNK5gtsam14DiscreteSearch10lowerBoundEv">lowerBound</a>(), <var>1e-5</var>);</td></tr>
<tr><th id="82">82</th><td></td></tr>
<tr><th id="83">83</th><td>    <i>// Check that the cost-to-go heuristic decreases from there</i></td></tr>
<tr><th id="84">84</th><td>    <em>auto</em> <dfn class="local col3 decl" id="13slots" title='slots' data-type='std::vector&lt;Slot&gt;' data-ref="13slots">slots</dfn> = <a class="ref fn fake" href="../../../../include/c++/13/bits/stl_vector.h.html#_ZNSt6vectorC1ERKSt6vectorIT_T0_E" title='std::vector::vector&lt;_Tp, _Alloc&gt;' data-ref="_ZNSt6vectorC1ERKSt6vectorIT_T0_E"></a><a class="local col1 ref" href="#11search" title='search' data-ref="11search">search</a>.<a class="ref fn" href="../DiscreteSearch.h.html#_ZNK5gtsam14DiscreteSearch5slotsEv" title='gtsam::DiscreteSearch::slots' data-ref="_ZNK5gtsam14DiscreteSearch5slotsEv">slots</a>();</td></tr>
<tr><th id="85">85</th><td>    <em>double</em> <dfn class="local col4 decl" id="14previousHeuristic" title='previousHeuristic' data-type='double' data-ref="14previousHeuristic">previousHeuristic</dfn> = <a class="local col1 ref" href="#11search" title='search' data-ref="11search">search</a>.<a class="ref fn" href="../DiscreteSearch.h.html#_ZNK5gtsam14DiscreteSearch10lowerBoundEv" title='gtsam::DiscreteSearch::lowerBound' data-ref="_ZNK5gtsam14DiscreteSearch10lowerBoundEv">lowerBound</a>();</td></tr>
<tr><th id="86">86</th><td>    <b>for</b> (<em>auto</em>&amp;&amp; <dfn class="local col5 decl" id="15slot" title='slot' data-type='gtsam::DiscreteSearch::Slot &amp;' data-ref="15slot">slot</dfn> : <a class="local col3 ref" href="#13slots" title='slots' data-ref="13slots">slots</a>) {</td></tr>
<tr><th id="87">87</th><td>      <a class="macro" href="../../../CppUnitLite/Test.h.html#150" title="{ if (!(slot.heuristic &lt;= previousHeuristic)) { result_.addFailure (Failure (name_, &quot;/home/dvorak/gtsam/gtsam/discrete/tests/testDiscreteSearch.cpp&quot;,87, &quot;slot.heuristic &lt;= previousHeuristic&quot;)); } }" data-ref="_M/EXPECT">EXPECT</a>(<a class="local col5 ref" href="#15slot" title='slot' data-ref="15slot">slot</a>.<a class="ref field" href="../DiscreteSearch.h.html#gtsam::DiscreteSearch::Slot::heuristic" title='gtsam::DiscreteSearch::Slot::heuristic' data-ref="gtsam::DiscreteSearch::Slot::heuristic">heuristic</a> &lt;= <a class="local col4 ref" href="#14previousHeuristic" title='previousHeuristic' data-ref="14previousHeuristic">previousHeuristic</a>);</td></tr>
<tr><th id="88">88</th><td>      <a class="local col4 ref" href="#14previousHeuristic" title='previousHeuristic' data-ref="14previousHeuristic">previousHeuristic</a> = <a class="local col5 ref" href="#15slot" title='slot' data-ref="15slot">slot</a>.<a class="ref field" href="../DiscreteSearch.h.html#gtsam::DiscreteSearch::Slot::heuristic" title='gtsam::DiscreteSearch::Slot::heuristic' data-ref="gtsam::DiscreteSearch::Slot::heuristic">heuristic</a>;</td></tr>
<tr><th id="89">89</th><td>    }</td></tr>
<tr><th id="90">90</th><td></td></tr>
<tr><th id="91">91</th><td>    <a class="macro" href="../../../CppUnitLite/Test.h.html#154" title="{ long actualTemp = mpe.size(); long expectedTemp = 1; if ((expectedTemp) != (actualTemp)) { result_.addFailure (Failure (name_, &quot;/home/dvorak/gtsam/gtsam/discrete/tests/testDiscreteSearch.cpp&quot;, 91, std::to_string(expectedTemp), std::to_string(actualTemp))); } }" data-ref="_M/EXPECT_LONGS_EQUAL">EXPECT_LONGS_EQUAL</a>(<var>1</var>, <a class="local col2 ref" href="#12mpe" title='mpe' data-ref="12mpe">mpe</a>.<a class="ref fn" href="../../../../include/c++/13/bits/stl_vector.h.html#_ZNKSt6vector4sizeEv" title='std::vector::size' data-ref="_ZNKSt6vector4sizeEv">size</a>());</td></tr>
<tr><th id="92">92</th><td>    <i>// Regression test: check the MPE solution</i></td></tr>
<tr><th id="93">93</th><td>    <a class="macro" href="../../../CppUnitLite/Test.h.html#161" title="{ double actualTemp = std::fabs(mpe[0].error); double expectedTemp = 1.236627; if (!std::isfinite(actualTemp) || !std::isfinite(expectedTemp) || fabs ((expectedTemp)-(actualTemp)) &gt; 1e-5) { result_.addFailure (Failure (name_, &quot;/home/dvorak/gtsam/gtsam/discrete/tests/testDiscreteSearch.cpp&quot;, 93, std::to_string((double)expectedTemp), std::to_string((double)actualTemp))); } }" data-ref="_M/EXPECT_DOUBLES_EQUAL">EXPECT_DOUBLES_EQUAL</a>(<var>1.236627</var>, std::<a class="ref fn" href="../../../../include/x86_64-linux-gnu/bits/mathcalls.h.html#162" title='fabs' data-ref="fabs">fabs</a>(<a class="local col2 ref" href="#12mpe" title='mpe' data-ref="12mpe">mpe</a>[<var>0</var>].<a class="ref field" href="../DiscreteSearch.h.html#gtsam::DiscreteSearch::Solution::error" title='gtsam::DiscreteSearch::Solution::error' data-ref="gtsam::DiscreteSearch::Solution::error">error</a>), <var>1e-5</var>);</td></tr>
<tr><th id="94">94</th><td></td></tr>
<tr><th id="95">95</th><td>    <i>// Check it is equal to MPE via inference</i></td></tr>
<tr><th id="96">96</th><td>    <a class="macro" href="../../../CppUnitLite/Test.h.html#150" title="{ if (!(assert_equal(asia::mpe, mpe[0].assignment))) { result_.addFailure (Failure (name_, &quot;/home/dvorak/gtsam/gtsam/discrete/tests/testDiscreteSearch.cpp&quot;,96, &quot;assert_equal(asia::mpe, mpe[0].assignment)&quot;)); } }" data-ref="_M/EXPECT">EXPECT</a>(<a class="ref fn" href="../../base/Testable.h.html#_ZN5gtsam12assert_equalERKT_S2_d" title='gtsam::assert_equal' data-ref="_ZN5gtsam12assert_equalERKT_S2_d">assert_equal</a>(asia::<a class="tu ref" href="#asia::mpe" title='asia::mpe' data-use='r' data-ref="asia::mpe">mpe</a>, <a class="local col2 ref" href="#12mpe" title='mpe' data-ref="12mpe">mpe</a>[<var>0</var>].<a class="ref field" href="../DiscreteSearch.h.html#gtsam::DiscreteSearch::Solution::assignment" title='gtsam::DiscreteSearch::Solution::assignment' data-ref="gtsam::DiscreteSearch::Solution::assignment">assignment</a>));</td></tr>
<tr><th id="97">97</th><td></td></tr>
<tr><th id="98">98</th><td>    <i>// Ask for top 4 solutions</i></td></tr>
<tr><th id="99">99</th><td>    <em>auto</em> <dfn class="local col6 decl" id="16solutions" title='solutions' data-type='std::vector&lt;Solution&gt;' data-ref="16solutions">solutions</dfn> = <a class="local col1 ref" href="#11search" title='search' data-ref="11search">search</a>.<a class="ref fn" href="../DiscreteSearch.h.html#_ZNK5gtsam14DiscreteSearch3runEm" title='gtsam::DiscreteSearch::run' data-ref="_ZNK5gtsam14DiscreteSearch3runEm">run</a>(<span class='inlayHint'>K:&nbsp;</span><var>4</var>);</td></tr>
<tr><th id="100">100</th><td></td></tr>
<tr><th id="101">101</th><td>    <a class="macro" href="../../../CppUnitLite/Test.h.html#154" title="{ long actualTemp = solutions.size(); long expectedTemp = 4; if ((expectedTemp) != (actualTemp)) { result_.addFailure (Failure (name_, &quot;/home/dvorak/gtsam/gtsam/discrete/tests/testDiscreteSearch.cpp&quot;, 101, std::to_string(expectedTemp), std::to_string(actualTemp))); } }" data-ref="_M/EXPECT_LONGS_EQUAL">EXPECT_LONGS_EQUAL</a>(<var>4</var>, <a class="local col6 ref" href="#16solutions" title='solutions' data-ref="16solutions">solutions</a>.<a class="ref fn" href="../../../../include/c++/13/bits/stl_vector.h.html#_ZNKSt6vector4sizeEv" title='std::vector::size' data-ref="_ZNKSt6vector4sizeEv">size</a>());</td></tr>
<tr><th id="102">102</th><td>    <i>// Regression test: check the first and last solution</i></td></tr>
<tr><th id="103">103</th><td>    <a class="macro" href="../../../CppUnitLite/Test.h.html#161" title="{ double actualTemp = std::fabs(solutions[0].error); double expectedTemp = 1.236627; if (!std::isfinite(actualTemp) || !std::isfinite(expectedTemp) || fabs ((expectedTemp)-(actualTemp)) &gt; 1e-5) { result_.addFailure (Failure (name_, &quot;/home/dvorak/gtsam/gtsam/discrete/tests/testDiscreteSearch.cpp&quot;, 103, std::to_string((double)expectedTemp), std::to_string((double)actualTemp))); } }" data-ref="_M/EXPECT_DOUBLES_EQUAL">EXPECT_DOUBLES_EQUAL</a>(<var>1.236627</var>, std::<a class="ref fn" href="../../../../include/x86_64-linux-gnu/bits/mathcalls.h.html#162" title='fabs' data-ref="fabs">fabs</a>(<a class="local col6 ref" href="#16solutions" title='solutions' data-ref="16solutions">solutions</a>[<var>0</var>].<a class="ref field" href="../DiscreteSearch.h.html#gtsam::DiscreteSearch::Solution::error" title='gtsam::DiscreteSearch::Solution::error' data-ref="gtsam::DiscreteSearch::Solution::error">error</a>), <var>1e-5</var>);</td></tr>
<tr><th id="104">104</th><td>    <a class="macro" href="../../../CppUnitLite/Test.h.html#161" title="{ double actualTemp = std::fabs(solutions[3].error); double expectedTemp = 2.201708; if (!std::isfinite(actualTemp) || !std::isfinite(expectedTemp) || fabs ((expectedTemp)-(actualTemp)) &gt; 1e-5) { result_.addFailure (Failure (name_, &quot;/home/dvorak/gtsam/gtsam/discrete/tests/testDiscreteSearch.cpp&quot;, 104, std::to_string((double)expectedTemp), std::to_string((double)actualTemp))); } }" data-ref="_M/EXPECT_DOUBLES_EQUAL">EXPECT_DOUBLES_EQUAL</a>(<var>2.201708</var>, std::<a class="ref fn" href="../../../../include/x86_64-linux-gnu/bits/mathcalls.h.html#162" title='fabs' data-ref="fabs">fabs</a>(<a class="local col6 ref" href="#16solutions" title='solutions' data-ref="16solutions">solutions</a>[<var>3</var>].<a class="ref field" href="../DiscreteSearch.h.html#gtsam::DiscreteSearch::Solution::error" title='gtsam::DiscreteSearch::Solution::error' data-ref="gtsam::DiscreteSearch::Solution::error">error</a>), <var>1e-5</var>);</td></tr>
<tr><th id="105">105</th><td>  }</td></tr>
<tr><th id="106">106</th><td>}</td></tr>
<tr><th id="107">107</th><td></td></tr>
<tr><th id="108">108</th><td><i>/* ************************************************************************* */</i></td></tr>
<tr><th id="109">109</th><td><em>int</em> <dfn class="decl def fn" id="main" title='main' data-ref="main">main</dfn>() {</td></tr>
<tr><th id="110">110</th><td>  <a class="type" href="../../../CppUnitLite/TestResult.h.html#TestResult" title='TestResult' data-ref="TestResult">TestResult</a> <a class="ref fn fake" href="../../../CppUnitLite/TestResult.h.html#_ZN10TestResultC1Ev" title='TestResult::TestResult' data-ref="_ZN10TestResultC1Ev"></a><dfn class="local col7 decl" id="17tr" title='tr' data-type='TestResult' data-ref="17tr">tr</dfn>;</td></tr>
<tr><th id="111">111</th><td>  <b>return</b> <a class="type" href="../../../CppUnitLite/TestRegistry.h.html#TestRegistry" title='TestRegistry' data-ref="TestRegistry">TestRegistry</a>::<a class="ref fn" href="../../../CppUnitLite/TestRegistry.h.html#_ZN12TestRegistry11runAllTestsER10TestResult" title='TestRegistry::runAllTests' data-ref="_ZN12TestRegistry11runAllTestsER10TestResult">runAllTests</a>(<span class='inlayHint'>result&amp;:&nbsp;</span><span class='refarg'><a class="local col7 ref" href="#17tr" title='tr' data-ref="17tr">tr</a></span>);</td></tr>
<tr><th id="112">112</th><td>}</td></tr>
<tr><th id="113">113</th><td><i>/* ************************************************************************* */</i></td></tr>
<tr><th id="114">114</th><td></td></tr>
</table><hr/><p id='footer'>
Generated on <em>2025-Nov-28</em> from project codebrowser revision <em>4.2.0-ros-3988-g645c5741e</em><br />Powered by <a href='https://woboq.com'><img alt='Woboq' src='https://code.woboq.org/woboq-16.png' width='41' height='16' /></a> <a href='https://code.woboq.org'>Code Browser</a> 2.1
<br/>Generator usage only permitted with license.</p>
</div></body></html>
