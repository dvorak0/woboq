<!doctype html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0"><title>rotation_test.cc source code [ceres-solver/internal/ceres/rotation_test.cc] - Woboq Code Browser</title>
<link rel="stylesheet" href="../../../../data/qtcreator.css" title="QtCreator"/>
<link rel="alternate stylesheet" href="../../../../data/kdevelop.css" title="KDevelop"/>
<script type="text/javascript" src="../../../../data/jquery/jquery.min.js"></script>
<script type="text/javascript" src="../../../../data/jquery/jquery-ui.min.js"></script>
<script>var file = 'ceres-solver/internal/ceres/rotation_test.cc'; var root_path = '../../..'; var data_path = '../../../../data';</script>
<script src='../../../../data/codebrowser.js'></script>
</head>
<body><div id='header'><h1 id='breadcrumb'><span>Browse the source code of </span><a href='../..'>ceres-solver</a>/<a href='..'>internal</a>/<a href='./'>ceres</a>/<a href='rotation_test.cc.html'>rotation_test.cc</a></h1></div>
<hr/><div id='content'><table class="code">
<tr><th id="1">1</th><td><i>// Ceres Solver - A fast non-linear least squares minimizer</i></td></tr>
<tr><th id="2">2</th><td><i>// Copyright 2015 Google Inc. All rights reserved.</i></td></tr>
<tr><th id="3">3</th><td><i>// <a href="http://ceres-solver.org/">http://ceres-solver.org/</a></i></td></tr>
<tr><th id="4">4</th><td><i>//</i></td></tr>
<tr><th id="5">5</th><td><i>// Redistribution and use in source and binary forms, with or without</i></td></tr>
<tr><th id="6">6</th><td><i>// modification, are permitted provided that the following conditions are met:</i></td></tr>
<tr><th id="7">7</th><td><i>//</i></td></tr>
<tr><th id="8">8</th><td><i>// * Redistributions of source code must retain the above copyright notice,</i></td></tr>
<tr><th id="9">9</th><td><i>//   this list of conditions and the following disclaimer.</i></td></tr>
<tr><th id="10">10</th><td><i>// * Redistributions in binary form must reproduce the above copyright notice,</i></td></tr>
<tr><th id="11">11</th><td><i>//   this list of conditions and the following disclaimer in the documentation</i></td></tr>
<tr><th id="12">12</th><td><i>//   and/or other materials provided with the distribution.</i></td></tr>
<tr><th id="13">13</th><td><i>// * Neither the name of Google Inc. nor the names of its contributors may be</i></td></tr>
<tr><th id="14">14</th><td><i>//   used to endorse or promote products derived from this software without</i></td></tr>
<tr><th id="15">15</th><td><i>//   specific prior written permission.</i></td></tr>
<tr><th id="16">16</th><td><i>//</i></td></tr>
<tr><th id="17">17</th><td><i>// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"</i></td></tr>
<tr><th id="18">18</th><td><i>// AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE</i></td></tr>
<tr><th id="19">19</th><td><i>// IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE</i></td></tr>
<tr><th id="20">20</th><td><i>// ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE</i></td></tr>
<tr><th id="21">21</th><td><i>// LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR</i></td></tr>
<tr><th id="22">22</th><td><i>// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF</i></td></tr>
<tr><th id="23">23</th><td><i>// SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS</i></td></tr>
<tr><th id="24">24</th><td><i>// INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN</i></td></tr>
<tr><th id="25">25</th><td><i>// CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)</i></td></tr>
<tr><th id="26">26</th><td><i>// ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE</i></td></tr>
<tr><th id="27">27</th><td><i>// POSSIBILITY OF SUCH DAMAGE.</i></td></tr>
<tr><th id="28">28</th><td><i>//</i></td></tr>
<tr><th id="29">29</th><td><i>// Author: sameeragarwal@google.com (Sameer Agarwal)</i></td></tr>
<tr><th id="30">30</th><td></td></tr>
<tr><th id="31">31</th><td><u>#include <a href="../../../include/c++/4.8/cmath.html">&lt;cmath&gt;</a></u></td></tr>
<tr><th id="32">32</th><td><u>#include <a href="../../../include/c++/4.8/limits.html">&lt;limits&gt;</a></u></td></tr>
<tr><th id="33">33</th><td><u>#include <a href="../../../include/c++/4.8/string.html">&lt;string&gt;</a></u></td></tr>
<tr><th id="34">34</th><td><u>#include <a href="../../include/ceres/internal/eigen.h.html">"ceres/internal/eigen.h"</a></u></td></tr>
<tr><th id="35">35</th><td><u>#include <a href="is_close.h.html">"ceres/is_close.h"</a></u></td></tr>
<tr><th id="36">36</th><td><u>#include <a href="../../include/ceres/internal/port.h.html">"ceres/internal/port.h"</a></u></td></tr>
<tr><th id="37">37</th><td><u>#include <a href="../../include/ceres/jet.h.html">"ceres/jet.h"</a></u></td></tr>
<tr><th id="38">38</th><td><u>#include <a href="../../include/ceres/rotation.h.html">"ceres/rotation.h"</a></u></td></tr>
<tr><th id="39">39</th><td><u>#include <a href="stringprintf.h.html">"ceres/stringprintf.h"</a></u></td></tr>
<tr><th id="40">40</th><td><u>#include <a href="test_util.h.html">"ceres/test_util.h"</a></u></td></tr>
<tr><th id="41">41</th><td><u>#include <a href="../../../include/glog/logging.h.html">"glog/logging.h"</a></u></td></tr>
<tr><th id="42">42</th><td><u>#include <a href="gmock/gmock.h.html">"gmock/gmock.h"</a></u></td></tr>
<tr><th id="43">43</th><td><u>#include <a href="gtest/gtest.h.html">"gtest/gtest.h"</a></u></td></tr>
<tr><th id="44">44</th><td></td></tr>
<tr><th id="45">45</th><td><b>namespace</b> <span class="namespace">ceres</span> {</td></tr>
<tr><th id="46">46</th><td><b>namespace</b> <span class="namespace">internal</span> {</td></tr>
<tr><th id="47">47</th><td></td></tr>
<tr><th id="48">48</th><td><b>using</b> <span class="namespace">std::</span>min;</td></tr>
<tr><th id="49">49</th><td><b>using</b> <span class="namespace">std::</span>max;</td></tr>
<tr><th id="50">50</th><td><b>using</b> <span class="namespace">std::</span>numeric_limits;</td></tr>
<tr><th id="51">51</th><td><b>using</b> <span class="namespace">std::</span>string;</td></tr>
<tr><th id="52">52</th><td><b>using</b> <span class="namespace">std::</span>swap;</td></tr>
<tr><th id="53">53</th><td></td></tr>
<tr><th id="54">54</th><td><em>const</em> <em>double</em> <dfn class="tu decl def" id="ceres::internal::kPi" title='ceres::internal::kPi' data-type='const double' data-ref="ceres::internal::kPi">kPi</dfn> = <var>3.14159265358979323846</var>;</td></tr>
<tr><th id="55">55</th><td><em>const</em> <em>double</em> <dfn class="tu decl def" id="ceres::internal::kHalfSqrt2" title='ceres::internal::kHalfSqrt2' data-type='const double' data-ref="ceres::internal::kHalfSqrt2">kHalfSqrt2</dfn> = <var>0.707106781186547524401</var>;</td></tr>
<tr><th id="56">56</th><td></td></tr>
<tr><th id="57">57</th><td><em>double</em> <dfn class="decl def" id="_ZN5ceres8internal10RandDoubleEv" title='ceres::internal::RandDouble' data-ref="_ZN5ceres8internal10RandDoubleEv">RandDouble</dfn>() {</td></tr>
<tr><th id="58">58</th><td>  <em>double</em> <dfn class="local col1 decl" id="1r" title='r' data-type='double' data-ref="1r">r</dfn> = <a class="ref" href="../../../include/stdlib.h.html#rand" title='rand' data-ref="rand">rand</a>();</td></tr>
<tr><th id="59">59</th><td>  <b>return</b> <a class="local col1 ref" href="#1r" title='r' data-ref="1r">r</a> / <a class="macro" href="../../../include/stdlib.h.html#128" title="2147483647" data-ref="_M/RAND_MAX">RAND_MAX</a>;</td></tr>
<tr><th id="60">60</th><td>}</td></tr>
<tr><th id="61">61</th><td></td></tr>
<tr><th id="62">62</th><td><i  data-doc="ceres::internal::kTolerance">// A tolerance value for floating-point comparisons.</i></td></tr>
<tr><th id="63">63</th><td><em>static</em> <em>double</em> <em>const</em> <dfn class="tu decl def" id="ceres::internal::kTolerance" title='ceres::internal::kTolerance' data-type='const double' data-ref="ceres::internal::kTolerance">kTolerance</dfn> = <a class="type" href="../../../include/c++/4.8/limits.html#std::numeric_limits" title='std::numeric_limits' data-ref="std::numeric_limits">numeric_limits</a>&lt;<em>double</em>&gt;::<a class="ref" href="../../../include/c++/4.8/limits.html#_ZNSt14numeric_limitsIdE7epsilonEv" title='std::numeric_limits&lt;double&gt;::epsilon' data-ref="_ZNSt14numeric_limitsIdE7epsilonEv">epsilon</a>() * <var>10</var>;</td></tr>
<tr><th id="64">64</th><td></td></tr>
<tr><th id="65">65</th><td><i  data-doc="ceres::internal::kLooseTolerance">// Looser tolerance used for numerically unstable conversions.</i></td></tr>
<tr><th id="66">66</th><td><em>static</em> <em>double</em> <em>const</em> <dfn class="tu decl def" id="ceres::internal::kLooseTolerance" title='ceres::internal::kLooseTolerance' data-type='const double' data-ref="ceres::internal::kLooseTolerance">kLooseTolerance</dfn> = <var>1e-9</var>;</td></tr>
<tr><th id="67">67</th><td></td></tr>
<tr><th id="68">68</th><td><i>// Use as:</i></td></tr>
<tr><th id="69">69</th><td><i>// double quaternion[4];</i></td></tr>
<tr><th id="70">70</th><td><i>// EXPECT_THAT(quaternion, IsNormalizedQuaternion());</i></td></tr>
<tr><th id="71">71</th><td><a class="macro" href="gmock/gmock.h.html#13851" title="class IsNormalizedQuaternionMatcher { public: template &lt;typename arg_type&gt; class gmock_Impl : public ::testing::MatcherInterface&lt;arg_type&gt; { public: gmock_Impl() {} virtual bool MatchAndExplain( arg_type arg, ::testing::MatchResultListener* result_listener) const; virtual void DescribeTo(::std::ostream* gmock_os) const { *gmock_os &lt;&lt; FormatDescription(false); } virtual void DescribeNegationTo(::std::ostream* gmock_os) const { *gmock_os &lt;&lt; FormatDescription(true); } private: ::testing::internal::string FormatDescription(bool negation) const { const ::testing::internal::string gmock_description = (&quot;&quot;); if (!gmock_description.empty()) return gmock_description; return ::testing::internal::FormatMatcherDescription( negation, &quot;IsNormalizedQuaternion&quot;, ::testing::internal::UniversalTersePrintTupleFieldsToStrings( ::testing::tuple&lt;&gt;())); } void operator=(gmock_Impl const &amp;); }; template &lt;typename arg_type&gt; operator ::testing::Matcher&lt;arg_type&gt;() const { return ::testing::Matcher&lt;arg_type&gt;( new gmock_Impl&lt;arg_type&gt;()); } IsNormalizedQuaternionMatcher() { } private: void operator=(IsNormalizedQuaternionMatcher const &amp;); }; inline IsNormalizedQuaternionMatcher IsNormalizedQuaternion() { return IsNormalizedQuaternionMatcher(); } template &lt;typename arg_type&gt; bool IsNormalizedQuaternionMatcher::gmock_Impl&lt;arg_type&gt;::MatchAndExplain( arg_type arg, ::testing::MatchResultListener* result_listener __attribute__ ((unused))) const" data-ref="_M/MATCHER">MATCHER</a>(<dfn class="decl def" id="_ZN5ceres8internal22IsNormalizedQuaternionEv" title='ceres::internal::IsNormalizedQuaternion' data-ref="_ZN5ceres8internal22IsNormalizedQuaternionEv">IsNormalizedQuaternion</dfn>, <q>""</q>) {</td></tr>
<tr><th id="72">72</th><td>  <b>if</b> (<a class="local col2 ref" href="#71" title='arg' data-ref="2arg">arg</a> == <span class="macro" title="__null" data-ref="_M/NULL">NULL</span>) {</td></tr>
<tr><th id="73">73</th><td>    *<a class="local col3 ref" href="#71" title='result_listener' data-ref="3result_listener">result_listener</a> <a class="ref" href="gmock/gmock.h.html#_ZN7testing19MatchResultListenerlsERKT_" title='testing::MatchResultListener::operator&lt;&lt;' data-ref="_ZN7testing19MatchResultListenerlsERKT_">&lt;&lt;</a> <q>"Null quaternion"</q>;</td></tr>
<tr><th id="74">74</th><td>    <b>return</b> <b>false</b>;</td></tr>
<tr><th id="75">75</th><td>  }</td></tr>
<tr><th id="76">76</th><td></td></tr>
<tr><th id="77">77</th><td>  <em>double</em> <dfn class="local col4 decl" id="4norm2" title='norm2' data-type='double' data-ref="4norm2">norm2</dfn> = <a class="local col2 ref" href="#71" title='arg' data-ref="2arg">arg</a>[<var>0</var>] * <a class="local col2 ref" href="#71" title='arg' data-ref="2arg">arg</a>[<var>0</var>] + <a class="local col2 ref" href="#71" title='arg' data-ref="2arg">arg</a>[<var>1</var>] * <a class="local col2 ref" href="#71" title='arg' data-ref="2arg">arg</a>[<var>1</var>] +</td></tr>
<tr><th id="78">78</th><td>      <a class="local col2 ref" href="#71" title='arg' data-ref="2arg">arg</a>[<var>2</var>] * <a class="local col2 ref" href="#71" title='arg' data-ref="2arg">arg</a>[<var>2</var>] + <a class="local col2 ref" href="#71" title='arg' data-ref="2arg">arg</a>[<var>3</var>] * <a class="local col2 ref" href="#71" title='arg' data-ref="2arg">arg</a>[<var>3</var>];</td></tr>
<tr><th id="79">79</th><td>  <b>if</b> (<a class="ref" href="../../../include/x86_64-linux-gnu/bits/mathcalls.h.html#181" title='fabs' data-ref="fabs">fabs</a>(<a class="local col4 ref" href="#4norm2" title='norm2' data-ref="4norm2">norm2</a> - <var>1.0</var>) &gt; <a class="tu ref" href="#ceres::internal::kTolerance" title='ceres::internal::kTolerance' data-use='r' data-ref="ceres::internal::kTolerance">kTolerance</a>) {</td></tr>
<tr><th id="80">80</th><td>    *<a class="local col3 ref" href="#71" title='result_listener' data-ref="3result_listener">result_listener</a> <a class="ref" href="gmock/gmock.h.html#_ZN7testing19MatchResultListenerlsERKT_" title='testing::MatchResultListener::operator&lt;&lt;' data-ref="_ZN7testing19MatchResultListenerlsERKT_">&lt;&lt;</a> <q>"squared norm is "</q> <a class="ref" href="gmock/gmock.h.html#_ZN7testing19MatchResultListenerlsERKT_" title='testing::MatchResultListener::operator&lt;&lt;' data-ref="_ZN7testing19MatchResultListenerlsERKT_">&lt;&lt;</a> <a class="local col4 ref" href="#4norm2" title='norm2' data-ref="4norm2">norm2</a>;</td></tr>
<tr><th id="81">81</th><td>    <b>return</b> <b>false</b>;</td></tr>
<tr><th id="82">82</th><td>  }</td></tr>
<tr><th id="83">83</th><td></td></tr>
<tr><th id="84">84</th><td>  <b>return</b> <b>true</b>;</td></tr>
<tr><th id="85">85</th><td>}</td></tr>
<tr><th id="86">86</th><td></td></tr>
<tr><th id="87">87</th><td><i>// Use as:</i></td></tr>
<tr><th id="88">88</th><td><i>// double expected_quaternion[4];</i></td></tr>
<tr><th id="89">89</th><td><i>// double actual_quaternion[4];</i></td></tr>
<tr><th id="90">90</th><td><i>// EXPECT_THAT(actual_quaternion, IsNearQuaternion(expected_quaternion));</i></td></tr>
<tr><th id="91">91</th><td><a class="macro" href="gmock/gmock.h.html#13898" title="template &lt;typename expected_type&gt; class IsNearQuaternionMatcherP { public: template &lt;typename arg_type&gt; class gmock_Impl : public ::testing::MatcherInterface&lt;arg_type&gt; { public: explicit gmock_Impl( expected_type gmock_p0) : expected(gmock_p0) {} virtual bool MatchAndExplain( arg_type arg, ::testing::MatchResultListener* result_listener) const; virtual void DescribeTo(::std::ostream* gmock_os) const { *gmock_os &lt;&lt; FormatDescription(false); } virtual void DescribeNegationTo(::std::ostream* gmock_os) const { *gmock_os &lt;&lt; FormatDescription(true); } expected_type expected; private: ::testing::internal::string FormatDescription(bool negation) const { const ::testing::internal::string gmock_description = (&quot;&quot;); if (!gmock_description.empty()) return gmock_description; return ::testing::internal::FormatMatcherDescription( negation, &quot;IsNearQuaternion&quot;, ::testing::internal::UniversalTersePrintTupleFieldsToStrings( ::testing::tuple&lt; expected_type&gt;(expected))); } void operator=(gmock_Impl const &amp;); }; template &lt;typename arg_type&gt; operator ::testing::Matcher&lt;arg_type&gt;() const { return ::testing::Matcher&lt;arg_type&gt;( new gmock_Impl&lt;arg_type&gt;(expected)); } explicit IsNearQuaternionMatcherP( expected_type gmock_p0) : expected(gmock_p0) { } expected_type expected; private: void operator=(IsNearQuaternionMatcherP const &amp;); }; template &lt;typename expected_type&gt; inline IsNearQuaternionMatcherP&lt; expected_type&gt; IsNearQuaternion( expected_type expected) { return IsNearQuaternionMatcherP&lt; expected_type&gt;(expected); } template &lt;typename expected_type&gt; template &lt;typename arg_type&gt; bool IsNearQuaternionMatcherP&lt; expected_type&gt;::gmock_Impl&lt;arg_type&gt;::MatchAndExplain( arg_type arg, ::testing::MatchResultListener* result_listener __attribute__ ((unused))) const" data-ref="_M/MATCHER_P">MATCHER_P</a>(<dfn class="decl def" id="_ZN5ceres8internal16IsNearQuaternionET_" title='ceres::internal::IsNearQuaternion' data-ref="_ZN5ceres8internal16IsNearQuaternionET_">IsNearQuaternion</dfn>, <a class="member" href="#91" title='ceres::internal::IsNearQuaternionMatcherP::gmock_Impl::expected' data-ref="ceres::internal::IsNearQuaternionMatcherP::gmock_Impl::expected"><dfn class="decl" id="ceres::internal::IsNearQuaternionMatcherP::gmock_Impl::expected" title='ceres::internal::IsNearQuaternionMatcherP::gmock_Impl::expected' data-ref="ceres::internal::IsNearQuaternionMatcherP::gmock_Impl::expected"><a class="member" href="#91" title='ceres::internal::IsNearQuaternionMatcherP::expected' data-ref="ceres::internal::IsNearQuaternionMatcherP::expected"><a class="member" href="#91" title='ceres::internal::IsNearQuaternionMatcherP::expected' data-ref="ceres::internal::IsNearQuaternionMatcherP::expected"><dfn class="decl" id="ceres::internal::IsNearQuaternionMatcherP::expected" title='ceres::internal::IsNearQuaternionMatcherP::expected' data-ref="ceres::internal::IsNearQuaternionMatcherP::expected"><dfn class="local col5 decl" id="5expected" title='expected' data-type='expected_type' data-ref="5expected"><a class="local col5 ref" href="#91" title='expected' data-ref="5expected">expected</a></dfn></dfn></a></a></dfn></a>, <q>""</q>) {</td></tr>
<tr><th id="92">92</th><td>  <b>if</b> (<a class="local col6 ref" href="#91" title='arg' data-ref="6arg">arg</a> == <span class="macro" title="__null" data-ref="_M/NULL">NULL</span>) {</td></tr>
<tr><th id="93">93</th><td>    *<a class="local col7 ref" href="#91" title='result_listener' data-ref="7result_listener">result_listener</a> <a class="ref" href="gmock/gmock.h.html#_ZN7testing19MatchResultListenerlsERKT_" title='testing::MatchResultListener::operator&lt;&lt;' data-ref="_ZN7testing19MatchResultListenerlsERKT_">&lt;&lt;</a> <q>"Null quaternion"</q>;</td></tr>
<tr><th id="94">94</th><td>    <b>return</b> <b>false</b>;</td></tr>
<tr><th id="95">95</th><td>  }</td></tr>
<tr><th id="96">96</th><td></td></tr>
<tr><th id="97">97</th><td>  <i>// Quaternions are equivalent upto a sign change. So we will compare</i></td></tr>
<tr><th id="98">98</th><td><i>  // both signs before declaring failure.</i></td></tr>
<tr><th id="99">99</th><td>  <em>bool</em> <dfn class="local col8 decl" id="8near" title='near' data-type='bool' data-ref="8near">near</dfn> = <b>true</b>;</td></tr>
<tr><th id="100">100</th><td>  <b>for</b> (<em>int</em> <dfn class="local col9 decl" id="9i" title='i' data-type='int' data-ref="9i">i</dfn> = <var>0</var>; <a class="local col9 ref" href="#9i" title='i' data-ref="9i">i</a> &lt; <var>4</var>; <a class="local col9 ref" href="#9i" title='i' data-ref="9i">i</a>++) {</td></tr>
<tr><th id="101">101</th><td>    <b>if</b> (fabs(<a class="local col6 ref" href="#91" title='arg' data-ref="6arg">arg</a>[<a class="local col9 ref" href="#9i" title='i' data-ref="9i">i</a>] - <a class="member" href="#91" title='ceres::internal::IsNearQuaternionMatcherP::gmock_Impl::expected' data-ref="ceres::internal::IsNearQuaternionMatcherP::gmock_Impl::expected">expected</a>[<a class="local col9 ref" href="#9i" title='i' data-ref="9i">i</a>]) &gt; <a class="tu ref" href="#ceres::internal::kTolerance" title='ceres::internal::kTolerance' data-ref="ceres::internal::kTolerance">kTolerance</a>) {</td></tr>
<tr><th id="102">102</th><td>      <a class="local col8 ref" href="#8near" title='near' data-ref="8near">near</a> = <b>false</b>;</td></tr>
<tr><th id="103">103</th><td>      <b>break</b>;</td></tr>
<tr><th id="104">104</th><td>    }</td></tr>
<tr><th id="105">105</th><td>  }</td></tr>
<tr><th id="106">106</th><td></td></tr>
<tr><th id="107">107</th><td>  <b>if</b> (<a class="local col8 ref" href="#8near" title='near' data-ref="8near">near</a>) {</td></tr>
<tr><th id="108">108</th><td>    <b>return</b> <b>true</b>;</td></tr>
<tr><th id="109">109</th><td>  }</td></tr>
<tr><th id="110">110</th><td></td></tr>
<tr><th id="111">111</th><td>  <a class="local col8 ref" href="#8near" title='near' data-ref="8near">near</a> = <b>true</b>;</td></tr>
<tr><th id="112">112</th><td>  <b>for</b> (<em>int</em> <dfn class="local col0 decl" id="10i" title='i' data-type='int' data-ref="10i">i</dfn> = <var>0</var>; <a class="local col0 ref" href="#10i" title='i' data-ref="10i">i</a> &lt; <var>4</var>; <a class="local col0 ref" href="#10i" title='i' data-ref="10i">i</a>++) {</td></tr>
<tr><th id="113">113</th><td>    <b>if</b> (fabs(<a class="local col6 ref" href="#91" title='arg' data-ref="6arg">arg</a>[<a class="local col0 ref" href="#10i" title='i' data-ref="10i">i</a>] + <a class="member" href="#91" title='ceres::internal::IsNearQuaternionMatcherP::gmock_Impl::expected' data-ref="ceres::internal::IsNearQuaternionMatcherP::gmock_Impl::expected">expected</a>[<a class="local col0 ref" href="#10i" title='i' data-ref="10i">i</a>]) &gt; <a class="tu ref" href="#ceres::internal::kTolerance" title='ceres::internal::kTolerance' data-ref="ceres::internal::kTolerance">kTolerance</a>) {</td></tr>
<tr><th id="114">114</th><td>      <a class="local col8 ref" href="#8near" title='near' data-ref="8near">near</a> = <b>false</b>;</td></tr>
<tr><th id="115">115</th><td>      <b>break</b>;</td></tr>
<tr><th id="116">116</th><td>    }</td></tr>
<tr><th id="117">117</th><td>  }</td></tr>
<tr><th id="118">118</th><td></td></tr>
<tr><th id="119">119</th><td>  <b>if</b> (<a class="local col8 ref" href="#8near" title='near' data-ref="8near">near</a>) {</td></tr>
<tr><th id="120">120</th><td>    <b>return</b> <b>true</b>;</td></tr>
<tr><th id="121">121</th><td>  }</td></tr>
<tr><th id="122">122</th><td></td></tr>
<tr><th id="123">123</th><td>  *<a class="local col7 ref" href="#91" title='result_listener' data-ref="7result_listener">result_listener</a> <a class="ref" href="gmock/gmock.h.html#_ZN7testing19MatchResultListenerlsERKT_" title='testing::MatchResultListener::operator&lt;&lt;' data-ref="_ZN7testing19MatchResultListenerlsERKT_">&lt;&lt;</a> <q>"expected : "</q></td></tr>
<tr><th id="124">124</th><td>                   &lt;&lt; <a class="member" href="#91" title='ceres::internal::IsNearQuaternionMatcherP::gmock_Impl::expected' data-ref="ceres::internal::IsNearQuaternionMatcherP::gmock_Impl::expected">expected</a>[<var>0</var>] &lt;&lt; <q>" "</q></td></tr>
<tr><th id="125">125</th><td>                   &lt;&lt; <a class="member" href="#91" title='ceres::internal::IsNearQuaternionMatcherP::gmock_Impl::expected' data-ref="ceres::internal::IsNearQuaternionMatcherP::gmock_Impl::expected">expected</a>[<var>1</var>] &lt;&lt; <q>" "</q></td></tr>
<tr><th id="126">126</th><td>                   &lt;&lt; <a class="member" href="#91" title='ceres::internal::IsNearQuaternionMatcherP::gmock_Impl::expected' data-ref="ceres::internal::IsNearQuaternionMatcherP::gmock_Impl::expected">expected</a>[<var>2</var>] &lt;&lt; <q>" "</q></td></tr>
<tr><th id="127">127</th><td>                   &lt;&lt; <a class="member" href="#91" title='ceres::internal::IsNearQuaternionMatcherP::gmock_Impl::expected' data-ref="ceres::internal::IsNearQuaternionMatcherP::gmock_Impl::expected">expected</a>[<var>3</var>] &lt;&lt; <q>" "</q></td></tr>
<tr><th id="128">128</th><td>                   &lt;&lt; <q>"actual : "</q></td></tr>
<tr><th id="129">129</th><td>                   &lt;&lt; <a class="local col6 ref" href="#91" title='arg' data-ref="6arg">arg</a>[<var>0</var>] &lt;&lt; <q>" "</q></td></tr>
<tr><th id="130">130</th><td>                   &lt;&lt; <a class="local col6 ref" href="#91" title='arg' data-ref="6arg">arg</a>[<var>1</var>] &lt;&lt; <q>" "</q></td></tr>
<tr><th id="131">131</th><td>                   &lt;&lt; <a class="local col6 ref" href="#91" title='arg' data-ref="6arg">arg</a>[<var>2</var>] &lt;&lt; <q>" "</q></td></tr>
<tr><th id="132">132</th><td>                   &lt;&lt; <a class="local col6 ref" href="#91" title='arg' data-ref="6arg">arg</a>[<var>3</var>];</td></tr>
<tr><th id="133">133</th><td>  <b>return</b> <b>false</b>;</td></tr>
<tr><th id="134">134</th><td>}</td></tr>
<tr><th id="135">135</th><td></td></tr>
<tr><th id="136">136</th><td><i>// Use as:</i></td></tr>
<tr><th id="137">137</th><td><i>// double expected_axis_angle[3];</i></td></tr>
<tr><th id="138">138</th><td><i>// double actual_axis_angle[3];</i></td></tr>
<tr><th id="139">139</th><td><i>// EXPECT_THAT(actual_axis_angle, IsNearAngleAxis(expected_axis_angle));</i></td></tr>
<tr><th id="140">140</th><td><a class="macro" href="gmock/gmock.h.html#13898" title="template &lt;typename expected_type&gt; class IsNearAngleAxisMatcherP { public: template &lt;typename arg_type&gt; class gmock_Impl : public ::testing::MatcherInterface&lt;arg_type&gt; { public: explicit gmock_Impl( expected_type gmock_p0) : expected(gmock_p0) {} virtual bool MatchAndExplain( arg_type arg, ::testing::MatchResultListener* result_listener) const; virtual void DescribeTo(::std::ostream* gmock_os) const { *gmock_os &lt;&lt; FormatDescription(false); } virtual void DescribeNegationTo(::std::ostream* gmock_os) const { *gmock_os &lt;&lt; FormatDescription(true); } expected_type expected; private: ::testing::internal::string FormatDescription(bool negation) const { const ::testing::internal::string gmock_description = (&quot;&quot;); if (!gmock_description.empty()) return gmock_description; return ::testing::internal::FormatMatcherDescription( negation, &quot;IsNearAngleAxis&quot;, ::testing::internal::UniversalTersePrintTupleFieldsToStrings( ::testing::tuple&lt; expected_type&gt;(expected))); } void operator=(gmock_Impl const &amp;); }; template &lt;typename arg_type&gt; operator ::testing::Matcher&lt;arg_type&gt;() const { return ::testing::Matcher&lt;arg_type&gt;( new gmock_Impl&lt;arg_type&gt;(expected)); } explicit IsNearAngleAxisMatcherP( expected_type gmock_p0) : expected(gmock_p0) { } expected_type expected; private: void operator=(IsNearAngleAxisMatcherP const &amp;); }; template &lt;typename expected_type&gt; inline IsNearAngleAxisMatcherP&lt; expected_type&gt; IsNearAngleAxis( expected_type expected) { return IsNearAngleAxisMatcherP&lt; expected_type&gt;(expected); } template &lt;typename expected_type&gt; template &lt;typename arg_type&gt; bool IsNearAngleAxisMatcherP&lt; expected_type&gt;::gmock_Impl&lt;arg_type&gt;::MatchAndExplain( arg_type arg, ::testing::MatchResultListener* result_listener __attribute__ ((unused))) const" data-ref="_M/MATCHER_P">MATCHER_P</a>(<dfn class="decl def" id="_ZN5ceres8internal15IsNearAngleAxisET_" title='ceres::internal::IsNearAngleAxis' data-ref="_ZN5ceres8internal15IsNearAngleAxisET_">IsNearAngleAxis</dfn>, <a class="member" href="#140" title='ceres::internal::IsNearAngleAxisMatcherP::gmock_Impl::expected' data-ref="ceres::internal::IsNearAngleAxisMatcherP::gmock_Impl::expected"><dfn class="decl" id="ceres::internal::IsNearAngleAxisMatcherP::gmock_Impl::expected" title='ceres::internal::IsNearAngleAxisMatcherP::gmock_Impl::expected' data-ref="ceres::internal::IsNearAngleAxisMatcherP::gmock_Impl::expected"><a class="member" href="#140" title='ceres::internal::IsNearAngleAxisMatcherP::expected' data-ref="ceres::internal::IsNearAngleAxisMatcherP::expected"><a class="member" href="#140" title='ceres::internal::IsNearAngleAxisMatcherP::expected' data-ref="ceres::internal::IsNearAngleAxisMatcherP::expected"><dfn class="decl" id="ceres::internal::IsNearAngleAxisMatcherP::expected" title='ceres::internal::IsNearAngleAxisMatcherP::expected' data-ref="ceres::internal::IsNearAngleAxisMatcherP::expected"><dfn class="local col1 decl" id="11expected" title='expected' data-type='expected_type' data-ref="11expected"><a class="local col1 ref" href="#140" title='expected' data-ref="11expected">expected</a></dfn></dfn></a></a></dfn></a>, <q>""</q>) {</td></tr>
<tr><th id="141">141</th><td>  <b>if</b> (<a class="local col2 ref" href="#140" title='arg' data-ref="12arg">arg</a> == <span class="macro" title="__null" data-ref="_M/NULL">NULL</span>) {</td></tr>
<tr><th id="142">142</th><td>    *<a class="local col3 ref" href="#140" title='result_listener' data-ref="13result_listener">result_listener</a> <a class="ref" href="gmock/gmock.h.html#_ZN7testing19MatchResultListenerlsERKT_" title='testing::MatchResultListener::operator&lt;&lt;' data-ref="_ZN7testing19MatchResultListenerlsERKT_">&lt;&lt;</a> <q>"Null axis/angle"</q>;</td></tr>
<tr><th id="143">143</th><td>    <b>return</b> <b>false</b>;</td></tr>
<tr><th id="144">144</th><td>  }</td></tr>
<tr><th id="145">145</th><td></td></tr>
<tr><th id="146">146</th><td>  <span class="namespace">Eigen::</span><a class="typedef" href="../../../include/eigen3/Eigen/src/Core/Matrix.h.html#395" title='Eigen::Vector3d' data-type='Matrix&lt;double, 3, 1&gt;' data-ref="Eigen::Vector3d">Vector3d</a> <dfn class="local col4 decl" id="14a" title='a' data-type='Eigen::Vector3d' data-ref="14a">a</dfn>(<a class="local col2 ref" href="#140" title='arg' data-ref="12arg">arg</a>[<var>0</var>], <a class="local col2 ref" href="#140" title='arg' data-ref="12arg">arg</a>[<var>1</var>], <a class="local col2 ref" href="#140" title='arg' data-ref="12arg">arg</a>[<var>2</var>]);</td></tr>
<tr><th id="147">147</th><td>  <span class="namespace">Eigen::</span><a class="typedef" href="../../../include/eigen3/Eigen/src/Core/Matrix.h.html#395" title='Eigen::Vector3d' data-type='Matrix&lt;double, 3, 1&gt;' data-ref="Eigen::Vector3d">Vector3d</a> <dfn class="local col5 decl" id="15e" title='e' data-type='Eigen::Vector3d' data-ref="15e">e</dfn>(<a class="member" href="#140" title='ceres::internal::IsNearAngleAxisMatcherP::gmock_Impl::expected' data-ref="ceres::internal::IsNearAngleAxisMatcherP::gmock_Impl::expected">expected</a>[<var>0</var>], <a class="member" href="#140" title='ceres::internal::IsNearAngleAxisMatcherP::gmock_Impl::expected' data-ref="ceres::internal::IsNearAngleAxisMatcherP::gmock_Impl::expected">expected</a>[<var>1</var>], <a class="member" href="#140" title='ceres::internal::IsNearAngleAxisMatcherP::gmock_Impl::expected' data-ref="ceres::internal::IsNearAngleAxisMatcherP::gmock_Impl::expected">expected</a>[<var>2</var>]);</td></tr>
<tr><th id="148">148</th><td>  <em>const</em> <em>double</em> <dfn class="local col6 decl" id="16e_norm" title='e_norm' data-type='const double' data-ref="16e_norm">e_norm</dfn> = <a class="local col5 ref" href="#15e" title='e' data-ref="15e">e</a>.<a class="ref" href="../../../include/eigen3/Eigen/src/Core/MatrixBase.h.html#_ZNK5Eigen10MatrixBase4normEv" title='Eigen::MatrixBase::norm' data-ref="_ZNK5Eigen10MatrixBase4normEv">norm</a>();</td></tr>
<tr><th id="149">149</th><td></td></tr>
<tr><th id="150">150</th><td>  <em>double</em> <dfn class="local col7 decl" id="17delta_norm" title='delta_norm' data-type='double' data-ref="17delta_norm">delta_norm</dfn> = <a class="type" href="../../../include/c++/4.8/limits.html#std::numeric_limits" title='std::numeric_limits' data-ref="std::numeric_limits">numeric_limits</a>&lt;<em>double</em>&gt;::<a class="ref" href="../../../include/c++/4.8/limits.html#_ZNSt14numeric_limitsIdE3maxEv" title='std::numeric_limits&lt;double&gt;::max' data-ref="_ZNSt14numeric_limitsIdE3maxEv">max</a>();</td></tr>
<tr><th id="151">151</th><td>  <b>if</b> (<a class="local col6 ref" href="#16e_norm" title='e_norm' data-ref="16e_norm">e_norm</a> &gt; <var>0</var>) {</td></tr>
<tr><th id="152">152</th><td>    <i>// Deal with the sign ambiguity near PI. Since the sign can flip,</i></td></tr>
<tr><th id="153">153</th><td><i>    // we take the smaller of the two differences.</i></td></tr>
<tr><th id="154">154</th><td>    <b>if</b> (<a class="ref" href="../../../include/x86_64-linux-gnu/bits/mathcalls.h.html#181" title='fabs' data-ref="fabs">fabs</a>(<a class="local col6 ref" href="#16e_norm" title='e_norm' data-ref="16e_norm">e_norm</a> - <a class="tu ref" href="#ceres::internal::kPi" title='ceres::internal::kPi' data-use='r' data-ref="ceres::internal::kPi">kPi</a>) &lt; <a class="tu ref" href="#ceres::internal::kLooseTolerance" title='ceres::internal::kLooseTolerance' data-use='r' data-ref="ceres::internal::kLooseTolerance">kLooseTolerance</a>) {</td></tr>
<tr><th id="155">155</th><td>      <a class="local col7 ref" href="#17delta_norm" title='delta_norm' data-ref="17delta_norm">delta_norm</a> = <a class="ref" href="../../../include/c++/4.8/bits/algorithmfwd.h.html#_ZSt3minRKT_S1_" title='std::min' data-ref="_ZSt3minRKT_S1_">min</a>((<a class="local col4 ref" href="#14a" title='a' data-ref="14a">a</a> <a class="ref" href="../../../include/eigen3/Eigen/src/plugins/CommonCwiseBinaryOps.h.html#19" title='Eigen::MatrixBase::operator-' data-ref="_ZNK5Eigen10MatrixBasemiERKNS_10MatrixBaseIT_EE">-</a> <a class="local col5 ref" href="#15e" title='e' data-ref="15e">e</a>).<a class="ref" href="../../../include/eigen3/Eigen/src/Core/MatrixBase.h.html#_ZNK5Eigen10MatrixBase4normEv" title='Eigen::MatrixBase::norm' data-ref="_ZNK5Eigen10MatrixBase4normEv">norm</a>(), (<a class="local col4 ref" href="#14a" title='a' data-ref="14a">a</a> <a class="ref" href="../../../include/eigen3/Eigen/src/plugins/CommonCwiseBinaryOps.h.html#27" title='Eigen::MatrixBase::operator+' data-ref="_ZNK5Eigen10MatrixBaseplERKNS_10MatrixBaseIT_EE">+</a> <a class="local col5 ref" href="#15e" title='e' data-ref="15e">e</a>).<a class="ref" href="../../../include/eigen3/Eigen/src/Core/MatrixBase.h.html#_ZNK5Eigen10MatrixBase4normEv" title='Eigen::MatrixBase::norm' data-ref="_ZNK5Eigen10MatrixBase4normEv">norm</a>()) / <a class="local col6 ref" href="#16e_norm" title='e_norm' data-ref="16e_norm">e_norm</a>;</td></tr>
<tr><th id="156">156</th><td>    } <b>else</b> {</td></tr>
<tr><th id="157">157</th><td>      <a class="local col7 ref" href="#17delta_norm" title='delta_norm' data-ref="17delta_norm">delta_norm</a> = (<a class="local col4 ref" href="#14a" title='a' data-ref="14a">a</a> <a class="ref" href="../../../include/eigen3/Eigen/src/plugins/CommonCwiseBinaryOps.h.html#19" title='Eigen::MatrixBase::operator-' data-ref="_ZNK5Eigen10MatrixBasemiERKNS_10MatrixBaseIT_EE">-</a> <a class="local col5 ref" href="#15e" title='e' data-ref="15e">e</a>).<a class="ref" href="../../../include/eigen3/Eigen/src/Core/MatrixBase.h.html#_ZNK5Eigen10MatrixBase4normEv" title='Eigen::MatrixBase::norm' data-ref="_ZNK5Eigen10MatrixBase4normEv">norm</a>() / <a class="local col6 ref" href="#16e_norm" title='e_norm' data-ref="16e_norm">e_norm</a>;</td></tr>
<tr><th id="158">158</th><td>    }</td></tr>
<tr><th id="159">159</th><td>  } <b>else</b> {</td></tr>
<tr><th id="160">160</th><td>    <a class="local col7 ref" href="#17delta_norm" title='delta_norm' data-ref="17delta_norm">delta_norm</a> = <a class="local col4 ref" href="#14a" title='a' data-ref="14a">a</a>.<a class="ref" href="../../../include/eigen3/Eigen/src/Core/MatrixBase.h.html#_ZNK5Eigen10MatrixBase4normEv" title='Eigen::MatrixBase::norm' data-ref="_ZNK5Eigen10MatrixBase4normEv">norm</a>();</td></tr>
<tr><th id="161">161</th><td>  }</td></tr>
<tr><th id="162">162</th><td></td></tr>
<tr><th id="163">163</th><td>  <b>if</b> (<a class="local col7 ref" href="#17delta_norm" title='delta_norm' data-ref="17delta_norm">delta_norm</a> &lt;= <a class="tu ref" href="#ceres::internal::kLooseTolerance" title='ceres::internal::kLooseTolerance' data-use='r' data-ref="ceres::internal::kLooseTolerance">kLooseTolerance</a>) {</td></tr>
<tr><th id="164">164</th><td>    <b>return</b> <b>true</b>;</td></tr>
<tr><th id="165">165</th><td>  }</td></tr>
<tr><th id="166">166</th><td></td></tr>
<tr><th id="167">167</th><td>  *<a class="local col3 ref" href="#140" title='result_listener' data-ref="13result_listener">result_listener</a> <a class="ref" href="gmock/gmock.h.html#_ZN7testing19MatchResultListenerlsERKT_" title='testing::MatchResultListener::operator&lt;&lt;' data-ref="_ZN7testing19MatchResultListenerlsERKT_">&lt;&lt;</a> <q>" arg:"</q></td></tr>
<tr><th id="168">168</th><td>                   <a class="ref" href="gmock/gmock.h.html#_ZN7testing19MatchResultListenerlsERKT_" title='testing::MatchResultListener::operator&lt;&lt;' data-ref="_ZN7testing19MatchResultListenerlsERKT_">&lt;&lt;</a> <q>" "</q> &lt;&lt; <a class="local col2 ref" href="#140" title='arg' data-ref="12arg">arg</a>[<var>0</var>]</td></tr>
<tr><th id="169">169</th><td>                   &lt;&lt; <q>" "</q> &lt;&lt; <a class="local col2 ref" href="#140" title='arg' data-ref="12arg">arg</a>[<var>1</var>]</td></tr>
<tr><th id="170">170</th><td>                   &lt;&lt; <q>" "</q> &lt;&lt; <a class="local col2 ref" href="#140" title='arg' data-ref="12arg">arg</a>[<var>2</var>]</td></tr>
<tr><th id="171">171</th><td>                   &lt;&lt; <q>" was expected to be:"</q></td></tr>
<tr><th id="172">172</th><td>                   &lt;&lt; <q>" "</q> &lt;&lt; <a class="member" href="#140" title='ceres::internal::IsNearAngleAxisMatcherP::gmock_Impl::expected' data-ref="ceres::internal::IsNearAngleAxisMatcherP::gmock_Impl::expected">expected</a>[<var>0</var>]</td></tr>
<tr><th id="173">173</th><td>                   &lt;&lt; <q>" "</q> &lt;&lt; <a class="member" href="#140" title='ceres::internal::IsNearAngleAxisMatcherP::gmock_Impl::expected' data-ref="ceres::internal::IsNearAngleAxisMatcherP::gmock_Impl::expected">expected</a>[<var>1</var>]</td></tr>
<tr><th id="174">174</th><td>                   &lt;&lt; <q>" "</q> &lt;&lt; <a class="member" href="#140" title='ceres::internal::IsNearAngleAxisMatcherP::gmock_Impl::expected' data-ref="ceres::internal::IsNearAngleAxisMatcherP::gmock_Impl::expected">expected</a>[<var>2</var>];</td></tr>
<tr><th id="175">175</th><td>  <b>return</b> <b>false</b>;</td></tr>
<tr><th id="176">176</th><td>}</td></tr>
<tr><th id="177">177</th><td></td></tr>
<tr><th id="178">178</th><td><i>// Use as:</i></td></tr>
<tr><th id="179">179</th><td><i>// double matrix[9];</i></td></tr>
<tr><th id="180">180</th><td><i>// EXPECT_THAT(matrix, IsOrthonormal());</i></td></tr>
<tr><th id="181">181</th><td><a class="macro" href="gmock/gmock.h.html#13851" title="class IsOrthonormalMatcher { public: template &lt;typename arg_type&gt; class gmock_Impl : public ::testing::MatcherInterface&lt;arg_type&gt; { public: gmock_Impl() {} virtual bool MatchAndExplain( arg_type arg, ::testing::MatchResultListener* result_listener) const; virtual void DescribeTo(::std::ostream* gmock_os) const { *gmock_os &lt;&lt; FormatDescription(false); } virtual void DescribeNegationTo(::std::ostream* gmock_os) const { *gmock_os &lt;&lt; FormatDescription(true); } private: ::testing::internal::string FormatDescription(bool negation) const { const ::testing::internal::string gmock_description = (&quot;&quot;); if (!gmock_description.empty()) return gmock_description; return ::testing::internal::FormatMatcherDescription( negation, &quot;IsOrthonormal&quot;, ::testing::internal::UniversalTersePrintTupleFieldsToStrings( ::testing::tuple&lt;&gt;())); } void operator=(gmock_Impl const &amp;); }; template &lt;typename arg_type&gt; operator ::testing::Matcher&lt;arg_type&gt;() const { return ::testing::Matcher&lt;arg_type&gt;( new gmock_Impl&lt;arg_type&gt;()); } IsOrthonormalMatcher() { } private: void operator=(IsOrthonormalMatcher const &amp;); }; inline IsOrthonormalMatcher IsOrthonormal() { return IsOrthonormalMatcher(); } template &lt;typename arg_type&gt; bool IsOrthonormalMatcher::gmock_Impl&lt;arg_type&gt;::MatchAndExplain( arg_type arg, ::testing::MatchResultListener* result_listener __attribute__ ((unused))) const" data-ref="_M/MATCHER">MATCHER</a>(<dfn class="decl def" id="_ZN5ceres8internal13IsOrthonormalEv" title='ceres::internal::IsOrthonormal' data-ref="_ZN5ceres8internal13IsOrthonormalEv">IsOrthonormal</dfn>, <q>""</q>) {</td></tr>
<tr><th id="182">182</th><td>  <b>if</b> (<a class="local col8 ref" href="#181" title='arg' data-ref="18arg">arg</a> == <span class="macro" title="__null" data-ref="_M/NULL">NULL</span>) {</td></tr>
<tr><th id="183">183</th><td>    *<a class="local col9 ref" href="#181" title='result_listener' data-ref="19result_listener">result_listener</a> <a class="ref" href="gmock/gmock.h.html#_ZN7testing19MatchResultListenerlsERKT_" title='testing::MatchResultListener::operator&lt;&lt;' data-ref="_ZN7testing19MatchResultListenerlsERKT_">&lt;&lt;</a> <q>"Null matrix"</q>;</td></tr>
<tr><th id="184">184</th><td>    <b>return</b> <b>false</b>;</td></tr>
<tr><th id="185">185</th><td>  }</td></tr>
<tr><th id="186">186</th><td></td></tr>
<tr><th id="187">187</th><td>  <b>for</b> (<em>int</em> <dfn class="local col0 decl" id="20c1" title='c1' data-type='int' data-ref="20c1">c1</dfn> = <var>0</var>; <a class="local col0 ref" href="#20c1" title='c1' data-ref="20c1">c1</a> &lt; <var>3</var>; <a class="local col0 ref" href="#20c1" title='c1' data-ref="20c1">c1</a>++) {</td></tr>
<tr><th id="188">188</th><td>    <b>for</b> (<em>int</em> <dfn class="local col1 decl" id="21c2" title='c2' data-type='int' data-ref="21c2">c2</dfn> = <var>0</var>; <a class="local col1 ref" href="#21c2" title='c2' data-ref="21c2">c2</a> &lt; <var>3</var>; <a class="local col1 ref" href="#21c2" title='c2' data-ref="21c2">c2</a>++) {</td></tr>
<tr><th id="189">189</th><td>      <em>double</em> <dfn class="local col2 decl" id="22v" title='v' data-type='double' data-ref="22v">v</dfn> = <var>0</var>;</td></tr>
<tr><th id="190">190</th><td>      <b>for</b> (<em>int</em> <dfn class="local col3 decl" id="23i" title='i' data-type='int' data-ref="23i">i</dfn> = <var>0</var>; <a class="local col3 ref" href="#23i" title='i' data-ref="23i">i</a> &lt; <var>3</var>; <a class="local col3 ref" href="#23i" title='i' data-ref="23i">i</a>++) {</td></tr>
<tr><th id="191">191</th><td>        <a class="local col2 ref" href="#22v" title='v' data-ref="22v">v</a> += <a class="local col8 ref" href="#181" title='arg' data-ref="18arg">arg</a>[<a class="local col3 ref" href="#23i" title='i' data-ref="23i">i</a> + <var>3</var> * <a class="local col0 ref" href="#20c1" title='c1' data-ref="20c1">c1</a>] * <a class="local col8 ref" href="#181" title='arg' data-ref="18arg">arg</a>[<a class="local col3 ref" href="#23i" title='i' data-ref="23i">i</a> + <var>3</var> * <a class="local col1 ref" href="#21c2" title='c2' data-ref="21c2">c2</a>];</td></tr>
<tr><th id="192">192</th><td>      }</td></tr>
<tr><th id="193">193</th><td>      <em>double</em> <dfn class="local col4 decl" id="24expected" title='expected' data-type='double' data-ref="24expected">expected</dfn> = (<a class="local col0 ref" href="#20c1" title='c1' data-ref="20c1">c1</a> == <a class="local col1 ref" href="#21c2" title='c2' data-ref="21c2">c2</a>) ? <var>1</var> : <var>0</var>;</td></tr>
<tr><th id="194">194</th><td>      <b>if</b> (<a class="ref" href="../../../include/x86_64-linux-gnu/bits/mathcalls.h.html#181" title='fabs' data-ref="fabs">fabs</a>(<a class="local col4 ref" href="#24expected" title='expected' data-ref="24expected">expected</a> - <a class="local col2 ref" href="#22v" title='v' data-ref="22v">v</a>) &gt; <a class="tu ref" href="#ceres::internal::kTolerance" title='ceres::internal::kTolerance' data-use='r' data-ref="ceres::internal::kTolerance">kTolerance</a>) {</td></tr>
<tr><th id="195">195</th><td>        *<a class="local col9 ref" href="#181" title='result_listener' data-ref="19result_listener">result_listener</a> <a class="ref" href="gmock/gmock.h.html#_ZN7testing19MatchResultListenerlsERKT_" title='testing::MatchResultListener::operator&lt;&lt;' data-ref="_ZN7testing19MatchResultListenerlsERKT_">&lt;&lt;</a> <q>"Columns "</q> <a class="ref" href="gmock/gmock.h.html#_ZN7testing19MatchResultListenerlsERKT_" title='testing::MatchResultListener::operator&lt;&lt;' data-ref="_ZN7testing19MatchResultListenerlsERKT_">&lt;&lt;</a> <a class="local col0 ref" href="#20c1" title='c1' data-ref="20c1">c1</a> <a class="ref" href="gmock/gmock.h.html#_ZN7testing19MatchResultListenerlsERKT_" title='testing::MatchResultListener::operator&lt;&lt;' data-ref="_ZN7testing19MatchResultListenerlsERKT_">&lt;&lt;</a> <q>" and "</q> <a class="ref" href="gmock/gmock.h.html#_ZN7testing19MatchResultListenerlsERKT_" title='testing::MatchResultListener::operator&lt;&lt;' data-ref="_ZN7testing19MatchResultListenerlsERKT_">&lt;&lt;</a> <a class="local col1 ref" href="#21c2" title='c2' data-ref="21c2">c2</a></td></tr>
<tr><th id="196">196</th><td>                         <a class="ref" href="gmock/gmock.h.html#_ZN7testing19MatchResultListenerlsERKT_" title='testing::MatchResultListener::operator&lt;&lt;' data-ref="_ZN7testing19MatchResultListenerlsERKT_">&lt;&lt;</a> <q>" should have dot product "</q> <a class="ref" href="gmock/gmock.h.html#_ZN7testing19MatchResultListenerlsERKT_" title='testing::MatchResultListener::operator&lt;&lt;' data-ref="_ZN7testing19MatchResultListenerlsERKT_">&lt;&lt;</a> <a class="local col4 ref" href="#24expected" title='expected' data-ref="24expected">expected</a></td></tr>
<tr><th id="197">197</th><td>                         <a class="ref" href="gmock/gmock.h.html#_ZN7testing19MatchResultListenerlsERKT_" title='testing::MatchResultListener::operator&lt;&lt;' data-ref="_ZN7testing19MatchResultListenerlsERKT_">&lt;&lt;</a> <q>" but have "</q> <a class="ref" href="gmock/gmock.h.html#_ZN7testing19MatchResultListenerlsERKT_" title='testing::MatchResultListener::operator&lt;&lt;' data-ref="_ZN7testing19MatchResultListenerlsERKT_">&lt;&lt;</a> <a class="local col2 ref" href="#22v" title='v' data-ref="22v">v</a>;</td></tr>
<tr><th id="198">198</th><td>        <b>return</b> <b>false</b>;</td></tr>
<tr><th id="199">199</th><td>      }</td></tr>
<tr><th id="200">200</th><td>    }</td></tr>
<tr><th id="201">201</th><td>  }</td></tr>
<tr><th id="202">202</th><td></td></tr>
<tr><th id="203">203</th><td>  <b>return</b> <b>true</b>;</td></tr>
<tr><th id="204">204</th><td>}</td></tr>
<tr><th id="205">205</th><td></td></tr>
<tr><th id="206">206</th><td><i>// Use as:</i></td></tr>
<tr><th id="207">207</th><td><i>// double matrix1[9];</i></td></tr>
<tr><th id="208">208</th><td><i>// double matrix2[9];</i></td></tr>
<tr><th id="209">209</th><td><i>// EXPECT_THAT(matrix1, IsNear3x3Matrix(matrix2));</i></td></tr>
<tr><th id="210">210</th><td><a class="macro" href="gmock/gmock.h.html#13898" title="template &lt;typename expected_type&gt; class IsNear3x3MatrixMatcherP { public: template &lt;typename arg_type&gt; class gmock_Impl : public ::testing::MatcherInterface&lt;arg_type&gt; { public: explicit gmock_Impl( expected_type gmock_p0) : expected(gmock_p0) {} virtual bool MatchAndExplain( arg_type arg, ::testing::MatchResultListener* result_listener) const; virtual void DescribeTo(::std::ostream* gmock_os) const { *gmock_os &lt;&lt; FormatDescription(false); } virtual void DescribeNegationTo(::std::ostream* gmock_os) const { *gmock_os &lt;&lt; FormatDescription(true); } expected_type expected; private: ::testing::internal::string FormatDescription(bool negation) const { const ::testing::internal::string gmock_description = (&quot;&quot;); if (!gmock_description.empty()) return gmock_description; return ::testing::internal::FormatMatcherDescription( negation, &quot;IsNear3x3Matrix&quot;, ::testing::internal::UniversalTersePrintTupleFieldsToStrings( ::testing::tuple&lt; expected_type&gt;(expected))); } void operator=(gmock_Impl const &amp;); }; template &lt;typename arg_type&gt; operator ::testing::Matcher&lt;arg_type&gt;() const { return ::testing::Matcher&lt;arg_type&gt;( new gmock_Impl&lt;arg_type&gt;(expected)); } explicit IsNear3x3MatrixMatcherP( expected_type gmock_p0) : expected(gmock_p0) { } expected_type expected; private: void operator=(IsNear3x3MatrixMatcherP const &amp;); }; template &lt;typename expected_type&gt; inline IsNear3x3MatrixMatcherP&lt; expected_type&gt; IsNear3x3Matrix( expected_type expected) { return IsNear3x3MatrixMatcherP&lt; expected_type&gt;(expected); } template &lt;typename expected_type&gt; template &lt;typename arg_type&gt; bool IsNear3x3MatrixMatcherP&lt; expected_type&gt;::gmock_Impl&lt;arg_type&gt;::MatchAndExplain( arg_type arg, ::testing::MatchResultListener* result_listener __attribute__ ((unused))) const" data-ref="_M/MATCHER_P">MATCHER_P</a>(<dfn class="decl def" id="_ZN5ceres8internal15IsNear3x3MatrixET_" title='ceres::internal::IsNear3x3Matrix' data-ref="_ZN5ceres8internal15IsNear3x3MatrixET_">IsNear3x3Matrix</dfn>, <a class="member" href="#210" title='ceres::internal::IsNear3x3MatrixMatcherP::gmock_Impl::expected' data-ref="ceres::internal::IsNear3x3MatrixMatcherP::gmock_Impl::expected"><dfn class="decl" id="ceres::internal::IsNear3x3MatrixMatcherP::gmock_Impl::expected" title='ceres::internal::IsNear3x3MatrixMatcherP::gmock_Impl::expected' data-ref="ceres::internal::IsNear3x3MatrixMatcherP::gmock_Impl::expected"><a class="member" href="#210" title='ceres::internal::IsNear3x3MatrixMatcherP::expected' data-ref="ceres::internal::IsNear3x3MatrixMatcherP::expected"><a class="member" href="#210" title='ceres::internal::IsNear3x3MatrixMatcherP::expected' data-ref="ceres::internal::IsNear3x3MatrixMatcherP::expected"><dfn class="decl" id="ceres::internal::IsNear3x3MatrixMatcherP::expected" title='ceres::internal::IsNear3x3MatrixMatcherP::expected' data-ref="ceres::internal::IsNear3x3MatrixMatcherP::expected"><dfn class="local col5 decl" id="25expected" title='expected' data-type='expected_type' data-ref="25expected"><a class="local col5 ref" href="#210" title='expected' data-ref="25expected">expected</a></dfn></dfn></a></a></dfn></a>, <q>""</q>) {</td></tr>
<tr><th id="211">211</th><td>  <b>if</b> (<a class="local col6 ref" href="#210" title='arg' data-ref="26arg">arg</a> == <span class="macro" title="__null" data-ref="_M/NULL">NULL</span>) {</td></tr>
<tr><th id="212">212</th><td>    *<a class="local col7 ref" href="#210" title='result_listener' data-ref="27result_listener">result_listener</a> <a class="ref" href="gmock/gmock.h.html#_ZN7testing19MatchResultListenerlsERKT_" title='testing::MatchResultListener::operator&lt;&lt;' data-ref="_ZN7testing19MatchResultListenerlsERKT_">&lt;&lt;</a> <q>"Null matrix"</q>;</td></tr>
<tr><th id="213">213</th><td>    <b>return</b> <b>false</b>;</td></tr>
<tr><th id="214">214</th><td>  }</td></tr>
<tr><th id="215">215</th><td></td></tr>
<tr><th id="216">216</th><td>  <b>for</b> (<em>int</em> <dfn class="local col8 decl" id="28i" title='i' data-type='int' data-ref="28i">i</dfn> = <var>0</var>; <a class="local col8 ref" href="#28i" title='i' data-ref="28i">i</a> &lt; <var>9</var>; <a class="local col8 ref" href="#28i" title='i' data-ref="28i">i</a>++) {</td></tr>
<tr><th id="217">217</th><td>    <b>if</b> (fabs(<a class="local col6 ref" href="#210" title='arg' data-ref="26arg">arg</a>[<a class="local col8 ref" href="#28i" title='i' data-ref="28i">i</a>] - <a class="member" href="#210" title='ceres::internal::IsNear3x3MatrixMatcherP::gmock_Impl::expected' data-ref="ceres::internal::IsNear3x3MatrixMatcherP::gmock_Impl::expected">expected</a>[<a class="local col8 ref" href="#28i" title='i' data-ref="28i">i</a>]) &gt; <a class="tu ref" href="#ceres::internal::kTolerance" title='ceres::internal::kTolerance' data-ref="ceres::internal::kTolerance">kTolerance</a>) {</td></tr>
<tr><th id="218">218</th><td>      *<a class="local col7 ref" href="#210" title='result_listener' data-ref="27result_listener">result_listener</a> <a class="ref" href="gmock/gmock.h.html#_ZN7testing19MatchResultListenerlsERKT_" title='testing::MatchResultListener::operator&lt;&lt;' data-ref="_ZN7testing19MatchResultListenerlsERKT_">&lt;&lt;</a> <q>"component "</q> <a class="ref" href="gmock/gmock.h.html#_ZN7testing19MatchResultListenerlsERKT_" title='testing::MatchResultListener::operator&lt;&lt;' data-ref="_ZN7testing19MatchResultListenerlsERKT_">&lt;&lt;</a> <a class="local col8 ref" href="#28i" title='i' data-ref="28i">i</a> <a class="ref" href="gmock/gmock.h.html#_ZN7testing19MatchResultListenerlsERKT_" title='testing::MatchResultListener::operator&lt;&lt;' data-ref="_ZN7testing19MatchResultListenerlsERKT_">&lt;&lt;</a> <q>" should be "</q> &lt;&lt; <a class="member" href="#210" title='ceres::internal::IsNear3x3MatrixMatcherP::gmock_Impl::expected' data-ref="ceres::internal::IsNear3x3MatrixMatcherP::gmock_Impl::expected">expected</a>[<a class="local col8 ref" href="#28i" title='i' data-ref="28i">i</a>];</td></tr>
<tr><th id="219">219</th><td>      <b>return</b> <b>false</b>;</td></tr>
<tr><th id="220">220</th><td>    }</td></tr>
<tr><th id="221">221</th><td>  }</td></tr>
<tr><th id="222">222</th><td></td></tr>
<tr><th id="223">223</th><td>  <b>return</b> <b>true</b>;</td></tr>
<tr><th id="224">224</th><td>}</td></tr>
<tr><th id="225">225</th><td></td></tr>
<tr><th id="226">226</th><td><i>// Transforms a zero axis/angle to a quaternion.</i></td></tr>
<tr><th id="227">227</th><td><a class="macro" href="gtest/gtest.h.html#21153" title="class Rotation_ZeroAngleAxisToQuaternion_Test : public ::testing::Test { public: Rotation_ZeroAngleAxisToQuaternion_Test() {} private: virtual void TestBody(); static ::testing::TestInfo* const test_info_ __attribute__ ((unused)); Rotation_ZeroAngleAxisToQuaternion_Test(Rotation_ZeroAngleAxisToQuaternion_Test const &amp;); void operator=(Rotation_ZeroAngleAxisToQuaternion_Test const &amp;);};::testing::TestInfo* const Rotation_ZeroAngleAxisToQuaternion_Test ::test_info_ = ::testing::internal::MakeAndRegisterTestInfo( &quot;Rotation&quot;, &quot;ZeroAngleAxisToQuaternion&quot;, __null, __null, ::testing::internal::CodeLocation(&quot;/home/yzf/code/ceres-solver/internal/ceres/rotation_test.cc&quot;, 227), (::testing::internal::GetTestTypeId()), ::testing::Test::SetUpTestCase, ::testing::Test::TearDownTestCase, new ::testing::internal::TestFactoryImpl&lt; Rotation_ZeroAngleAxisToQuaternion_Test&gt;);void Rotation_ZeroAngleAxisToQuaternion_Test::TestBody()" data-ref="_M/TEST">TEST</a>(Rotation, ZeroAngleAxisToQuaternion) {</td></tr>
<tr><th id="228">228</th><td>  <em>double</em> <dfn class="local col9 decl" id="29axis_angle" title='axis_angle' data-type='double [3]' data-ref="29axis_angle">axis_angle</dfn>[<var>3</var>] = { <var>0</var>, <var>0</var>, <var>0</var> };</td></tr>
<tr><th id="229">229</th><td>  <em>double</em> <dfn class="local col0 decl" id="30quaternion" title='quaternion' data-type='double [4]' data-ref="30quaternion">quaternion</dfn>[<var>4</var>];</td></tr>
<tr><th id="230">230</th><td>  <em>double</em> <dfn class="local col1 decl" id="31expected" title='expected' data-type='double [4]' data-ref="31expected">expected</dfn>[<var>4</var>] = { <var>1</var>, <var>0</var>, <var>0</var>, <var>0</var> };</td></tr>
<tr><th id="231">231</th><td>  <a class="ref" href="../../include/ceres/rotation.h.html#_ZN5ceres21AngleAxisToQuaternionEPKT_PS0_" title='ceres::AngleAxisToQuaternion' data-ref="_ZN5ceres21AngleAxisToQuaternionEPKT_PS0_">AngleAxisToQuaternion</a>(<a class="local col9 ref" href="#29axis_angle" title='axis_angle' data-ref="29axis_angle">axis_angle</a>, <a class="local col0 ref" href="#30quaternion" title='quaternion' data-ref="30quaternion">quaternion</a>);</td></tr>
<tr><th id="232">232</th><td>  <a class="macro" href="gmock/gmock.h.html#9209" title="switch (0) case 0: default: if (const ::testing::AssertionResult gtest_ar = (::testing::internal::MakePredicateFormatterFromMatcher(IsNormalizedQuaternion())(&quot;quaternion&quot;, quaternion))) ; else ::testing::internal::AssertHelper(::testing::TestPartResult::kNonFatalFailure, &quot;/home/yzf/code/ceres-solver/internal/ceres/rotation_test.cc&quot;, 232, gtest_ar.failure_message()) = ::testing::Message()" data-ref="_M/EXPECT_THAT">EXPECT_THAT</a>(<a class="local col0 ref" href="#30quaternion" title='quaternion' data-ref="30quaternion">quaternion</a>, <a class="ref" href="#71" title='ceres::internal::IsNormalizedQuaternion' data-ref="_ZN5ceres8internal22IsNormalizedQuaternionEv">IsNormalizedQuaternion</a>());</td></tr>
<tr><th id="233">233</th><td>  <a class="macro" href="gmock/gmock.h.html#9209" title="switch (0) case 0: default: if (const ::testing::AssertionResult gtest_ar = (::testing::internal::MakePredicateFormatterFromMatcher(IsNearQuaternion(expected))(&quot;quaternion&quot;, quaternion))) ; else ::testing::internal::AssertHelper(::testing::TestPartResult::kNonFatalFailure, &quot;/home/yzf/code/ceres-solver/internal/ceres/rotation_test.cc&quot;, 233, gtest_ar.failure_message()) = ::testing::Message()" data-ref="_M/EXPECT_THAT">EXPECT_THAT</a>(<a class="local col0 ref" href="#30quaternion" title='quaternion' data-ref="30quaternion">quaternion</a>, <a class="ref" href="#91" title='ceres::internal::IsNearQuaternion' data-ref="_ZN5ceres8internal16IsNearQuaternionET_">IsNearQuaternion</a>(<a class="local col1 ref" href="#31expected" title='expected' data-ref="31expected">expected</a>));</td></tr>
<tr><th id="234">234</th><td>}</td></tr>
<tr><th id="235">235</th><td></td></tr>
<tr><th id="236">236</th><td><i>// Test that exact conversion works for small angles.</i></td></tr>
<tr><th id="237">237</th><td><a class="macro" href="gtest/gtest.h.html#21153" title="class Rotation_SmallAngleAxisToQuaternion_Test : public ::testing::Test { public: Rotation_SmallAngleAxisToQuaternion_Test() {} private: virtual void TestBody(); static ::testing::TestInfo* const test_info_ __attribute__ ((unused)); Rotation_SmallAngleAxisToQuaternion_Test(Rotation_SmallAngleAxisToQuaternion_Test const &amp;); void operator=(Rotation_SmallAngleAxisToQuaternion_Test const &amp;);};::testing::TestInfo* const Rotation_SmallAngleAxisToQuaternion_Test ::test_info_ = ::testing::internal::MakeAndRegisterTestInfo( &quot;Rotation&quot;, &quot;SmallAngleAxisToQuaternion&quot;, __null, __null, ::testing::internal::CodeLocation(&quot;/home/yzf/code/ceres-solver/internal/ceres/rotation_test.cc&quot;, 237), (::testing::internal::GetTestTypeId()), ::testing::Test::SetUpTestCase, ::testing::Test::TearDownTestCase, new ::testing::internal::TestFactoryImpl&lt; Rotation_SmallAngleAxisToQuaternion_Test&gt;);void Rotation_SmallAngleAxisToQuaternion_Test::TestBody()" data-ref="_M/TEST">TEST</a>(Rotation, SmallAngleAxisToQuaternion) {</td></tr>
<tr><th id="238">238</th><td>  <i>// Small, finite value to test.</i></td></tr>
<tr><th id="239">239</th><td>  <em>double</em> <dfn class="local col2 decl" id="32theta" title='theta' data-type='double' data-ref="32theta">theta</dfn> = <var>1.0e-2</var>;</td></tr>
<tr><th id="240">240</th><td>  <em>double</em> <dfn class="local col3 decl" id="33axis_angle" title='axis_angle' data-type='double [3]' data-ref="33axis_angle">axis_angle</dfn>[<var>3</var>] = { <a class="local col2 ref" href="#32theta" title='theta' data-ref="32theta">theta</a>, <var>0</var>, <var>0</var> };</td></tr>
<tr><th id="241">241</th><td>  <em>double</em> <dfn class="local col4 decl" id="34quaternion" title='quaternion' data-type='double [4]' data-ref="34quaternion">quaternion</dfn>[<var>4</var>];</td></tr>
<tr><th id="242">242</th><td>  <em>double</em> <dfn class="local col5 decl" id="35expected" title='expected' data-type='double [4]' data-ref="35expected">expected</dfn>[<var>4</var>] = { <a class="ref" href="../../include/ceres/jet.h.html#_ZN5ceres3cosEd" title='ceres::cos' data-ref="_ZN5ceres3cosEd">cos</a>(<a class="local col2 ref" href="#32theta" title='theta' data-ref="32theta">theta</a>/<var>2</var>), <a class="ref" href="../../include/ceres/jet.h.html#_ZN5ceres3sinEd" title='ceres::sin' data-ref="_ZN5ceres3sinEd">sin</a>(<a class="local col2 ref" href="#32theta" title='theta' data-ref="32theta">theta</a>/<var>2.0</var>), <var>0</var>, <var>0</var> };</td></tr>
<tr><th id="243">243</th><td>  <a class="ref" href="../../include/ceres/rotation.h.html#_ZN5ceres21AngleAxisToQuaternionEPKT_PS0_" title='ceres::AngleAxisToQuaternion' data-ref="_ZN5ceres21AngleAxisToQuaternionEPKT_PS0_">AngleAxisToQuaternion</a>(<a class="local col3 ref" href="#33axis_angle" title='axis_angle' data-ref="33axis_angle">axis_angle</a>, <a class="local col4 ref" href="#34quaternion" title='quaternion' data-ref="34quaternion">quaternion</a>);</td></tr>
<tr><th id="244">244</th><td>  <a class="macro" href="gmock/gmock.h.html#9209" title="switch (0) case 0: default: if (const ::testing::AssertionResult gtest_ar = (::testing::internal::MakePredicateFormatterFromMatcher(IsNormalizedQuaternion())(&quot;quaternion&quot;, quaternion))) ; else ::testing::internal::AssertHelper(::testing::TestPartResult::kNonFatalFailure, &quot;/home/yzf/code/ceres-solver/internal/ceres/rotation_test.cc&quot;, 244, gtest_ar.failure_message()) = ::testing::Message()" data-ref="_M/EXPECT_THAT">EXPECT_THAT</a>(<a class="local col4 ref" href="#34quaternion" title='quaternion' data-ref="34quaternion">quaternion</a>, <a class="ref" href="#71" title='ceres::internal::IsNormalizedQuaternion' data-ref="_ZN5ceres8internal22IsNormalizedQuaternionEv">IsNormalizedQuaternion</a>());</td></tr>
<tr><th id="245">245</th><td>  <a class="macro" href="gmock/gmock.h.html#9209" title="switch (0) case 0: default: if (const ::testing::AssertionResult gtest_ar = (::testing::internal::MakePredicateFormatterFromMatcher(IsNearQuaternion(expected))(&quot;quaternion&quot;, quaternion))) ; else ::testing::internal::AssertHelper(::testing::TestPartResult::kNonFatalFailure, &quot;/home/yzf/code/ceres-solver/internal/ceres/rotation_test.cc&quot;, 245, gtest_ar.failure_message()) = ::testing::Message()" data-ref="_M/EXPECT_THAT">EXPECT_THAT</a>(<a class="local col4 ref" href="#34quaternion" title='quaternion' data-ref="34quaternion">quaternion</a>, <a class="ref" href="#91" title='ceres::internal::IsNearQuaternion' data-ref="_ZN5ceres8internal16IsNearQuaternionET_">IsNearQuaternion</a>(<a class="local col5 ref" href="#35expected" title='expected' data-ref="35expected">expected</a>));</td></tr>
<tr><th id="246">246</th><td>}</td></tr>
<tr><th id="247">247</th><td></td></tr>
<tr><th id="248">248</th><td><i>// Test that approximate conversion works for very small angles.</i></td></tr>
<tr><th id="249">249</th><td><a class="macro" href="gtest/gtest.h.html#21153" title="class Rotation_TinyAngleAxisToQuaternion_Test : public ::testing::Test { public: Rotation_TinyAngleAxisToQuaternion_Test() {} private: virtual void TestBody(); static ::testing::TestInfo* const test_info_ __attribute__ ((unused)); Rotation_TinyAngleAxisToQuaternion_Test(Rotation_TinyAngleAxisToQuaternion_Test const &amp;); void operator=(Rotation_TinyAngleAxisToQuaternion_Test const &amp;);};::testing::TestInfo* const Rotation_TinyAngleAxisToQuaternion_Test ::test_info_ = ::testing::internal::MakeAndRegisterTestInfo( &quot;Rotation&quot;, &quot;TinyAngleAxisToQuaternion&quot;, __null, __null, ::testing::internal::CodeLocation(&quot;/home/yzf/code/ceres-solver/internal/ceres/rotation_test.cc&quot;, 249), (::testing::internal::GetTestTypeId()), ::testing::Test::SetUpTestCase, ::testing::Test::TearDownTestCase, new ::testing::internal::TestFactoryImpl&lt; Rotation_TinyAngleAxisToQuaternion_Test&gt;);void Rotation_TinyAngleAxisToQuaternion_Test::TestBody()" data-ref="_M/TEST">TEST</a>(Rotation, TinyAngleAxisToQuaternion) {</td></tr>
<tr><th id="250">250</th><td>  <i>// Very small value that could potentially cause underflow.</i></td></tr>
<tr><th id="251">251</th><td>  <em>double</em> <dfn class="local col6 decl" id="36theta" title='theta' data-type='double' data-ref="36theta">theta</dfn> = <a class="ref" href="../../include/ceres/jet.h.html#_ZN5ceres3powEdd" title='ceres::pow' data-ref="_ZN5ceres3powEdd">pow</a>(<a class="type" href="../../../include/c++/4.8/limits.html#std::numeric_limits" title='std::numeric_limits' data-ref="std::numeric_limits">numeric_limits</a>&lt;<em>double</em>&gt;::<a class="ref" href="../../../include/c++/4.8/limits.html#_ZNSt14numeric_limitsIdE3minEv" title='std::numeric_limits&lt;double&gt;::min' data-ref="_ZNSt14numeric_limitsIdE3minEv">min</a>(), <var>0.75</var>);</td></tr>
<tr><th id="252">252</th><td>  <em>double</em> <dfn class="local col7 decl" id="37axis_angle" title='axis_angle' data-type='double [3]' data-ref="37axis_angle">axis_angle</dfn>[<var>3</var>] = { <a class="local col6 ref" href="#36theta" title='theta' data-ref="36theta">theta</a>, <var>0</var>, <var>0</var> };</td></tr>
<tr><th id="253">253</th><td>  <em>double</em> <dfn class="local col8 decl" id="38quaternion" title='quaternion' data-type='double [4]' data-ref="38quaternion">quaternion</dfn>[<var>4</var>];</td></tr>
<tr><th id="254">254</th><td>  <em>double</em> <dfn class="local col9 decl" id="39expected" title='expected' data-type='double [4]' data-ref="39expected">expected</dfn>[<var>4</var>] = { <a class="ref" href="../../include/ceres/jet.h.html#_ZN5ceres3cosEd" title='ceres::cos' data-ref="_ZN5ceres3cosEd">cos</a>(<a class="local col6 ref" href="#36theta" title='theta' data-ref="36theta">theta</a>/<var>2</var>), <a class="ref" href="../../include/ceres/jet.h.html#_ZN5ceres3sinEd" title='ceres::sin' data-ref="_ZN5ceres3sinEd">sin</a>(<a class="local col6 ref" href="#36theta" title='theta' data-ref="36theta">theta</a>/<var>2.0</var>), <var>0</var>, <var>0</var> };</td></tr>
<tr><th id="255">255</th><td>  <a class="ref" href="../../include/ceres/rotation.h.html#_ZN5ceres21AngleAxisToQuaternionEPKT_PS0_" title='ceres::AngleAxisToQuaternion' data-ref="_ZN5ceres21AngleAxisToQuaternionEPKT_PS0_">AngleAxisToQuaternion</a>(<a class="local col7 ref" href="#37axis_angle" title='axis_angle' data-ref="37axis_angle">axis_angle</a>, <a class="local col8 ref" href="#38quaternion" title='quaternion' data-ref="38quaternion">quaternion</a>);</td></tr>
<tr><th id="256">256</th><td>  <a class="macro" href="gmock/gmock.h.html#9209" title="switch (0) case 0: default: if (const ::testing::AssertionResult gtest_ar = (::testing::internal::MakePredicateFormatterFromMatcher(IsNormalizedQuaternion())(&quot;quaternion&quot;, quaternion))) ; else ::testing::internal::AssertHelper(::testing::TestPartResult::kNonFatalFailure, &quot;/home/yzf/code/ceres-solver/internal/ceres/rotation_test.cc&quot;, 256, gtest_ar.failure_message()) = ::testing::Message()" data-ref="_M/EXPECT_THAT">EXPECT_THAT</a>(<a class="local col8 ref" href="#38quaternion" title='quaternion' data-ref="38quaternion">quaternion</a>, <a class="ref" href="#71" title='ceres::internal::IsNormalizedQuaternion' data-ref="_ZN5ceres8internal22IsNormalizedQuaternionEv">IsNormalizedQuaternion</a>());</td></tr>
<tr><th id="257">257</th><td>  <a class="macro" href="gmock/gmock.h.html#9209" title="switch (0) case 0: default: if (const ::testing::AssertionResult gtest_ar = (::testing::internal::MakePredicateFormatterFromMatcher(IsNearQuaternion(expected))(&quot;quaternion&quot;, quaternion))) ; else ::testing::internal::AssertHelper(::testing::TestPartResult::kNonFatalFailure, &quot;/home/yzf/code/ceres-solver/internal/ceres/rotation_test.cc&quot;, 257, gtest_ar.failure_message()) = ::testing::Message()" data-ref="_M/EXPECT_THAT">EXPECT_THAT</a>(<a class="local col8 ref" href="#38quaternion" title='quaternion' data-ref="38quaternion">quaternion</a>, <a class="ref" href="#91" title='ceres::internal::IsNearQuaternion' data-ref="_ZN5ceres8internal16IsNearQuaternionET_">IsNearQuaternion</a>(<a class="local col9 ref" href="#39expected" title='expected' data-ref="39expected">expected</a>));</td></tr>
<tr><th id="258">258</th><td>}</td></tr>
<tr><th id="259">259</th><td></td></tr>
<tr><th id="260">260</th><td><i>// Transforms a rotation by pi/2 around X to a quaternion.</i></td></tr>
<tr><th id="261">261</th><td><a class="macro" href="gtest/gtest.h.html#21153" title="class Rotation_XRotationToQuaternion_Test : public ::testing::Test { public: Rotation_XRotationToQuaternion_Test() {} private: virtual void TestBody(); static ::testing::TestInfo* const test_info_ __attribute__ ((unused)); Rotation_XRotationToQuaternion_Test(Rotation_XRotationToQuaternion_Test const &amp;); void operator=(Rotation_XRotationToQuaternion_Test const &amp;);};::testing::TestInfo* const Rotation_XRotationToQuaternion_Test ::test_info_ = ::testing::internal::MakeAndRegisterTestInfo( &quot;Rotation&quot;, &quot;XRotationToQuaternion&quot;, __null, __null, ::testing::internal::CodeLocation(&quot;/home/yzf/code/ceres-solver/internal/ceres/rotation_test.cc&quot;, 261), (::testing::internal::GetTestTypeId()), ::testing::Test::SetUpTestCase, ::testing::Test::TearDownTestCase, new ::testing::internal::TestFactoryImpl&lt; Rotation_XRotationToQuaternion_Test&gt;);void Rotation_XRotationToQuaternion_Test::TestBody()" data-ref="_M/TEST">TEST</a>(Rotation, XRotationToQuaternion) {</td></tr>
<tr><th id="262">262</th><td>  <em>double</em> <dfn class="local col0 decl" id="40axis_angle" title='axis_angle' data-type='double [3]' data-ref="40axis_angle">axis_angle</dfn>[<var>3</var>] = { <a class="tu ref" href="#ceres::internal::kPi" title='ceres::internal::kPi' data-use='r' data-ref="ceres::internal::kPi">kPi</a> / <var>2</var>, <var>0</var>, <var>0</var> };</td></tr>
<tr><th id="263">263</th><td>  <em>double</em> <dfn class="local col1 decl" id="41quaternion" title='quaternion' data-type='double [4]' data-ref="41quaternion">quaternion</dfn>[<var>4</var>];</td></tr>
<tr><th id="264">264</th><td>  <em>double</em> <dfn class="local col2 decl" id="42expected" title='expected' data-type='double [4]' data-ref="42expected">expected</dfn>[<var>4</var>] = { <a class="tu ref" href="#ceres::internal::kHalfSqrt2" title='ceres::internal::kHalfSqrt2' data-use='r' data-ref="ceres::internal::kHalfSqrt2">kHalfSqrt2</a>, <a class="tu ref" href="#ceres::internal::kHalfSqrt2" title='ceres::internal::kHalfSqrt2' data-use='r' data-ref="ceres::internal::kHalfSqrt2">kHalfSqrt2</a>, <var>0</var>, <var>0</var> };</td></tr>
<tr><th id="265">265</th><td>  <a class="ref" href="../../include/ceres/rotation.h.html#_ZN5ceres21AngleAxisToQuaternionEPKT_PS0_" title='ceres::AngleAxisToQuaternion' data-ref="_ZN5ceres21AngleAxisToQuaternionEPKT_PS0_">AngleAxisToQuaternion</a>(<a class="local col0 ref" href="#40axis_angle" title='axis_angle' data-ref="40axis_angle">axis_angle</a>, <a class="local col1 ref" href="#41quaternion" title='quaternion' data-ref="41quaternion">quaternion</a>);</td></tr>
<tr><th id="266">266</th><td>  <a class="macro" href="gmock/gmock.h.html#9209" title="switch (0) case 0: default: if (const ::testing::AssertionResult gtest_ar = (::testing::internal::MakePredicateFormatterFromMatcher(IsNormalizedQuaternion())(&quot;quaternion&quot;, quaternion))) ; else ::testing::internal::AssertHelper(::testing::TestPartResult::kNonFatalFailure, &quot;/home/yzf/code/ceres-solver/internal/ceres/rotation_test.cc&quot;, 266, gtest_ar.failure_message()) = ::testing::Message()" data-ref="_M/EXPECT_THAT">EXPECT_THAT</a>(<a class="local col1 ref" href="#41quaternion" title='quaternion' data-ref="41quaternion">quaternion</a>, <a class="ref" href="#71" title='ceres::internal::IsNormalizedQuaternion' data-ref="_ZN5ceres8internal22IsNormalizedQuaternionEv">IsNormalizedQuaternion</a>());</td></tr>
<tr><th id="267">267</th><td>  <a class="macro" href="gmock/gmock.h.html#9209" title="switch (0) case 0: default: if (const ::testing::AssertionResult gtest_ar = (::testing::internal::MakePredicateFormatterFromMatcher(IsNearQuaternion(expected))(&quot;quaternion&quot;, quaternion))) ; else ::testing::internal::AssertHelper(::testing::TestPartResult::kNonFatalFailure, &quot;/home/yzf/code/ceres-solver/internal/ceres/rotation_test.cc&quot;, 267, gtest_ar.failure_message()) = ::testing::Message()" data-ref="_M/EXPECT_THAT">EXPECT_THAT</a>(<a class="local col1 ref" href="#41quaternion" title='quaternion' data-ref="41quaternion">quaternion</a>, <a class="ref" href="#91" title='ceres::internal::IsNearQuaternion' data-ref="_ZN5ceres8internal16IsNearQuaternionET_">IsNearQuaternion</a>(<a class="local col2 ref" href="#42expected" title='expected' data-ref="42expected">expected</a>));</td></tr>
<tr><th id="268">268</th><td>}</td></tr>
<tr><th id="269">269</th><td></td></tr>
<tr><th id="270">270</th><td><i>// Transforms a unit quaternion to an axis angle.</i></td></tr>
<tr><th id="271">271</th><td><a class="macro" href="gtest/gtest.h.html#21153" title="class Rotation_UnitQuaternionToAngleAxis_Test : public ::testing::Test { public: Rotation_UnitQuaternionToAngleAxis_Test() {} private: virtual void TestBody(); static ::testing::TestInfo* const test_info_ __attribute__ ((unused)); Rotation_UnitQuaternionToAngleAxis_Test(Rotation_UnitQuaternionToAngleAxis_Test const &amp;); void operator=(Rotation_UnitQuaternionToAngleAxis_Test const &amp;);};::testing::TestInfo* const Rotation_UnitQuaternionToAngleAxis_Test ::test_info_ = ::testing::internal::MakeAndRegisterTestInfo( &quot;Rotation&quot;, &quot;UnitQuaternionToAngleAxis&quot;, __null, __null, ::testing::internal::CodeLocation(&quot;/home/yzf/code/ceres-solver/internal/ceres/rotation_test.cc&quot;, 271), (::testing::internal::GetTestTypeId()), ::testing::Test::SetUpTestCase, ::testing::Test::TearDownTestCase, new ::testing::internal::TestFactoryImpl&lt; Rotation_UnitQuaternionToAngleAxis_Test&gt;);void Rotation_UnitQuaternionToAngleAxis_Test::TestBody()" data-ref="_M/TEST">TEST</a>(Rotation, UnitQuaternionToAngleAxis) {</td></tr>
<tr><th id="272">272</th><td>  <em>double</em> <dfn class="local col3 decl" id="43quaternion" title='quaternion' data-type='double [4]' data-ref="43quaternion">quaternion</dfn>[<var>4</var>] = { <var>1</var>, <var>0</var>, <var>0</var>, <var>0</var> };</td></tr>
<tr><th id="273">273</th><td>  <em>double</em> <dfn class="local col4 decl" id="44axis_angle" title='axis_angle' data-type='double [3]' data-ref="44axis_angle">axis_angle</dfn>[<var>3</var>];</td></tr>
<tr><th id="274">274</th><td>  <em>double</em> <dfn class="local col5 decl" id="45expected" title='expected' data-type='double [3]' data-ref="45expected">expected</dfn>[<var>3</var>] = { <var>0</var>, <var>0</var>, <var>0</var> };</td></tr>
<tr><th id="275">275</th><td>  <a class="ref" href="../../include/ceres/rotation.h.html#_ZN5ceres21QuaternionToAngleAxisEPKT_PS0_" title='ceres::QuaternionToAngleAxis' data-ref="_ZN5ceres21QuaternionToAngleAxisEPKT_PS0_">QuaternionToAngleAxis</a>(<a class="local col3 ref" href="#43quaternion" title='quaternion' data-ref="43quaternion">quaternion</a>, <a class="local col4 ref" href="#44axis_angle" title='axis_angle' data-ref="44axis_angle">axis_angle</a>);</td></tr>
<tr><th id="276">276</th><td>  <a class="macro" href="gmock/gmock.h.html#9209" title="switch (0) case 0: default: if (const ::testing::AssertionResult gtest_ar = (::testing::internal::MakePredicateFormatterFromMatcher(IsNearAngleAxis(expected))(&quot;axis_angle&quot;, axis_angle))) ; else ::testing::internal::AssertHelper(::testing::TestPartResult::kNonFatalFailure, &quot;/home/yzf/code/ceres-solver/internal/ceres/rotation_test.cc&quot;, 276, gtest_ar.failure_message()) = ::testing::Message()" data-ref="_M/EXPECT_THAT">EXPECT_THAT</a>(<a class="local col4 ref" href="#44axis_angle" title='axis_angle' data-ref="44axis_angle">axis_angle</a>, <a class="ref" href="#140" title='ceres::internal::IsNearAngleAxis' data-ref="_ZN5ceres8internal15IsNearAngleAxisET_">IsNearAngleAxis</a>(<a class="local col5 ref" href="#45expected" title='expected' data-ref="45expected">expected</a>));</td></tr>
<tr><th id="277">277</th><td>}</td></tr>
<tr><th id="278">278</th><td></td></tr>
<tr><th id="279">279</th><td><i>// Transforms a quaternion that rotates by pi about the Y axis to an axis angle.</i></td></tr>
<tr><th id="280">280</th><td><a class="macro" href="gtest/gtest.h.html#21153" title="class Rotation_YRotationQuaternionToAngleAxis_Test : public ::testing::Test { public: Rotation_YRotationQuaternionToAngleAxis_Test() {} private: virtual void TestBody(); static ::testing::TestInfo* const test_info_ __attribute__ ((unused)); Rotation_YRotationQuaternionToAngleAxis_Test(Rotation_YRotationQuaternionToAngleAxis_Test const &amp;); void operator=(Rotation_YRotationQuaternionToAngleAxis_Test const &amp;);};::testing::TestInfo* const Rotation_YRotationQuaternionToAngleAxis_Test ::test_info_ = ::testing::internal::MakeAndRegisterTestInfo( &quot;Rotation&quot;, &quot;YRotationQuaternionToAngleAxis&quot;, __null, __null, ::testing::internal::CodeLocation(&quot;/home/yzf/code/ceres-solver/internal/ceres/rotation_test.cc&quot;, 280), (::testing::internal::GetTestTypeId()), ::testing::Test::SetUpTestCase, ::testing::Test::TearDownTestCase, new ::testing::internal::TestFactoryImpl&lt; Rotation_YRotationQuaternionToAngleAxis_Test&gt;);void Rotation_YRotationQuaternionToAngleAxis_Test::TestBody()" data-ref="_M/TEST">TEST</a>(Rotation, YRotationQuaternionToAngleAxis) {</td></tr>
<tr><th id="281">281</th><td>  <em>double</em> <dfn class="local col6 decl" id="46quaternion" title='quaternion' data-type='double [4]' data-ref="46quaternion">quaternion</dfn>[<var>4</var>] = { <var>0</var>, <var>0</var>, <var>1</var>, <var>0</var> };</td></tr>
<tr><th id="282">282</th><td>  <em>double</em> <dfn class="local col7 decl" id="47axis_angle" title='axis_angle' data-type='double [3]' data-ref="47axis_angle">axis_angle</dfn>[<var>3</var>];</td></tr>
<tr><th id="283">283</th><td>  <em>double</em> <dfn class="local col8 decl" id="48expected" title='expected' data-type='double [3]' data-ref="48expected">expected</dfn>[<var>3</var>] = { <var>0</var>, <a class="tu ref" href="#ceres::internal::kPi" title='ceres::internal::kPi' data-use='r' data-ref="ceres::internal::kPi">kPi</a>, <var>0</var> };</td></tr>
<tr><th id="284">284</th><td>  <a class="ref" href="../../include/ceres/rotation.h.html#_ZN5ceres21QuaternionToAngleAxisEPKT_PS0_" title='ceres::QuaternionToAngleAxis' data-ref="_ZN5ceres21QuaternionToAngleAxisEPKT_PS0_">QuaternionToAngleAxis</a>(<a class="local col6 ref" href="#46quaternion" title='quaternion' data-ref="46quaternion">quaternion</a>, <a class="local col7 ref" href="#47axis_angle" title='axis_angle' data-ref="47axis_angle">axis_angle</a>);</td></tr>
<tr><th id="285">285</th><td>  <a class="macro" href="gmock/gmock.h.html#9209" title="switch (0) case 0: default: if (const ::testing::AssertionResult gtest_ar = (::testing::internal::MakePredicateFormatterFromMatcher(IsNearAngleAxis(expected))(&quot;axis_angle&quot;, axis_angle))) ; else ::testing::internal::AssertHelper(::testing::TestPartResult::kNonFatalFailure, &quot;/home/yzf/code/ceres-solver/internal/ceres/rotation_test.cc&quot;, 285, gtest_ar.failure_message()) = ::testing::Message()" data-ref="_M/EXPECT_THAT">EXPECT_THAT</a>(<a class="local col7 ref" href="#47axis_angle" title='axis_angle' data-ref="47axis_angle">axis_angle</a>, <a class="ref" href="#140" title='ceres::internal::IsNearAngleAxis' data-ref="_ZN5ceres8internal15IsNearAngleAxisET_">IsNearAngleAxis</a>(<a class="local col8 ref" href="#48expected" title='expected' data-ref="48expected">expected</a>));</td></tr>
<tr><th id="286">286</th><td>}</td></tr>
<tr><th id="287">287</th><td></td></tr>
<tr><th id="288">288</th><td><i>// Transforms a quaternion that rotates by pi/3 about the Z axis to an axis</i></td></tr>
<tr><th id="289">289</th><td><i>// angle.</i></td></tr>
<tr><th id="290">290</th><td><a class="macro" href="gtest/gtest.h.html#21153" title="class Rotation_ZRotationQuaternionToAngleAxis_Test : public ::testing::Test { public: Rotation_ZRotationQuaternionToAngleAxis_Test() {} private: virtual void TestBody(); static ::testing::TestInfo* const test_info_ __attribute__ ((unused)); Rotation_ZRotationQuaternionToAngleAxis_Test(Rotation_ZRotationQuaternionToAngleAxis_Test const &amp;); void operator=(Rotation_ZRotationQuaternionToAngleAxis_Test const &amp;);};::testing::TestInfo* const Rotation_ZRotationQuaternionToAngleAxis_Test ::test_info_ = ::testing::internal::MakeAndRegisterTestInfo( &quot;Rotation&quot;, &quot;ZRotationQuaternionToAngleAxis&quot;, __null, __null, ::testing::internal::CodeLocation(&quot;/home/yzf/code/ceres-solver/internal/ceres/rotation_test.cc&quot;, 290), (::testing::internal::GetTestTypeId()), ::testing::Test::SetUpTestCase, ::testing::Test::TearDownTestCase, new ::testing::internal::TestFactoryImpl&lt; Rotation_ZRotationQuaternionToAngleAxis_Test&gt;);void Rotation_ZRotationQuaternionToAngleAxis_Test::TestBody()" data-ref="_M/TEST">TEST</a>(Rotation, ZRotationQuaternionToAngleAxis) {</td></tr>
<tr><th id="291">291</th><td>  <em>double</em> <dfn class="local col9 decl" id="49quaternion" title='quaternion' data-type='double [4]' data-ref="49quaternion">quaternion</dfn>[<var>4</var>] = { <a class="ref" href="../../include/ceres/jet.h.html#_ZN5ceres4sqrtEd" title='ceres::sqrt' data-ref="_ZN5ceres4sqrtEd">sqrt</a>(<var>3</var>) / <var>2</var>, <var>0</var>, <var>0</var>, <var>0.5</var> };</td></tr>
<tr><th id="292">292</th><td>  <em>double</em> <dfn class="local col0 decl" id="50axis_angle" title='axis_angle' data-type='double [3]' data-ref="50axis_angle">axis_angle</dfn>[<var>3</var>];</td></tr>
<tr><th id="293">293</th><td>  <em>double</em> <dfn class="local col1 decl" id="51expected" title='expected' data-type='double [3]' data-ref="51expected">expected</dfn>[<var>3</var>] = { <var>0</var>, <var>0</var>, <a class="tu ref" href="#ceres::internal::kPi" title='ceres::internal::kPi' data-use='r' data-ref="ceres::internal::kPi">kPi</a> / <var>3</var> };</td></tr>
<tr><th id="294">294</th><td>  <a class="ref" href="../../include/ceres/rotation.h.html#_ZN5ceres21QuaternionToAngleAxisEPKT_PS0_" title='ceres::QuaternionToAngleAxis' data-ref="_ZN5ceres21QuaternionToAngleAxisEPKT_PS0_">QuaternionToAngleAxis</a>(<a class="local col9 ref" href="#49quaternion" title='quaternion' data-ref="49quaternion">quaternion</a>, <a class="local col0 ref" href="#50axis_angle" title='axis_angle' data-ref="50axis_angle">axis_angle</a>);</td></tr>
<tr><th id="295">295</th><td>  <a class="macro" href="gmock/gmock.h.html#9209" title="switch (0) case 0: default: if (const ::testing::AssertionResult gtest_ar = (::testing::internal::MakePredicateFormatterFromMatcher(IsNearAngleAxis(expected))(&quot;axis_angle&quot;, axis_angle))) ; else ::testing::internal::AssertHelper(::testing::TestPartResult::kNonFatalFailure, &quot;/home/yzf/code/ceres-solver/internal/ceres/rotation_test.cc&quot;, 295, gtest_ar.failure_message()) = ::testing::Message()" data-ref="_M/EXPECT_THAT">EXPECT_THAT</a>(<a class="local col0 ref" href="#50axis_angle" title='axis_angle' data-ref="50axis_angle">axis_angle</a>, <a class="ref" href="#140" title='ceres::internal::IsNearAngleAxis' data-ref="_ZN5ceres8internal15IsNearAngleAxisET_">IsNearAngleAxis</a>(<a class="local col1 ref" href="#51expected" title='expected' data-ref="51expected">expected</a>));</td></tr>
<tr><th id="296">296</th><td>}</td></tr>
<tr><th id="297">297</th><td></td></tr>
<tr><th id="298">298</th><td><i>// Test that exact conversion works for small angles.</i></td></tr>
<tr><th id="299">299</th><td><a class="macro" href="gtest/gtest.h.html#21153" title="class Rotation_SmallQuaternionToAngleAxis_Test : public ::testing::Test { public: Rotation_SmallQuaternionToAngleAxis_Test() {} private: virtual void TestBody(); static ::testing::TestInfo* const test_info_ __attribute__ ((unused)); Rotation_SmallQuaternionToAngleAxis_Test(Rotation_SmallQuaternionToAngleAxis_Test const &amp;); void operator=(Rotation_SmallQuaternionToAngleAxis_Test const &amp;);};::testing::TestInfo* const Rotation_SmallQuaternionToAngleAxis_Test ::test_info_ = ::testing::internal::MakeAndRegisterTestInfo( &quot;Rotation&quot;, &quot;SmallQuaternionToAngleAxis&quot;, __null, __null, ::testing::internal::CodeLocation(&quot;/home/yzf/code/ceres-solver/internal/ceres/rotation_test.cc&quot;, 299), (::testing::internal::GetTestTypeId()), ::testing::Test::SetUpTestCase, ::testing::Test::TearDownTestCase, new ::testing::internal::TestFactoryImpl&lt; Rotation_SmallQuaternionToAngleAxis_Test&gt;);void Rotation_SmallQuaternionToAngleAxis_Test::TestBody()" data-ref="_M/TEST">TEST</a>(Rotation, SmallQuaternionToAngleAxis) {</td></tr>
<tr><th id="300">300</th><td>  <i>// Small, finite value to test.</i></td></tr>
<tr><th id="301">301</th><td>  <em>double</em> <dfn class="local col2 decl" id="52theta" title='theta' data-type='double' data-ref="52theta">theta</dfn> = <var>1.0e-2</var>;</td></tr>
<tr><th id="302">302</th><td>  <em>double</em> <dfn class="local col3 decl" id="53quaternion" title='quaternion' data-type='double [4]' data-ref="53quaternion">quaternion</dfn>[<var>4</var>] = { <a class="ref" href="../../include/ceres/jet.h.html#_ZN5ceres3cosEd" title='ceres::cos' data-ref="_ZN5ceres3cosEd">cos</a>(<a class="local col2 ref" href="#52theta" title='theta' data-ref="52theta">theta</a>/<var>2</var>), <a class="ref" href="../../include/ceres/jet.h.html#_ZN5ceres3sinEd" title='ceres::sin' data-ref="_ZN5ceres3sinEd">sin</a>(<a class="local col2 ref" href="#52theta" title='theta' data-ref="52theta">theta</a>/<var>2.0</var>), <var>0</var>, <var>0</var> };</td></tr>
<tr><th id="303">303</th><td>  <em>double</em> <dfn class="local col4 decl" id="54axis_angle" title='axis_angle' data-type='double [3]' data-ref="54axis_angle">axis_angle</dfn>[<var>3</var>];</td></tr>
<tr><th id="304">304</th><td>  <em>double</em> <dfn class="local col5 decl" id="55expected" title='expected' data-type='double [3]' data-ref="55expected">expected</dfn>[<var>3</var>] = { <a class="local col2 ref" href="#52theta" title='theta' data-ref="52theta">theta</a>, <var>0</var>, <var>0</var> };</td></tr>
<tr><th id="305">305</th><td>  <a class="ref" href="../../include/ceres/rotation.h.html#_ZN5ceres21QuaternionToAngleAxisEPKT_PS0_" title='ceres::QuaternionToAngleAxis' data-ref="_ZN5ceres21QuaternionToAngleAxisEPKT_PS0_">QuaternionToAngleAxis</a>(<a class="local col3 ref" href="#53quaternion" title='quaternion' data-ref="53quaternion">quaternion</a>, <a class="local col4 ref" href="#54axis_angle" title='axis_angle' data-ref="54axis_angle">axis_angle</a>);</td></tr>
<tr><th id="306">306</th><td>  <a class="macro" href="gmock/gmock.h.html#9209" title="switch (0) case 0: default: if (const ::testing::AssertionResult gtest_ar = (::testing::internal::MakePredicateFormatterFromMatcher(IsNearAngleAxis(expected))(&quot;axis_angle&quot;, axis_angle))) ; else ::testing::internal::AssertHelper(::testing::TestPartResult::kNonFatalFailure, &quot;/home/yzf/code/ceres-solver/internal/ceres/rotation_test.cc&quot;, 306, gtest_ar.failure_message()) = ::testing::Message()" data-ref="_M/EXPECT_THAT">EXPECT_THAT</a>(<a class="local col4 ref" href="#54axis_angle" title='axis_angle' data-ref="54axis_angle">axis_angle</a>, <a class="ref" href="#140" title='ceres::internal::IsNearAngleAxis' data-ref="_ZN5ceres8internal15IsNearAngleAxisET_">IsNearAngleAxis</a>(<a class="local col5 ref" href="#55expected" title='expected' data-ref="55expected">expected</a>));</td></tr>
<tr><th id="307">307</th><td>}</td></tr>
<tr><th id="308">308</th><td></td></tr>
<tr><th id="309">309</th><td><i>// Test that approximate conversion works for very small angles.</i></td></tr>
<tr><th id="310">310</th><td><a class="macro" href="gtest/gtest.h.html#21153" title="class Rotation_TinyQuaternionToAngleAxis_Test : public ::testing::Test { public: Rotation_TinyQuaternionToAngleAxis_Test() {} private: virtual void TestBody(); static ::testing::TestInfo* const test_info_ __attribute__ ((unused)); Rotation_TinyQuaternionToAngleAxis_Test(Rotation_TinyQuaternionToAngleAxis_Test const &amp;); void operator=(Rotation_TinyQuaternionToAngleAxis_Test const &amp;);};::testing::TestInfo* const Rotation_TinyQuaternionToAngleAxis_Test ::test_info_ = ::testing::internal::MakeAndRegisterTestInfo( &quot;Rotation&quot;, &quot;TinyQuaternionToAngleAxis&quot;, __null, __null, ::testing::internal::CodeLocation(&quot;/home/yzf/code/ceres-solver/internal/ceres/rotation_test.cc&quot;, 310), (::testing::internal::GetTestTypeId()), ::testing::Test::SetUpTestCase, ::testing::Test::TearDownTestCase, new ::testing::internal::TestFactoryImpl&lt; Rotation_TinyQuaternionToAngleAxis_Test&gt;);void Rotation_TinyQuaternionToAngleAxis_Test::TestBody()" data-ref="_M/TEST">TEST</a>(Rotation, TinyQuaternionToAngleAxis) {</td></tr>
<tr><th id="311">311</th><td>  <i>// Very small value that could potentially cause underflow.</i></td></tr>
<tr><th id="312">312</th><td>  <em>double</em> <dfn class="local col6 decl" id="56theta" title='theta' data-type='double' data-ref="56theta">theta</dfn> = <a class="ref" href="../../include/ceres/jet.h.html#_ZN5ceres3powEdd" title='ceres::pow' data-ref="_ZN5ceres3powEdd">pow</a>(<a class="type" href="../../../include/c++/4.8/limits.html#std::numeric_limits" title='std::numeric_limits' data-ref="std::numeric_limits">numeric_limits</a>&lt;<em>double</em>&gt;::<a class="ref" href="../../../include/c++/4.8/limits.html#_ZNSt14numeric_limitsIdE3minEv" title='std::numeric_limits&lt;double&gt;::min' data-ref="_ZNSt14numeric_limitsIdE3minEv">min</a>(), <var>0.75</var>);</td></tr>
<tr><th id="313">313</th><td>  <em>double</em> <dfn class="local col7 decl" id="57quaternion" title='quaternion' data-type='double [4]' data-ref="57quaternion">quaternion</dfn>[<var>4</var>] = { <a class="ref" href="../../include/ceres/jet.h.html#_ZN5ceres3cosEd" title='ceres::cos' data-ref="_ZN5ceres3cosEd">cos</a>(<a class="local col6 ref" href="#56theta" title='theta' data-ref="56theta">theta</a>/<var>2</var>), <a class="ref" href="../../include/ceres/jet.h.html#_ZN5ceres3sinEd" title='ceres::sin' data-ref="_ZN5ceres3sinEd">sin</a>(<a class="local col6 ref" href="#56theta" title='theta' data-ref="56theta">theta</a>/<var>2.0</var>), <var>0</var>, <var>0</var> };</td></tr>
<tr><th id="314">314</th><td>  <em>double</em> <dfn class="local col8 decl" id="58axis_angle" title='axis_angle' data-type='double [3]' data-ref="58axis_angle">axis_angle</dfn>[<var>3</var>];</td></tr>
<tr><th id="315">315</th><td>  <em>double</em> <dfn class="local col9 decl" id="59expected" title='expected' data-type='double [3]' data-ref="59expected">expected</dfn>[<var>3</var>] = { <a class="local col6 ref" href="#56theta" title='theta' data-ref="56theta">theta</a>, <var>0</var>, <var>0</var> };</td></tr>
<tr><th id="316">316</th><td>  <a class="ref" href="../../include/ceres/rotation.h.html#_ZN5ceres21QuaternionToAngleAxisEPKT_PS0_" title='ceres::QuaternionToAngleAxis' data-ref="_ZN5ceres21QuaternionToAngleAxisEPKT_PS0_">QuaternionToAngleAxis</a>(<a class="local col7 ref" href="#57quaternion" title='quaternion' data-ref="57quaternion">quaternion</a>, <a class="local col8 ref" href="#58axis_angle" title='axis_angle' data-ref="58axis_angle">axis_angle</a>);</td></tr>
<tr><th id="317">317</th><td>  <a class="macro" href="gmock/gmock.h.html#9209" title="switch (0) case 0: default: if (const ::testing::AssertionResult gtest_ar = (::testing::internal::MakePredicateFormatterFromMatcher(IsNearAngleAxis(expected))(&quot;axis_angle&quot;, axis_angle))) ; else ::testing::internal::AssertHelper(::testing::TestPartResult::kNonFatalFailure, &quot;/home/yzf/code/ceres-solver/internal/ceres/rotation_test.cc&quot;, 317, gtest_ar.failure_message()) = ::testing::Message()" data-ref="_M/EXPECT_THAT">EXPECT_THAT</a>(<a class="local col8 ref" href="#58axis_angle" title='axis_angle' data-ref="58axis_angle">axis_angle</a>, <a class="ref" href="#140" title='ceres::internal::IsNearAngleAxis' data-ref="_ZN5ceres8internal15IsNearAngleAxisET_">IsNearAngleAxis</a>(<a class="local col9 ref" href="#59expected" title='expected' data-ref="59expected">expected</a>));</td></tr>
<tr><th id="318">318</th><td>}</td></tr>
<tr><th id="319">319</th><td></td></tr>
<tr><th id="320">320</th><td><a class="macro" href="gtest/gtest.h.html#21153" title="class Rotation_QuaternionToAngleAxisAngleIsLessThanPi_Test : public ::testing::Test { public: Rotation_QuaternionToAngleAxisAngleIsLessThanPi_Test() {} private: virtual void TestBody(); static ::testing::TestInfo* const test_info_ __attribute__ ((unused)); Rotation_QuaternionToAngleAxisAngleIsLessThanPi_Test(Rotation_QuaternionToAngleAxisAngleIsLessThanPi_Test const &amp;); void operator=(Rotation_QuaternionToAngleAxisAngleIsLessThanPi_Test const &amp;);};::testing::TestInfo* const Rotation_QuaternionToAngleAxisAngleIsLessThanPi_Test ::test_info_ = ::testing::internal::MakeAndRegisterTestInfo( &quot;Rotation&quot;, &quot;QuaternionToAngleAxisAngleIsLessThanPi&quot;, __null, __null, ::testing::internal::CodeLocation(&quot;/home/yzf/code/ceres-solver/internal/ceres/rotation_test.cc&quot;, 320), (::testing::internal::GetTestTypeId()), ::testing::Test::SetUpTestCase, ::testing::Test::TearDownTestCase, new ::testing::internal::TestFactoryImpl&lt; Rotation_QuaternionToAngleAxisAngleIsLessThanPi_Test&gt;);void Rotation_QuaternionToAngleAxisAngleIsLessThanPi_Test::TestBody()" data-ref="_M/TEST">TEST</a>(Rotation, QuaternionToAngleAxisAngleIsLessThanPi) {</td></tr>
<tr><th id="321">321</th><td>  <em>double</em> <dfn class="local col0 decl" id="60quaternion" title='quaternion' data-type='double [4]' data-ref="60quaternion">quaternion</dfn>[<var>4</var>];</td></tr>
<tr><th id="322">322</th><td>  <em>double</em> <dfn class="local col1 decl" id="61angle_axis" title='angle_axis' data-type='double [3]' data-ref="61angle_axis">angle_axis</dfn>[<var>3</var>];</td></tr>
<tr><th id="323">323</th><td></td></tr>
<tr><th id="324">324</th><td>  <em>const</em> <em>double</em> <dfn class="local col2 decl" id="62half_theta" title='half_theta' data-type='const double' data-ref="62half_theta">half_theta</dfn> = <var>0.75</var> * <a class="tu ref" href="#ceres::internal::kPi" title='ceres::internal::kPi' data-use='r' data-ref="ceres::internal::kPi">kPi</a>;</td></tr>
<tr><th id="325">325</th><td></td></tr>
<tr><th id="326">326</th><td>  <a class="local col0 ref" href="#60quaternion" title='quaternion' data-ref="60quaternion">quaternion</a>[<var>0</var>] = <a class="ref" href="../../include/ceres/jet.h.html#_ZN5ceres3cosEd" title='ceres::cos' data-ref="_ZN5ceres3cosEd">cos</a>(<a class="local col2 ref" href="#62half_theta" title='half_theta' data-ref="62half_theta">half_theta</a>);</td></tr>
<tr><th id="327">327</th><td>  <a class="local col0 ref" href="#60quaternion" title='quaternion' data-ref="60quaternion">quaternion</a>[<var>1</var>] = <var>1.0</var> * <a class="ref" href="../../include/ceres/jet.h.html#_ZN5ceres3sinEd" title='ceres::sin' data-ref="_ZN5ceres3sinEd">sin</a>(<a class="local col2 ref" href="#62half_theta" title='half_theta' data-ref="62half_theta">half_theta</a>);</td></tr>
<tr><th id="328">328</th><td>  <a class="local col0 ref" href="#60quaternion" title='quaternion' data-ref="60quaternion">quaternion</a>[<var>2</var>] = <var>0.0</var>;</td></tr>
<tr><th id="329">329</th><td>  <a class="local col0 ref" href="#60quaternion" title='quaternion' data-ref="60quaternion">quaternion</a>[<var>3</var>] = <var>0.0</var>;</td></tr>
<tr><th id="330">330</th><td>  <a class="ref" href="../../include/ceres/rotation.h.html#_ZN5ceres21QuaternionToAngleAxisEPKT_PS0_" title='ceres::QuaternionToAngleAxis' data-ref="_ZN5ceres21QuaternionToAngleAxisEPKT_PS0_">QuaternionToAngleAxis</a>(<a class="local col0 ref" href="#60quaternion" title='quaternion' data-ref="60quaternion">quaternion</a>, <a class="local col1 ref" href="#61angle_axis" title='angle_axis' data-ref="61angle_axis">angle_axis</a>);</td></tr>
<tr><th id="331">331</th><td>  <em>const</em> <em>double</em> <dfn class="local col3 decl" id="63angle" title='angle' data-type='const double' data-ref="63angle">angle</dfn> = <a class="ref" href="../../include/ceres/jet.h.html#_ZN5ceres4sqrtEd" title='ceres::sqrt' data-ref="_ZN5ceres4sqrtEd">sqrt</a>(<a class="local col1 ref" href="#61angle_axis" title='angle_axis' data-ref="61angle_axis">angle_axis</a>[<var>0</var>] * <a class="local col1 ref" href="#61angle_axis" title='angle_axis' data-ref="61angle_axis">angle_axis</a>[<var>0</var>] +</td></tr>
<tr><th id="332">332</th><td>                            <a class="local col1 ref" href="#61angle_axis" title='angle_axis' data-ref="61angle_axis">angle_axis</a>[<var>1</var>] * <a class="local col1 ref" href="#61angle_axis" title='angle_axis' data-ref="61angle_axis">angle_axis</a>[<var>1</var>] +</td></tr>
<tr><th id="333">333</th><td>                            <a class="local col1 ref" href="#61angle_axis" title='angle_axis' data-ref="61angle_axis">angle_axis</a>[<var>2</var>] * <a class="local col1 ref" href="#61angle_axis" title='angle_axis' data-ref="61angle_axis">angle_axis</a>[<var>2</var>]);</td></tr>
<tr><th id="334">334</th><td>  <a class="macro" href="gtest/gtest.h.html#20894" title="switch (0) case 0: default: if (const ::testing::AssertionResult gtest_ar = (::testing::internal::CmpHelperLE(&quot;angle&quot;, &quot;kPi&quot;, angle, kPi))) ; else ::testing::internal::AssertHelper(::testing::TestPartResult::kNonFatalFailure, &quot;/home/yzf/code/ceres-solver/internal/ceres/rotation_test.cc&quot;, 334, gtest_ar.failure_message()) = ::testing::Message()" data-ref="_M/EXPECT_LE">EXPECT_LE</a>(<a class="local col3 ref" href="#63angle" title='angle' data-ref="63angle">angle</a>, <a class="tu ref" href="#ceres::internal::kPi" title='ceres::internal::kPi' data-use='r' data-ref="ceres::internal::kPi">kPi</a>);</td></tr>
<tr><th id="335">335</th><td>}</td></tr>
<tr><th id="336">336</th><td></td></tr>
<tr><th id="337">337</th><td><em>static</em> <em>const</em> <em>int</em> <dfn class="tu decl def" id="ceres::internal::kNumTrials" title='ceres::internal::kNumTrials' data-type='const int' data-ref="ceres::internal::kNumTrials">kNumTrials</dfn> = <var>10000</var>;</td></tr>
<tr><th id="338">338</th><td></td></tr>
<tr><th id="339">339</th><td><i>// Takes a bunch of random axis/angle values, converts them to quaternions,</i></td></tr>
<tr><th id="340">340</th><td><i>// and back again.</i></td></tr>
<tr><th id="341">341</th><td><a class="macro" href="gtest/gtest.h.html#21153" title="class Rotation_AngleAxisToQuaterionAndBack_Test : public ::testing::Test { public: Rotation_AngleAxisToQuaterionAndBack_Test() {} private: virtual void TestBody(); static ::testing::TestInfo* const test_info_ __attribute__ ((unused)); Rotation_AngleAxisToQuaterionAndBack_Test(Rotation_AngleAxisToQuaterionAndBack_Test const &amp;); void operator=(Rotation_AngleAxisToQuaterionAndBack_Test const &amp;);};::testing::TestInfo* const Rotation_AngleAxisToQuaterionAndBack_Test ::test_info_ = ::testing::internal::MakeAndRegisterTestInfo( &quot;Rotation&quot;, &quot;AngleAxisToQuaterionAndBack&quot;, __null, __null, ::testing::internal::CodeLocation(&quot;/home/yzf/code/ceres-solver/internal/ceres/rotation_test.cc&quot;, 341), (::testing::internal::GetTestTypeId()), ::testing::Test::SetUpTestCase, ::testing::Test::TearDownTestCase, new ::testing::internal::TestFactoryImpl&lt; Rotation_AngleAxisToQuaterionAndBack_Test&gt;);void Rotation_AngleAxisToQuaterionAndBack_Test::TestBody()" data-ref="_M/TEST">TEST</a>(Rotation, AngleAxisToQuaterionAndBack) {</td></tr>
<tr><th id="342">342</th><td>  <a class="ref" href="../../../include/stdlib.h.html#srand" title='srand' data-ref="srand">srand</a>(<var>5</var>);</td></tr>
<tr><th id="343">343</th><td>  <b>for</b> (<em>int</em> <dfn class="local col4 decl" id="64i" title='i' data-type='int' data-ref="64i">i</dfn> = <var>0</var>; <a class="local col4 ref" href="#64i" title='i' data-ref="64i">i</a> &lt; <a class="tu ref" href="#ceres::internal::kNumTrials" title='ceres::internal::kNumTrials' data-use='r' data-ref="ceres::internal::kNumTrials">kNumTrials</a>; <a class="local col4 ref" href="#64i" title='i' data-ref="64i">i</a>++) {</td></tr>
<tr><th id="344">344</th><td>    <em>double</em> <dfn class="local col5 decl" id="65axis_angle" title='axis_angle' data-type='double [3]' data-ref="65axis_angle">axis_angle</dfn>[<var>3</var>];</td></tr>
<tr><th id="345">345</th><td>    <i>// Make an axis by choosing three random numbers in [-1, 1) and</i></td></tr>
<tr><th id="346">346</th><td><i>    // normalizing.</i></td></tr>
<tr><th id="347">347</th><td>    <em>double</em> <dfn class="local col6 decl" id="66norm" title='norm' data-type='double' data-ref="66norm">norm</dfn> = <var>0</var>;</td></tr>
<tr><th id="348">348</th><td>    <b>for</b> (<em>int</em> <dfn class="local col7 decl" id="67i" title='i' data-type='int' data-ref="67i">i</dfn> = <var>0</var>; <a class="local col7 ref" href="#67i" title='i' data-ref="67i">i</a> &lt; <var>3</var>; <a class="local col7 ref" href="#67i" title='i' data-ref="67i">i</a>++) {</td></tr>
<tr><th id="349">349</th><td>      <a class="local col5 ref" href="#65axis_angle" title='axis_angle' data-ref="65axis_angle">axis_angle</a>[<a class="local col7 ref" href="#67i" title='i' data-ref="67i">i</a>] = <a class="ref" href="#_ZN5ceres8internal10RandDoubleEv" title='ceres::internal::RandDouble' data-ref="_ZN5ceres8internal10RandDoubleEv">RandDouble</a>() * <var>2</var> - <var>1</var>;</td></tr>
<tr><th id="350">350</th><td>      <a class="local col6 ref" href="#66norm" title='norm' data-ref="66norm">norm</a> += <a class="local col5 ref" href="#65axis_angle" title='axis_angle' data-ref="65axis_angle">axis_angle</a>[<a class="local col7 ref" href="#67i" title='i' data-ref="67i">i</a>] * <a class="local col5 ref" href="#65axis_angle" title='axis_angle' data-ref="65axis_angle">axis_angle</a>[<a class="local col7 ref" href="#67i" title='i' data-ref="67i">i</a>];</td></tr>
<tr><th id="351">351</th><td>    }</td></tr>
<tr><th id="352">352</th><td>    <a class="local col6 ref" href="#66norm" title='norm' data-ref="66norm">norm</a> = <a class="ref" href="../../include/ceres/jet.h.html#_ZN5ceres4sqrtEd" title='ceres::sqrt' data-ref="_ZN5ceres4sqrtEd">sqrt</a>(<a class="local col6 ref" href="#66norm" title='norm' data-ref="66norm">norm</a>);</td></tr>
<tr><th id="353">353</th><td></td></tr>
<tr><th id="354">354</th><td>    <i>// Angle in [-pi, pi).</i></td></tr>
<tr><th id="355">355</th><td>    <em>double</em> <dfn class="local col8 decl" id="68theta" title='theta' data-type='double' data-ref="68theta">theta</dfn> = <a class="tu ref" href="#ceres::internal::kPi" title='ceres::internal::kPi' data-use='r' data-ref="ceres::internal::kPi">kPi</a> * <var>2</var> * <a class="ref" href="#_ZN5ceres8internal10RandDoubleEv" title='ceres::internal::RandDouble' data-ref="_ZN5ceres8internal10RandDoubleEv">RandDouble</a>() - <a class="tu ref" href="#ceres::internal::kPi" title='ceres::internal::kPi' data-use='r' data-ref="ceres::internal::kPi">kPi</a>;</td></tr>
<tr><th id="356">356</th><td>    <b>for</b> (<em>int</em> <dfn class="local col9 decl" id="69i" title='i' data-type='int' data-ref="69i">i</dfn> = <var>0</var>; <a class="local col9 ref" href="#69i" title='i' data-ref="69i">i</a> &lt; <var>3</var>; <a class="local col9 ref" href="#69i" title='i' data-ref="69i">i</a>++) {</td></tr>
<tr><th id="357">357</th><td>      <a class="local col5 ref" href="#65axis_angle" title='axis_angle' data-ref="65axis_angle">axis_angle</a>[<a class="local col9 ref" href="#69i" title='i' data-ref="69i">i</a>] = <a class="local col5 ref" href="#65axis_angle" title='axis_angle' data-ref="65axis_angle">axis_angle</a>[<a class="local col9 ref" href="#69i" title='i' data-ref="69i">i</a>] * <a class="local col8 ref" href="#68theta" title='theta' data-ref="68theta">theta</a> / <a class="local col6 ref" href="#66norm" title='norm' data-ref="66norm">norm</a>;</td></tr>
<tr><th id="358">358</th><td>    }</td></tr>
<tr><th id="359">359</th><td></td></tr>
<tr><th id="360">360</th><td>    <em>double</em> <dfn class="local col0 decl" id="70quaternion" title='quaternion' data-type='double [4]' data-ref="70quaternion">quaternion</dfn>[<var>4</var>];</td></tr>
<tr><th id="361">361</th><td>    <em>double</em> <dfn class="local col1 decl" id="71round_trip" title='round_trip' data-type='double [3]' data-ref="71round_trip">round_trip</dfn>[<var>3</var>];</td></tr>
<tr><th id="362">362</th><td>    <i>// We use ASSERTs here because if there's one failure, there are</i></td></tr>
<tr><th id="363">363</th><td><i>    // probably many and spewing a million failures doesn't make anyone's</i></td></tr>
<tr><th id="364">364</th><td><i>    // day.</i></td></tr>
<tr><th id="365">365</th><td>    <a class="ref" href="../../include/ceres/rotation.h.html#_ZN5ceres21AngleAxisToQuaternionEPKT_PS0_" title='ceres::AngleAxisToQuaternion' data-ref="_ZN5ceres21AngleAxisToQuaternionEPKT_PS0_">AngleAxisToQuaternion</a>(<a class="local col5 ref" href="#65axis_angle" title='axis_angle' data-ref="65axis_angle">axis_angle</a>, <a class="local col0 ref" href="#70quaternion" title='quaternion' data-ref="70quaternion">quaternion</a>);</td></tr>
<tr><th id="366">366</th><td>    <a class="macro" href="gmock/gmock.h.html#9207" title="switch (0) case 0: default: if (const ::testing::AssertionResult gtest_ar = (::testing::internal::MakePredicateFormatterFromMatcher(IsNormalizedQuaternion())(&quot;quaternion&quot;, quaternion))) ; else return ::testing::internal::AssertHelper(::testing::TestPartResult::kFatalFailure, &quot;/home/yzf/code/ceres-solver/internal/ceres/rotation_test.cc&quot;, 366, gtest_ar.failure_message()) = ::testing::Message()" data-ref="_M/ASSERT_THAT">ASSERT_THAT</a>(<a class="local col0 ref" href="#70quaternion" title='quaternion' data-ref="70quaternion">quaternion</a>, <a class="ref" href="#71" title='ceres::internal::IsNormalizedQuaternion' data-ref="_ZN5ceres8internal22IsNormalizedQuaternionEv">IsNormalizedQuaternion</a>());</td></tr>
<tr><th id="367">367</th><td>    <a class="ref" href="../../include/ceres/rotation.h.html#_ZN5ceres21QuaternionToAngleAxisEPKT_PS0_" title='ceres::QuaternionToAngleAxis' data-ref="_ZN5ceres21QuaternionToAngleAxisEPKT_PS0_">QuaternionToAngleAxis</a>(<a class="local col0 ref" href="#70quaternion" title='quaternion' data-ref="70quaternion">quaternion</a>, <a class="local col1 ref" href="#71round_trip" title='round_trip' data-ref="71round_trip">round_trip</a>);</td></tr>
<tr><th id="368">368</th><td>    <a class="macro" href="gmock/gmock.h.html#9207" title="switch (0) case 0: default: if (const ::testing::AssertionResult gtest_ar = (::testing::internal::MakePredicateFormatterFromMatcher(IsNearAngleAxis(axis_angle))(&quot;round_trip&quot;, round_trip))) ; else return ::testing::internal::AssertHelper(::testing::TestPartResult::kFatalFailure, &quot;/home/yzf/code/ceres-solver/internal/ceres/rotation_test.cc&quot;, 368, gtest_ar.failure_message()) = ::testing::Message()" data-ref="_M/ASSERT_THAT">ASSERT_THAT</a>(<a class="local col1 ref" href="#71round_trip" title='round_trip' data-ref="71round_trip">round_trip</a>, <a class="ref" href="#140" title='ceres::internal::IsNearAngleAxis' data-ref="_ZN5ceres8internal15IsNearAngleAxisET_">IsNearAngleAxis</a>(<a class="local col5 ref" href="#65axis_angle" title='axis_angle' data-ref="65axis_angle">axis_angle</a>));</td></tr>
<tr><th id="369">369</th><td>  }</td></tr>
<tr><th id="370">370</th><td>}</td></tr>
<tr><th id="371">371</th><td></td></tr>
<tr><th id="372">372</th><td><i>// Takes a bunch of random quaternions, converts them to axis/angle,</i></td></tr>
<tr><th id="373">373</th><td><i>// and back again.</i></td></tr>
<tr><th id="374">374</th><td><a class="macro" href="gtest/gtest.h.html#21153" title="class Rotation_QuaterionToAngleAxisAndBack_Test : public ::testing::Test { public: Rotation_QuaterionToAngleAxisAndBack_Test() {} private: virtual void TestBody(); static ::testing::TestInfo* const test_info_ __attribute__ ((unused)); Rotation_QuaterionToAngleAxisAndBack_Test(Rotation_QuaterionToAngleAxisAndBack_Test const &amp;); void operator=(Rotation_QuaterionToAngleAxisAndBack_Test const &amp;);};::testing::TestInfo* const Rotation_QuaterionToAngleAxisAndBack_Test ::test_info_ = ::testing::internal::MakeAndRegisterTestInfo( &quot;Rotation&quot;, &quot;QuaterionToAngleAxisAndBack&quot;, __null, __null, ::testing::internal::CodeLocation(&quot;/home/yzf/code/ceres-solver/internal/ceres/rotation_test.cc&quot;, 374), (::testing::internal::GetTestTypeId()), ::testing::Test::SetUpTestCase, ::testing::Test::TearDownTestCase, new ::testing::internal::TestFactoryImpl&lt; Rotation_QuaterionToAngleAxisAndBack_Test&gt;);void Rotation_QuaterionToAngleAxisAndBack_Test::TestBody()" data-ref="_M/TEST">TEST</a>(Rotation, QuaterionToAngleAxisAndBack) {</td></tr>
<tr><th id="375">375</th><td>  <a class="ref" href="../../../include/stdlib.h.html#srand" title='srand' data-ref="srand">srand</a>(<var>5</var>);</td></tr>
<tr><th id="376">376</th><td>  <b>for</b> (<em>int</em> <dfn class="local col2 decl" id="72i" title='i' data-type='int' data-ref="72i">i</dfn> = <var>0</var>; <a class="local col2 ref" href="#72i" title='i' data-ref="72i">i</a> &lt; <a class="tu ref" href="#ceres::internal::kNumTrials" title='ceres::internal::kNumTrials' data-use='r' data-ref="ceres::internal::kNumTrials">kNumTrials</a>; <a class="local col2 ref" href="#72i" title='i' data-ref="72i">i</a>++) {</td></tr>
<tr><th id="377">377</th><td>    <em>double</em> <dfn class="local col3 decl" id="73quaternion" title='quaternion' data-type='double [4]' data-ref="73quaternion">quaternion</dfn>[<var>4</var>];</td></tr>
<tr><th id="378">378</th><td>    <i>// Choose four random numbers in [-1, 1) and normalize.</i></td></tr>
<tr><th id="379">379</th><td>    <em>double</em> <dfn class="local col4 decl" id="74norm" title='norm' data-type='double' data-ref="74norm">norm</dfn> = <var>0</var>;</td></tr>
<tr><th id="380">380</th><td>    <b>for</b> (<em>int</em> <dfn class="local col5 decl" id="75i" title='i' data-type='int' data-ref="75i">i</dfn> = <var>0</var>; <a class="local col5 ref" href="#75i" title='i' data-ref="75i">i</a> &lt; <var>4</var>; <a class="local col5 ref" href="#75i" title='i' data-ref="75i">i</a>++) {</td></tr>
<tr><th id="381">381</th><td>      <a class="local col3 ref" href="#73quaternion" title='quaternion' data-ref="73quaternion">quaternion</a>[<a class="local col5 ref" href="#75i" title='i' data-ref="75i">i</a>] = <a class="ref" href="#_ZN5ceres8internal10RandDoubleEv" title='ceres::internal::RandDouble' data-ref="_ZN5ceres8internal10RandDoubleEv">RandDouble</a>() * <var>2</var> - <var>1</var>;</td></tr>
<tr><th id="382">382</th><td>      <a class="local col4 ref" href="#74norm" title='norm' data-ref="74norm">norm</a> += <a class="local col3 ref" href="#73quaternion" title='quaternion' data-ref="73quaternion">quaternion</a>[<a class="local col5 ref" href="#75i" title='i' data-ref="75i">i</a>] * <a class="local col3 ref" href="#73quaternion" title='quaternion' data-ref="73quaternion">quaternion</a>[<a class="local col5 ref" href="#75i" title='i' data-ref="75i">i</a>];</td></tr>
<tr><th id="383">383</th><td>    }</td></tr>
<tr><th id="384">384</th><td>    <a class="local col4 ref" href="#74norm" title='norm' data-ref="74norm">norm</a> = <a class="ref" href="../../include/ceres/jet.h.html#_ZN5ceres4sqrtEd" title='ceres::sqrt' data-ref="_ZN5ceres4sqrtEd">sqrt</a>(<a class="local col4 ref" href="#74norm" title='norm' data-ref="74norm">norm</a>);</td></tr>
<tr><th id="385">385</th><td></td></tr>
<tr><th id="386">386</th><td>    <b>for</b> (<em>int</em> <dfn class="local col6 decl" id="76i" title='i' data-type='int' data-ref="76i">i</dfn> = <var>0</var>; <a class="local col6 ref" href="#76i" title='i' data-ref="76i">i</a> &lt; <var>4</var>; <a class="local col6 ref" href="#76i" title='i' data-ref="76i">i</a>++) {</td></tr>
<tr><th id="387">387</th><td>      <a class="local col3 ref" href="#73quaternion" title='quaternion' data-ref="73quaternion">quaternion</a>[<a class="local col6 ref" href="#76i" title='i' data-ref="76i">i</a>] = <a class="local col3 ref" href="#73quaternion" title='quaternion' data-ref="73quaternion">quaternion</a>[<a class="local col6 ref" href="#76i" title='i' data-ref="76i">i</a>] / <a class="local col4 ref" href="#74norm" title='norm' data-ref="74norm">norm</a>;</td></tr>
<tr><th id="388">388</th><td>    }</td></tr>
<tr><th id="389">389</th><td></td></tr>
<tr><th id="390">390</th><td>    <em>double</em> <dfn class="local col7 decl" id="77axis_angle" title='axis_angle' data-type='double [3]' data-ref="77axis_angle">axis_angle</dfn>[<var>3</var>];</td></tr>
<tr><th id="391">391</th><td>    <em>double</em> <dfn class="local col8 decl" id="78round_trip" title='round_trip' data-type='double [4]' data-ref="78round_trip">round_trip</dfn>[<var>4</var>];</td></tr>
<tr><th id="392">392</th><td>    <a class="ref" href="../../include/ceres/rotation.h.html#_ZN5ceres21QuaternionToAngleAxisEPKT_PS0_" title='ceres::QuaternionToAngleAxis' data-ref="_ZN5ceres21QuaternionToAngleAxisEPKT_PS0_">QuaternionToAngleAxis</a>(<a class="local col3 ref" href="#73quaternion" title='quaternion' data-ref="73quaternion">quaternion</a>, <a class="local col7 ref" href="#77axis_angle" title='axis_angle' data-ref="77axis_angle">axis_angle</a>);</td></tr>
<tr><th id="393">393</th><td>    <a class="ref" href="../../include/ceres/rotation.h.html#_ZN5ceres21AngleAxisToQuaternionEPKT_PS0_" title='ceres::AngleAxisToQuaternion' data-ref="_ZN5ceres21AngleAxisToQuaternionEPKT_PS0_">AngleAxisToQuaternion</a>(<a class="local col7 ref" href="#77axis_angle" title='axis_angle' data-ref="77axis_angle">axis_angle</a>, <a class="local col8 ref" href="#78round_trip" title='round_trip' data-ref="78round_trip">round_trip</a>);</td></tr>
<tr><th id="394">394</th><td>    <a class="macro" href="gmock/gmock.h.html#9207" title="switch (0) case 0: default: if (const ::testing::AssertionResult gtest_ar = (::testing::internal::MakePredicateFormatterFromMatcher(IsNormalizedQuaternion())(&quot;round_trip&quot;, round_trip))) ; else return ::testing::internal::AssertHelper(::testing::TestPartResult::kFatalFailure, &quot;/home/yzf/code/ceres-solver/internal/ceres/rotation_test.cc&quot;, 394, gtest_ar.failure_message()) = ::testing::Message()" data-ref="_M/ASSERT_THAT">ASSERT_THAT</a>(<a class="local col8 ref" href="#78round_trip" title='round_trip' data-ref="78round_trip">round_trip</a>, <a class="ref" href="#71" title='ceres::internal::IsNormalizedQuaternion' data-ref="_ZN5ceres8internal22IsNormalizedQuaternionEv">IsNormalizedQuaternion</a>());</td></tr>
<tr><th id="395">395</th><td>    <a class="macro" href="gmock/gmock.h.html#9207" title="switch (0) case 0: default: if (const ::testing::AssertionResult gtest_ar = (::testing::internal::MakePredicateFormatterFromMatcher(IsNearQuaternion(quaternion))(&quot;round_trip&quot;, round_trip))) ; else return ::testing::internal::AssertHelper(::testing::TestPartResult::kFatalFailure, &quot;/home/yzf/code/ceres-solver/internal/ceres/rotation_test.cc&quot;, 395, gtest_ar.failure_message()) = ::testing::Message()" data-ref="_M/ASSERT_THAT">ASSERT_THAT</a>(<a class="local col8 ref" href="#78round_trip" title='round_trip' data-ref="78round_trip">round_trip</a>, <a class="ref" href="#91" title='ceres::internal::IsNearQuaternion' data-ref="_ZN5ceres8internal16IsNearQuaternionET_">IsNearQuaternion</a>(<a class="local col3 ref" href="#73quaternion" title='quaternion' data-ref="73quaternion">quaternion</a>));</td></tr>
<tr><th id="396">396</th><td>  }</td></tr>
<tr><th id="397">397</th><td>}</td></tr>
<tr><th id="398">398</th><td></td></tr>
<tr><th id="399">399</th><td><i>// Transforms a zero axis/angle to a rotation matrix.</i></td></tr>
<tr><th id="400">400</th><td><a class="macro" href="gtest/gtest.h.html#21153" title="class Rotation_ZeroAngleAxisToRotationMatrix_Test : public ::testing::Test { public: Rotation_ZeroAngleAxisToRotationMatrix_Test() {} private: virtual void TestBody(); static ::testing::TestInfo* const test_info_ __attribute__ ((unused)); Rotation_ZeroAngleAxisToRotationMatrix_Test(Rotation_ZeroAngleAxisToRotationMatrix_Test const &amp;); void operator=(Rotation_ZeroAngleAxisToRotationMatrix_Test const &amp;);};::testing::TestInfo* const Rotation_ZeroAngleAxisToRotationMatrix_Test ::test_info_ = ::testing::internal::MakeAndRegisterTestInfo( &quot;Rotation&quot;, &quot;ZeroAngleAxisToRotationMatrix&quot;, __null, __null, ::testing::internal::CodeLocation(&quot;/home/yzf/code/ceres-solver/internal/ceres/rotation_test.cc&quot;, 400), (::testing::internal::GetTestTypeId()), ::testing::Test::SetUpTestCase, ::testing::Test::TearDownTestCase, new ::testing::internal::TestFactoryImpl&lt; Rotation_ZeroAngleAxisToRotationMatrix_Test&gt;);void Rotation_ZeroAngleAxisToRotationMatrix_Test::TestBody()" data-ref="_M/TEST">TEST</a>(Rotation, ZeroAngleAxisToRotationMatrix) {</td></tr>
<tr><th id="401">401</th><td>  <em>double</em> <dfn class="local col9 decl" id="79axis_angle" title='axis_angle' data-type='double [3]' data-ref="79axis_angle">axis_angle</dfn>[<var>3</var>] = { <var>0</var>, <var>0</var>, <var>0</var> };</td></tr>
<tr><th id="402">402</th><td>  <em>double</em> <dfn class="local col0 decl" id="80matrix" title='matrix' data-type='double [9]' data-ref="80matrix">matrix</dfn>[<var>9</var>];</td></tr>
<tr><th id="403">403</th><td>  <em>double</em> <dfn class="local col1 decl" id="81expected" title='expected' data-type='double [9]' data-ref="81expected">expected</dfn>[<var>9</var>] = { <var>1</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>1</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>1</var> };</td></tr>
<tr><th id="404">404</th><td>  <a class="ref" href="../../include/ceres/rotation.h.html#_ZN5ceres25AngleAxisToRotationMatrixEPKT_PS0_" title='ceres::AngleAxisToRotationMatrix' data-ref="_ZN5ceres25AngleAxisToRotationMatrixEPKT_PS0_">AngleAxisToRotationMatrix</a>(<a class="local col9 ref" href="#79axis_angle" title='axis_angle' data-ref="79axis_angle">axis_angle</a>, <a class="local col0 ref" href="#80matrix" title='matrix' data-ref="80matrix">matrix</a>);</td></tr>
<tr><th id="405">405</th><td>  <a class="macro" href="gmock/gmock.h.html#9209" title="switch (0) case 0: default: if (const ::testing::AssertionResult gtest_ar = (::testing::internal::MakePredicateFormatterFromMatcher(IsOrthonormal())(&quot;matrix&quot;, matrix))) ; else ::testing::internal::AssertHelper(::testing::TestPartResult::kNonFatalFailure, &quot;/home/yzf/code/ceres-solver/internal/ceres/rotation_test.cc&quot;, 405, gtest_ar.failure_message()) = ::testing::Message()" data-ref="_M/EXPECT_THAT">EXPECT_THAT</a>(<a class="local col0 ref" href="#80matrix" title='matrix' data-ref="80matrix">matrix</a>, <a class="ref" href="#181" title='ceres::internal::IsOrthonormal' data-ref="_ZN5ceres8internal13IsOrthonormalEv">IsOrthonormal</a>());</td></tr>
<tr><th id="406">406</th><td>  <a class="macro" href="gmock/gmock.h.html#9209" title="switch (0) case 0: default: if (const ::testing::AssertionResult gtest_ar = (::testing::internal::MakePredicateFormatterFromMatcher(IsNear3x3Matrix(expected))(&quot;matrix&quot;, matrix))) ; else ::testing::internal::AssertHelper(::testing::TestPartResult::kNonFatalFailure, &quot;/home/yzf/code/ceres-solver/internal/ceres/rotation_test.cc&quot;, 406, gtest_ar.failure_message()) = ::testing::Message()" data-ref="_M/EXPECT_THAT">EXPECT_THAT</a>(<a class="local col0 ref" href="#80matrix" title='matrix' data-ref="80matrix">matrix</a>, <a class="ref" href="#210" title='ceres::internal::IsNear3x3Matrix' data-ref="_ZN5ceres8internal15IsNear3x3MatrixET_">IsNear3x3Matrix</a>(<a class="local col1 ref" href="#81expected" title='expected' data-ref="81expected">expected</a>));</td></tr>
<tr><th id="407">407</th><td>}</td></tr>
<tr><th id="408">408</th><td></td></tr>
<tr><th id="409">409</th><td><a class="macro" href="gtest/gtest.h.html#21153" title="class Rotation_NearZeroAngleAxisToRotationMatrix_Test : public ::testing::Test { public: Rotation_NearZeroAngleAxisToRotationMatrix_Test() {} private: virtual void TestBody(); static ::testing::TestInfo* const test_info_ __attribute__ ((unused)); Rotation_NearZeroAngleAxisToRotationMatrix_Test(Rotation_NearZeroAngleAxisToRotationMatrix_Test const &amp;); void operator=(Rotation_NearZeroAngleAxisToRotationMatrix_Test const &amp;);};::testing::TestInfo* const Rotation_NearZeroAngleAxisToRotationMatrix_Test ::test_info_ = ::testing::internal::MakeAndRegisterTestInfo( &quot;Rotation&quot;, &quot;NearZeroAngleAxisToRotationMatrix&quot;, __null, __null, ::testing::internal::CodeLocation(&quot;/home/yzf/code/ceres-solver/internal/ceres/rotation_test.cc&quot;, 409), (::testing::internal::GetTestTypeId()), ::testing::Test::SetUpTestCase, ::testing::Test::TearDownTestCase, new ::testing::internal::TestFactoryImpl&lt; Rotation_NearZeroAngleAxisToRotationMatrix_Test&gt;);void Rotation_NearZeroAngleAxisToRotationMatrix_Test::TestBody()" data-ref="_M/TEST">TEST</a>(Rotation, NearZeroAngleAxisToRotationMatrix) {</td></tr>
<tr><th id="410">410</th><td>  <em>double</em> <dfn class="local col2 decl" id="82axis_angle" title='axis_angle' data-type='double [3]' data-ref="82axis_angle">axis_angle</dfn>[<var>3</var>] = { <var>1e-24</var>, <var>2e-24</var>, <var>3e-24</var> };</td></tr>
<tr><th id="411">411</th><td>  <em>double</em> <dfn class="local col3 decl" id="83matrix" title='matrix' data-type='double [9]' data-ref="83matrix">matrix</dfn>[<var>9</var>];</td></tr>
<tr><th id="412">412</th><td>  <em>double</em> <dfn class="local col4 decl" id="84expected" title='expected' data-type='double [9]' data-ref="84expected">expected</dfn>[<var>9</var>] = { <var>1</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>1</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>1</var> };</td></tr>
<tr><th id="413">413</th><td>  <a class="ref" href="../../include/ceres/rotation.h.html#_ZN5ceres25AngleAxisToRotationMatrixEPKT_PS0_" title='ceres::AngleAxisToRotationMatrix' data-ref="_ZN5ceres25AngleAxisToRotationMatrixEPKT_PS0_">AngleAxisToRotationMatrix</a>(<a class="local col2 ref" href="#82axis_angle" title='axis_angle' data-ref="82axis_angle">axis_angle</a>, <a class="local col3 ref" href="#83matrix" title='matrix' data-ref="83matrix">matrix</a>);</td></tr>
<tr><th id="414">414</th><td>  <a class="macro" href="gmock/gmock.h.html#9209" title="switch (0) case 0: default: if (const ::testing::AssertionResult gtest_ar = (::testing::internal::MakePredicateFormatterFromMatcher(IsOrthonormal())(&quot;matrix&quot;, matrix))) ; else ::testing::internal::AssertHelper(::testing::TestPartResult::kNonFatalFailure, &quot;/home/yzf/code/ceres-solver/internal/ceres/rotation_test.cc&quot;, 414, gtest_ar.failure_message()) = ::testing::Message()" data-ref="_M/EXPECT_THAT">EXPECT_THAT</a>(<a class="local col3 ref" href="#83matrix" title='matrix' data-ref="83matrix">matrix</a>, <a class="ref" href="#181" title='ceres::internal::IsOrthonormal' data-ref="_ZN5ceres8internal13IsOrthonormalEv">IsOrthonormal</a>());</td></tr>
<tr><th id="415">415</th><td>  <a class="macro" href="gmock/gmock.h.html#9209" title="switch (0) case 0: default: if (const ::testing::AssertionResult gtest_ar = (::testing::internal::MakePredicateFormatterFromMatcher(IsNear3x3Matrix(expected))(&quot;matrix&quot;, matrix))) ; else ::testing::internal::AssertHelper(::testing::TestPartResult::kNonFatalFailure, &quot;/home/yzf/code/ceres-solver/internal/ceres/rotation_test.cc&quot;, 415, gtest_ar.failure_message()) = ::testing::Message()" data-ref="_M/EXPECT_THAT">EXPECT_THAT</a>(<a class="local col3 ref" href="#83matrix" title='matrix' data-ref="83matrix">matrix</a>, <a class="ref" href="#210" title='ceres::internal::IsNear3x3Matrix' data-ref="_ZN5ceres8internal15IsNear3x3MatrixET_">IsNear3x3Matrix</a>(<a class="local col4 ref" href="#84expected" title='expected' data-ref="84expected">expected</a>));</td></tr>
<tr><th id="416">416</th><td>}</td></tr>
<tr><th id="417">417</th><td></td></tr>
<tr><th id="418">418</th><td><i>// Transforms a rotation by pi/2 around X to a rotation matrix and back.</i></td></tr>
<tr><th id="419">419</th><td><a class="macro" href="gtest/gtest.h.html#21153" title="class Rotation_XRotationToRotationMatrix_Test : public ::testing::Test { public: Rotation_XRotationToRotationMatrix_Test() {} private: virtual void TestBody(); static ::testing::TestInfo* const test_info_ __attribute__ ((unused)); Rotation_XRotationToRotationMatrix_Test(Rotation_XRotationToRotationMatrix_Test const &amp;); void operator=(Rotation_XRotationToRotationMatrix_Test const &amp;);};::testing::TestInfo* const Rotation_XRotationToRotationMatrix_Test ::test_info_ = ::testing::internal::MakeAndRegisterTestInfo( &quot;Rotation&quot;, &quot;XRotationToRotationMatrix&quot;, __null, __null, ::testing::internal::CodeLocation(&quot;/home/yzf/code/ceres-solver/internal/ceres/rotation_test.cc&quot;, 419), (::testing::internal::GetTestTypeId()), ::testing::Test::SetUpTestCase, ::testing::Test::TearDownTestCase, new ::testing::internal::TestFactoryImpl&lt; Rotation_XRotationToRotationMatrix_Test&gt;);void Rotation_XRotationToRotationMatrix_Test::TestBody()" data-ref="_M/TEST">TEST</a>(Rotation, XRotationToRotationMatrix) {</td></tr>
<tr><th id="420">420</th><td>  <em>double</em> <dfn class="local col5 decl" id="85axis_angle" title='axis_angle' data-type='double [3]' data-ref="85axis_angle">axis_angle</dfn>[<var>3</var>] = { <a class="tu ref" href="#ceres::internal::kPi" title='ceres::internal::kPi' data-use='r' data-ref="ceres::internal::kPi">kPi</a> / <var>2</var>, <var>0</var>, <var>0</var> };</td></tr>
<tr><th id="421">421</th><td>  <em>double</em> <dfn class="local col6 decl" id="86matrix" title='matrix' data-type='double [9]' data-ref="86matrix">matrix</dfn>[<var>9</var>];</td></tr>
<tr><th id="422">422</th><td>  <i>// The rotation matrices are stored column-major.</i></td></tr>
<tr><th id="423">423</th><td>  <em>double</em> <dfn class="local col7 decl" id="87expected" title='expected' data-type='double [9]' data-ref="87expected">expected</dfn>[<var>9</var>] = { <var>1</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>1</var>, <var>0</var>, -<var>1</var>, <var>0</var> };</td></tr>
<tr><th id="424">424</th><td>  <a class="ref" href="../../include/ceres/rotation.h.html#_ZN5ceres25AngleAxisToRotationMatrixEPKT_PS0_" title='ceres::AngleAxisToRotationMatrix' data-ref="_ZN5ceres25AngleAxisToRotationMatrixEPKT_PS0_">AngleAxisToRotationMatrix</a>(<a class="local col5 ref" href="#85axis_angle" title='axis_angle' data-ref="85axis_angle">axis_angle</a>, <a class="local col6 ref" href="#86matrix" title='matrix' data-ref="86matrix">matrix</a>);</td></tr>
<tr><th id="425">425</th><td>  <a class="macro" href="gmock/gmock.h.html#9209" title="switch (0) case 0: default: if (const ::testing::AssertionResult gtest_ar = (::testing::internal::MakePredicateFormatterFromMatcher(IsOrthonormal())(&quot;matrix&quot;, matrix))) ; else ::testing::internal::AssertHelper(::testing::TestPartResult::kNonFatalFailure, &quot;/home/yzf/code/ceres-solver/internal/ceres/rotation_test.cc&quot;, 425, gtest_ar.failure_message()) = ::testing::Message()" data-ref="_M/EXPECT_THAT">EXPECT_THAT</a>(<a class="local col6 ref" href="#86matrix" title='matrix' data-ref="86matrix">matrix</a>, <a class="ref" href="#181" title='ceres::internal::IsOrthonormal' data-ref="_ZN5ceres8internal13IsOrthonormalEv">IsOrthonormal</a>());</td></tr>
<tr><th id="426">426</th><td>  <a class="macro" href="gmock/gmock.h.html#9209" title="switch (0) case 0: default: if (const ::testing::AssertionResult gtest_ar = (::testing::internal::MakePredicateFormatterFromMatcher(IsNear3x3Matrix(expected))(&quot;matrix&quot;, matrix))) ; else ::testing::internal::AssertHelper(::testing::TestPartResult::kNonFatalFailure, &quot;/home/yzf/code/ceres-solver/internal/ceres/rotation_test.cc&quot;, 426, gtest_ar.failure_message()) = ::testing::Message()" data-ref="_M/EXPECT_THAT">EXPECT_THAT</a>(<a class="local col6 ref" href="#86matrix" title='matrix' data-ref="86matrix">matrix</a>, <a class="ref" href="#210" title='ceres::internal::IsNear3x3Matrix' data-ref="_ZN5ceres8internal15IsNear3x3MatrixET_">IsNear3x3Matrix</a>(<a class="local col7 ref" href="#87expected" title='expected' data-ref="87expected">expected</a>));</td></tr>
<tr><th id="427">427</th><td>  <em>double</em> <dfn class="local col8 decl" id="88round_trip" title='round_trip' data-type='double [3]' data-ref="88round_trip">round_trip</dfn>[<var>3</var>];</td></tr>
<tr><th id="428">428</th><td>  <a class="ref" href="../../include/ceres/rotation.h.html#_ZN5ceres25RotationMatrixToAngleAxisEPKT_PS0_" title='ceres::RotationMatrixToAngleAxis' data-ref="_ZN5ceres25RotationMatrixToAngleAxisEPKT_PS0_">RotationMatrixToAngleAxis</a>(<a class="local col6 ref" href="#86matrix" title='matrix' data-ref="86matrix">matrix</a>, <a class="local col8 ref" href="#88round_trip" title='round_trip' data-ref="88round_trip">round_trip</a>);</td></tr>
<tr><th id="429">429</th><td>  <a class="macro" href="gmock/gmock.h.html#9209" title="switch (0) case 0: default: if (const ::testing::AssertionResult gtest_ar = (::testing::internal::MakePredicateFormatterFromMatcher(IsNearAngleAxis(axis_angle))(&quot;round_trip&quot;, round_trip))) ; else ::testing::internal::AssertHelper(::testing::TestPartResult::kNonFatalFailure, &quot;/home/yzf/code/ceres-solver/internal/ceres/rotation_test.cc&quot;, 429, gtest_ar.failure_message()) = ::testing::Message()" data-ref="_M/EXPECT_THAT">EXPECT_THAT</a>(<a class="local col8 ref" href="#88round_trip" title='round_trip' data-ref="88round_trip">round_trip</a>, <a class="ref" href="#140" title='ceres::internal::IsNearAngleAxis' data-ref="_ZN5ceres8internal15IsNearAngleAxisET_">IsNearAngleAxis</a>(<a class="local col5 ref" href="#85axis_angle" title='axis_angle' data-ref="85axis_angle">axis_angle</a>));</td></tr>
<tr><th id="430">430</th><td>}</td></tr>
<tr><th id="431">431</th><td></td></tr>
<tr><th id="432">432</th><td><i>// Transforms an axis angle that rotates by pi about the Y axis to a</i></td></tr>
<tr><th id="433">433</th><td><i>// rotation matrix and back.</i></td></tr>
<tr><th id="434">434</th><td><a class="macro" href="gtest/gtest.h.html#21153" title="class Rotation_YRotationToRotationMatrix_Test : public ::testing::Test { public: Rotation_YRotationToRotationMatrix_Test() {} private: virtual void TestBody(); static ::testing::TestInfo* const test_info_ __attribute__ ((unused)); Rotation_YRotationToRotationMatrix_Test(Rotation_YRotationToRotationMatrix_Test const &amp;); void operator=(Rotation_YRotationToRotationMatrix_Test const &amp;);};::testing::TestInfo* const Rotation_YRotationToRotationMatrix_Test ::test_info_ = ::testing::internal::MakeAndRegisterTestInfo( &quot;Rotation&quot;, &quot;YRotationToRotationMatrix&quot;, __null, __null, ::testing::internal::CodeLocation(&quot;/home/yzf/code/ceres-solver/internal/ceres/rotation_test.cc&quot;, 434), (::testing::internal::GetTestTypeId()), ::testing::Test::SetUpTestCase, ::testing::Test::TearDownTestCase, new ::testing::internal::TestFactoryImpl&lt; Rotation_YRotationToRotationMatrix_Test&gt;);void Rotation_YRotationToRotationMatrix_Test::TestBody()" data-ref="_M/TEST">TEST</a>(Rotation, YRotationToRotationMatrix) {</td></tr>
<tr><th id="435">435</th><td>  <em>double</em> <dfn class="local col9 decl" id="89axis_angle" title='axis_angle' data-type='double [3]' data-ref="89axis_angle">axis_angle</dfn>[<var>3</var>] = { <var>0</var>, <a class="tu ref" href="#ceres::internal::kPi" title='ceres::internal::kPi' data-use='r' data-ref="ceres::internal::kPi">kPi</a>, <var>0</var> };</td></tr>
<tr><th id="436">436</th><td>  <em>double</em> <dfn class="local col0 decl" id="90matrix" title='matrix' data-type='double [9]' data-ref="90matrix">matrix</dfn>[<var>9</var>];</td></tr>
<tr><th id="437">437</th><td>  <em>double</em> <dfn class="local col1 decl" id="91expected" title='expected' data-type='double [9]' data-ref="91expected">expected</dfn>[<var>9</var>] = { -<var>1</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>1</var>, <var>0</var>, <var>0</var>, <var>0</var>, -<var>1</var> };</td></tr>
<tr><th id="438">438</th><td>  <a class="ref" href="../../include/ceres/rotation.h.html#_ZN5ceres25AngleAxisToRotationMatrixEPKT_PS0_" title='ceres::AngleAxisToRotationMatrix' data-ref="_ZN5ceres25AngleAxisToRotationMatrixEPKT_PS0_">AngleAxisToRotationMatrix</a>(<a class="local col9 ref" href="#89axis_angle" title='axis_angle' data-ref="89axis_angle">axis_angle</a>, <a class="local col0 ref" href="#90matrix" title='matrix' data-ref="90matrix">matrix</a>);</td></tr>
<tr><th id="439">439</th><td>  <a class="macro" href="gmock/gmock.h.html#9209" title="switch (0) case 0: default: if (const ::testing::AssertionResult gtest_ar = (::testing::internal::MakePredicateFormatterFromMatcher(IsOrthonormal())(&quot;matrix&quot;, matrix))) ; else ::testing::internal::AssertHelper(::testing::TestPartResult::kNonFatalFailure, &quot;/home/yzf/code/ceres-solver/internal/ceres/rotation_test.cc&quot;, 439, gtest_ar.failure_message()) = ::testing::Message()" data-ref="_M/EXPECT_THAT">EXPECT_THAT</a>(<a class="local col0 ref" href="#90matrix" title='matrix' data-ref="90matrix">matrix</a>, <a class="ref" href="#181" title='ceres::internal::IsOrthonormal' data-ref="_ZN5ceres8internal13IsOrthonormalEv">IsOrthonormal</a>());</td></tr>
<tr><th id="440">440</th><td>  <a class="macro" href="gmock/gmock.h.html#9209" title="switch (0) case 0: default: if (const ::testing::AssertionResult gtest_ar = (::testing::internal::MakePredicateFormatterFromMatcher(IsNear3x3Matrix(expected))(&quot;matrix&quot;, matrix))) ; else ::testing::internal::AssertHelper(::testing::TestPartResult::kNonFatalFailure, &quot;/home/yzf/code/ceres-solver/internal/ceres/rotation_test.cc&quot;, 440, gtest_ar.failure_message()) = ::testing::Message()" data-ref="_M/EXPECT_THAT">EXPECT_THAT</a>(<a class="local col0 ref" href="#90matrix" title='matrix' data-ref="90matrix">matrix</a>, <a class="ref" href="#210" title='ceres::internal::IsNear3x3Matrix' data-ref="_ZN5ceres8internal15IsNear3x3MatrixET_">IsNear3x3Matrix</a>(<a class="local col1 ref" href="#91expected" title='expected' data-ref="91expected">expected</a>));</td></tr>
<tr><th id="441">441</th><td></td></tr>
<tr><th id="442">442</th><td>  <em>double</em> <dfn class="local col2 decl" id="92round_trip" title='round_trip' data-type='double [3]' data-ref="92round_trip">round_trip</dfn>[<var>3</var>];</td></tr>
<tr><th id="443">443</th><td>  <a class="ref" href="../../include/ceres/rotation.h.html#_ZN5ceres25RotationMatrixToAngleAxisEPKT_PS0_" title='ceres::RotationMatrixToAngleAxis' data-ref="_ZN5ceres25RotationMatrixToAngleAxisEPKT_PS0_">RotationMatrixToAngleAxis</a>(<a class="local col0 ref" href="#90matrix" title='matrix' data-ref="90matrix">matrix</a>, <a class="local col2 ref" href="#92round_trip" title='round_trip' data-ref="92round_trip">round_trip</a>);</td></tr>
<tr><th id="444">444</th><td>  <a class="macro" href="gmock/gmock.h.html#9209" title="switch (0) case 0: default: if (const ::testing::AssertionResult gtest_ar = (::testing::internal::MakePredicateFormatterFromMatcher(IsNearAngleAxis(axis_angle))(&quot;round_trip&quot;, round_trip))) ; else ::testing::internal::AssertHelper(::testing::TestPartResult::kNonFatalFailure, &quot;/home/yzf/code/ceres-solver/internal/ceres/rotation_test.cc&quot;, 444, gtest_ar.failure_message()) = ::testing::Message()" data-ref="_M/EXPECT_THAT">EXPECT_THAT</a>(<a class="local col2 ref" href="#92round_trip" title='round_trip' data-ref="92round_trip">round_trip</a>, <a class="ref" href="#140" title='ceres::internal::IsNearAngleAxis' data-ref="_ZN5ceres8internal15IsNearAngleAxisET_">IsNearAngleAxis</a>(<a class="local col9 ref" href="#89axis_angle" title='axis_angle' data-ref="89axis_angle">axis_angle</a>));</td></tr>
<tr><th id="445">445</th><td>}</td></tr>
<tr><th id="446">446</th><td></td></tr>
<tr><th id="447">447</th><td><a class="macro" href="gtest/gtest.h.html#21153" title="class Rotation_NearPiAngleAxisRoundTrip_Test : public ::testing::Test { public: Rotation_NearPiAngleAxisRoundTrip_Test() {} private: virtual void TestBody(); static ::testing::TestInfo* const test_info_ __attribute__ ((unused)); Rotation_NearPiAngleAxisRoundTrip_Test(Rotation_NearPiAngleAxisRoundTrip_Test const &amp;); void operator=(Rotation_NearPiAngleAxisRoundTrip_Test const &amp;);};::testing::TestInfo* const Rotation_NearPiAngleAxisRoundTrip_Test ::test_info_ = ::testing::internal::MakeAndRegisterTestInfo( &quot;Rotation&quot;, &quot;NearPiAngleAxisRoundTrip&quot;, __null, __null, ::testing::internal::CodeLocation(&quot;/home/yzf/code/ceres-solver/internal/ceres/rotation_test.cc&quot;, 447), (::testing::internal::GetTestTypeId()), ::testing::Test::SetUpTestCase, ::testing::Test::TearDownTestCase, new ::testing::internal::TestFactoryImpl&lt; Rotation_NearPiAngleAxisRoundTrip_Test&gt;);void Rotation_NearPiAngleAxisRoundTrip_Test::TestBody()" data-ref="_M/TEST">TEST</a>(Rotation, NearPiAngleAxisRoundTrip) {</td></tr>
<tr><th id="448">448</th><td>  <em>double</em> <dfn class="local col3 decl" id="93in_axis_angle" title='in_axis_angle' data-type='double [3]' data-ref="93in_axis_angle">in_axis_angle</dfn>[<var>3</var>];</td></tr>
<tr><th id="449">449</th><td>  <em>double</em> <dfn class="local col4 decl" id="94matrix" title='matrix' data-type='double [9]' data-ref="94matrix">matrix</dfn>[<var>9</var>];</td></tr>
<tr><th id="450">450</th><td>  <em>double</em> <dfn class="local col5 decl" id="95out_axis_angle" title='out_axis_angle' data-type='double [3]' data-ref="95out_axis_angle">out_axis_angle</dfn>[<var>3</var>];</td></tr>
<tr><th id="451">451</th><td></td></tr>
<tr><th id="452">452</th><td>  <a class="ref" href="../../../include/stdlib.h.html#srand" title='srand' data-ref="srand">srand</a>(<var>5</var>);</td></tr>
<tr><th id="453">453</th><td>  <b>for</b> (<em>int</em> <dfn class="local col6 decl" id="96i" title='i' data-type='int' data-ref="96i">i</dfn> = <var>0</var>; <a class="local col6 ref" href="#96i" title='i' data-ref="96i">i</a> &lt; <a class="tu ref" href="#ceres::internal::kNumTrials" title='ceres::internal::kNumTrials' data-use='r' data-ref="ceres::internal::kNumTrials">kNumTrials</a>; <a class="local col6 ref" href="#96i" title='i' data-ref="96i">i</a>++) {</td></tr>
<tr><th id="454">454</th><td>    <i>// Make an axis by choosing three random numbers in [-1, 1) and</i></td></tr>
<tr><th id="455">455</th><td><i>    // normalizing.</i></td></tr>
<tr><th id="456">456</th><td>    <em>double</em> <dfn class="local col7 decl" id="97norm" title='norm' data-type='double' data-ref="97norm">norm</dfn> = <var>0</var>;</td></tr>
<tr><th id="457">457</th><td>    <b>for</b> (<em>int</em> <dfn class="local col8 decl" id="98i" title='i' data-type='int' data-ref="98i">i</dfn> = <var>0</var>; <a class="local col8 ref" href="#98i" title='i' data-ref="98i">i</a> &lt; <var>3</var>; <a class="local col8 ref" href="#98i" title='i' data-ref="98i">i</a>++) {</td></tr>
<tr><th id="458">458</th><td>      <a class="local col3 ref" href="#93in_axis_angle" title='in_axis_angle' data-ref="93in_axis_angle">in_axis_angle</a>[<a class="local col8 ref" href="#98i" title='i' data-ref="98i">i</a>] = <a class="ref" href="#_ZN5ceres8internal10RandDoubleEv" title='ceres::internal::RandDouble' data-ref="_ZN5ceres8internal10RandDoubleEv">RandDouble</a>() * <var>2</var> - <var>1</var>;</td></tr>
<tr><th id="459">459</th><td>      <a class="local col7 ref" href="#97norm" title='norm' data-ref="97norm">norm</a> += <a class="local col3 ref" href="#93in_axis_angle" title='in_axis_angle' data-ref="93in_axis_angle">in_axis_angle</a>[<a class="local col8 ref" href="#98i" title='i' data-ref="98i">i</a>] * <a class="local col3 ref" href="#93in_axis_angle" title='in_axis_angle' data-ref="93in_axis_angle">in_axis_angle</a>[<a class="local col8 ref" href="#98i" title='i' data-ref="98i">i</a>];</td></tr>
<tr><th id="460">460</th><td>    }</td></tr>
<tr><th id="461">461</th><td>    <a class="local col7 ref" href="#97norm" title='norm' data-ref="97norm">norm</a> = <a class="ref" href="../../include/ceres/jet.h.html#_ZN5ceres4sqrtEd" title='ceres::sqrt' data-ref="_ZN5ceres4sqrtEd">sqrt</a>(<a class="local col7 ref" href="#97norm" title='norm' data-ref="97norm">norm</a>);</td></tr>
<tr><th id="462">462</th><td></td></tr>
<tr><th id="463">463</th><td>    <i>// Angle in [pi - kMaxSmallAngle, pi).</i></td></tr>
<tr><th id="464">464</th><td>    <em>const</em> <em>double</em> <dfn class="local col9 decl" id="99kMaxSmallAngle" title='kMaxSmallAngle' data-type='const double' data-ref="99kMaxSmallAngle">kMaxSmallAngle</dfn> = <var>1e-8</var>;</td></tr>
<tr><th id="465">465</th><td>    <em>double</em> <dfn class="local col0 decl" id="100theta" title='theta' data-type='double' data-ref="100theta">theta</dfn> = <a class="tu ref" href="#ceres::internal::kPi" title='ceres::internal::kPi' data-use='r' data-ref="ceres::internal::kPi">kPi</a> - <a class="local col9 ref" href="#99kMaxSmallAngle" title='kMaxSmallAngle' data-ref="99kMaxSmallAngle">kMaxSmallAngle</a> * <a class="ref" href="#_ZN5ceres8internal10RandDoubleEv" title='ceres::internal::RandDouble' data-ref="_ZN5ceres8internal10RandDoubleEv">RandDouble</a>();</td></tr>
<tr><th id="466">466</th><td></td></tr>
<tr><th id="467">467</th><td>    <b>for</b> (<em>int</em> <dfn class="local col1 decl" id="101i" title='i' data-type='int' data-ref="101i">i</dfn> = <var>0</var>; <a class="local col1 ref" href="#101i" title='i' data-ref="101i">i</a> &lt; <var>3</var>; <a class="local col1 ref" href="#101i" title='i' data-ref="101i">i</a>++) {</td></tr>
<tr><th id="468">468</th><td>      <a class="local col3 ref" href="#93in_axis_angle" title='in_axis_angle' data-ref="93in_axis_angle">in_axis_angle</a>[<a class="local col1 ref" href="#101i" title='i' data-ref="101i">i</a>] *= (<a class="local col0 ref" href="#100theta" title='theta' data-ref="100theta">theta</a> / <a class="local col7 ref" href="#97norm" title='norm' data-ref="97norm">norm</a>);</td></tr>
<tr><th id="469">469</th><td>    }</td></tr>
<tr><th id="470">470</th><td>    <a class="ref" href="../../include/ceres/rotation.h.html#_ZN5ceres25AngleAxisToRotationMatrixEPKT_PS0_" title='ceres::AngleAxisToRotationMatrix' data-ref="_ZN5ceres25AngleAxisToRotationMatrixEPKT_PS0_">AngleAxisToRotationMatrix</a>(<a class="local col3 ref" href="#93in_axis_angle" title='in_axis_angle' data-ref="93in_axis_angle">in_axis_angle</a>, <a class="local col4 ref" href="#94matrix" title='matrix' data-ref="94matrix">matrix</a>);</td></tr>
<tr><th id="471">471</th><td>    <a class="ref" href="../../include/ceres/rotation.h.html#_ZN5ceres25RotationMatrixToAngleAxisEPKT_PS0_" title='ceres::RotationMatrixToAngleAxis' data-ref="_ZN5ceres25RotationMatrixToAngleAxisEPKT_PS0_">RotationMatrixToAngleAxis</a>(<a class="local col4 ref" href="#94matrix" title='matrix' data-ref="94matrix">matrix</a>, <a class="local col5 ref" href="#95out_axis_angle" title='out_axis_angle' data-ref="95out_axis_angle">out_axis_angle</a>);</td></tr>
<tr><th id="472">472</th><td>    <a class="macro" href="gmock/gmock.h.html#9209" title="switch (0) case 0: default: if (const ::testing::AssertionResult gtest_ar = (::testing::internal::MakePredicateFormatterFromMatcher(IsNearAngleAxis(out_axis_angle))(&quot;in_axis_angle&quot;, in_axis_angle))) ; else ::testing::internal::AssertHelper(::testing::TestPartResult::kNonFatalFailure, &quot;/home/yzf/code/ceres-solver/internal/ceres/rotation_test.cc&quot;, 472, gtest_ar.failure_message()) = ::testing::Message()" data-ref="_M/EXPECT_THAT">EXPECT_THAT</a>(<a class="local col3 ref" href="#93in_axis_angle" title='in_axis_angle' data-ref="93in_axis_angle">in_axis_angle</a>, <a class="ref" href="#140" title='ceres::internal::IsNearAngleAxis' data-ref="_ZN5ceres8internal15IsNearAngleAxisET_">IsNearAngleAxis</a>(<a class="local col5 ref" href="#95out_axis_angle" title='out_axis_angle' data-ref="95out_axis_angle">out_axis_angle</a>));</td></tr>
<tr><th id="473">473</th><td>  }</td></tr>
<tr><th id="474">474</th><td>}</td></tr>
<tr><th id="475">475</th><td></td></tr>
<tr><th id="476">476</th><td><a class="macro" href="gtest/gtest.h.html#21153" title="class Rotation_AtPiAngleAxisRoundTrip_Test : public ::testing::Test { public: Rotation_AtPiAngleAxisRoundTrip_Test() {} private: virtual void TestBody(); static ::testing::TestInfo* const test_info_ __attribute__ ((unused)); Rotation_AtPiAngleAxisRoundTrip_Test(Rotation_AtPiAngleAxisRoundTrip_Test const &amp;); void operator=(Rotation_AtPiAngleAxisRoundTrip_Test const &amp;);};::testing::TestInfo* const Rotation_AtPiAngleAxisRoundTrip_Test ::test_info_ = ::testing::internal::MakeAndRegisterTestInfo( &quot;Rotation&quot;, &quot;AtPiAngleAxisRoundTrip&quot;, __null, __null, ::testing::internal::CodeLocation(&quot;/home/yzf/code/ceres-solver/internal/ceres/rotation_test.cc&quot;, 476), (::testing::internal::GetTestTypeId()), ::testing::Test::SetUpTestCase, ::testing::Test::TearDownTestCase, new ::testing::internal::TestFactoryImpl&lt; Rotation_AtPiAngleAxisRoundTrip_Test&gt;);void Rotation_AtPiAngleAxisRoundTrip_Test::TestBody()" data-ref="_M/TEST">TEST</a>(Rotation, AtPiAngleAxisRoundTrip) {</td></tr>
<tr><th id="477">477</th><td>  <i>// A rotation of kPi about the X axis;</i></td></tr>
<tr><th id="478">478</th><td>  <em>static</em> <em>const</em> <em>double</em> <dfn class="local col2 decl" id="102kMatrix" title='kMatrix' data-type='const double [3][3]' data-ref="102kMatrix">kMatrix</dfn>[<var>3</var>][<var>3</var>] = {</td></tr>
<tr><th id="479">479</th><td>    {<var>1.0</var>,  <var>0.0</var>,  <var>0.0</var>},</td></tr>
<tr><th id="480">480</th><td>    {<var>0.0</var>,  -<var>1.0</var>,  <var>0.0</var>},</td></tr>
<tr><th id="481">481</th><td>    {<var>0.0</var>,  <var>0.0</var>,  -<var>1.0</var>}</td></tr>
<tr><th id="482">482</th><td>  };</td></tr>
<tr><th id="483">483</th><td></td></tr>
<tr><th id="484">484</th><td>  <em>double</em> <dfn class="local col3 decl" id="103in_matrix" title='in_matrix' data-type='double [9]' data-ref="103in_matrix">in_matrix</dfn>[<var>9</var>];</td></tr>
<tr><th id="485">485</th><td>  <i>// Fill it from kMatrix in col-major order.</i></td></tr>
<tr><th id="486">486</th><td>  <b>for</b> (<em>int</em> <dfn class="local col4 decl" id="104j" title='j' data-type='int' data-ref="104j">j</dfn> = <var>0</var>, <dfn class="local col5 decl" id="105k" title='k' data-type='int' data-ref="105k">k</dfn> = <var>0</var>; <a class="local col4 ref" href="#104j" title='j' data-ref="104j">j</a> &lt; <var>3</var>; ++<a class="local col4 ref" href="#104j" title='j' data-ref="104j">j</a>) {</td></tr>
<tr><th id="487">487</th><td>     <b>for</b> (<em>int</em> <dfn class="local col6 decl" id="106i" title='i' data-type='int' data-ref="106i">i</dfn> = <var>0</var>; <a class="local col6 ref" href="#106i" title='i' data-ref="106i">i</a> &lt; <var>3</var>; ++<a class="local col6 ref" href="#106i" title='i' data-ref="106i">i</a>, ++<a class="local col5 ref" href="#105k" title='k' data-ref="105k">k</a>) {</td></tr>
<tr><th id="488">488</th><td>       <a class="local col3 ref" href="#103in_matrix" title='in_matrix' data-ref="103in_matrix">in_matrix</a>[<a class="local col5 ref" href="#105k" title='k' data-ref="105k">k</a>] = <a class="local col2 ref" href="#102kMatrix" title='kMatrix' data-ref="102kMatrix">kMatrix</a>[<a class="local col6 ref" href="#106i" title='i' data-ref="106i">i</a>][<a class="local col4 ref" href="#104j" title='j' data-ref="104j">j</a>];</td></tr>
<tr><th id="489">489</th><td>     }</td></tr>
<tr><th id="490">490</th><td>  }</td></tr>
<tr><th id="491">491</th><td></td></tr>
<tr><th id="492">492</th><td>  <em>const</em> <em>double</em> <dfn class="local col7 decl" id="107expected_axis_angle" title='expected_axis_angle' data-type='const double [3]' data-ref="107expected_axis_angle">expected_axis_angle</dfn>[<var>3</var>] = { <a class="tu ref" href="#ceres::internal::kPi" title='ceres::internal::kPi' data-use='r' data-ref="ceres::internal::kPi">kPi</a>, <var>0</var>, <var>0</var> };</td></tr>
<tr><th id="493">493</th><td></td></tr>
<tr><th id="494">494</th><td>  <em>double</em> <dfn class="local col8 decl" id="108out_matrix" title='out_matrix' data-type='double [9]' data-ref="108out_matrix">out_matrix</dfn>[<var>9</var>];</td></tr>
<tr><th id="495">495</th><td>  <em>double</em> <dfn class="local col9 decl" id="109axis_angle" title='axis_angle' data-type='double [3]' data-ref="109axis_angle">axis_angle</dfn>[<var>3</var>];</td></tr>
<tr><th id="496">496</th><td>  <a class="ref" href="../../include/ceres/rotation.h.html#_ZN5ceres25RotationMatrixToAngleAxisEPKT_PS0_" title='ceres::RotationMatrixToAngleAxis' data-ref="_ZN5ceres25RotationMatrixToAngleAxisEPKT_PS0_">RotationMatrixToAngleAxis</a>(<a class="local col3 ref" href="#103in_matrix" title='in_matrix' data-ref="103in_matrix">in_matrix</a>, <a class="local col9 ref" href="#109axis_angle" title='axis_angle' data-ref="109axis_angle">axis_angle</a>);</td></tr>
<tr><th id="497">497</th><td>  <a class="ref" href="../../include/ceres/rotation.h.html#_ZN5ceres25AngleAxisToRotationMatrixEPKT_PS0_" title='ceres::AngleAxisToRotationMatrix' data-ref="_ZN5ceres25AngleAxisToRotationMatrixEPKT_PS0_">AngleAxisToRotationMatrix</a>(<a class="local col9 ref" href="#109axis_angle" title='axis_angle' data-ref="109axis_angle">axis_angle</a>, <a class="local col8 ref" href="#108out_matrix" title='out_matrix' data-ref="108out_matrix">out_matrix</a>);</td></tr>
<tr><th id="498">498</th><td></td></tr>
<tr><th id="499">499</th><td>  <a class="macro" href="../../../include/glog/logging.h.html#483" title="google::LogMessage( &quot;/home/yzf/code/ceres-solver/internal/ceres/rotation_test.cc&quot;, 499).stream()" data-ref="_M/LOG">LOG</a>(INFO) <a class="ref" href="../../../include/c++/4.8/ostream.html#_ZStlsRSt13basic_ostreamIcT_EPKc" title='std::operator&lt;&lt;' data-ref="_ZStlsRSt13basic_ostreamIcT_EPKc">&lt;&lt;</a> <q>"AngleAxis = "</q> <a class="ref" href="../../../include/c++/4.8/ostream.html#_ZNSt13basic_ostreamlsEd" title='std::basic_ostream::operator&lt;&lt;' data-ref="_ZNSt13basic_ostreamlsEd">&lt;&lt;</a> <a class="local col9 ref" href="#109axis_angle" title='axis_angle' data-ref="109axis_angle">axis_angle</a>[<var>0</var>] <a class="ref" href="../../../include/c++/4.8/ostream.html#_ZStlsRSt13basic_ostreamIcT_EPKc" title='std::operator&lt;&lt;' data-ref="_ZStlsRSt13basic_ostreamIcT_EPKc">&lt;&lt;</a> <q>" "</q> <a class="ref" href="../../../include/c++/4.8/ostream.html#_ZNSt13basic_ostreamlsEd" title='std::basic_ostream::operator&lt;&lt;' data-ref="_ZNSt13basic_ostreamlsEd">&lt;&lt;</a> <a class="local col9 ref" href="#109axis_angle" title='axis_angle' data-ref="109axis_angle">axis_angle</a>[<var>1</var>]</td></tr>
<tr><th id="500">500</th><td>            <a class="ref" href="../../../include/c++/4.8/ostream.html#_ZStlsRSt13basic_ostreamIcT_EPKc" title='std::operator&lt;&lt;' data-ref="_ZStlsRSt13basic_ostreamIcT_EPKc">&lt;&lt;</a> <q>" "</q> <a class="ref" href="../../../include/c++/4.8/ostream.html#_ZNSt13basic_ostreamlsEd" title='std::basic_ostream::operator&lt;&lt;' data-ref="_ZNSt13basic_ostreamlsEd">&lt;&lt;</a> <a class="local col9 ref" href="#109axis_angle" title='axis_angle' data-ref="109axis_angle">axis_angle</a>[<var>2</var>];</td></tr>
<tr><th id="501">501</th><td>  <a class="macro" href="../../../include/glog/logging.h.html#483" title="google::LogMessage( &quot;/home/yzf/code/ceres-solver/internal/ceres/rotation_test.cc&quot;, 501).stream()" data-ref="_M/LOG">LOG</a>(INFO) <a class="ref" href="../../../include/c++/4.8/ostream.html#_ZStlsRSt13basic_ostreamIcT_EPKc" title='std::operator&lt;&lt;' data-ref="_ZStlsRSt13basic_ostreamIcT_EPKc">&lt;&lt;</a> <q>"Expected AngleAxis = "</q> <a class="ref" href="../../../include/c++/4.8/ostream.html#_ZNSt13basic_ostreamlsEd" title='std::basic_ostream::operator&lt;&lt;' data-ref="_ZNSt13basic_ostreamlsEd">&lt;&lt;</a> <a class="tu ref" href="#ceres::internal::kPi" title='ceres::internal::kPi' data-use='r' data-ref="ceres::internal::kPi">kPi</a> <a class="ref" href="../../../include/c++/4.8/ostream.html#_ZStlsRSt13basic_ostreamIcT_EPKc" title='std::operator&lt;&lt;' data-ref="_ZStlsRSt13basic_ostreamIcT_EPKc">&lt;&lt;</a> <q>" 0 0"</q>;</td></tr>
<tr><th id="502">502</th><td>  <em>double</em> <dfn class="local col0 decl" id="110out_rowmajor" title='out_rowmajor' data-type='double [3][3]' data-ref="110out_rowmajor">out_rowmajor</dfn>[<var>3</var>][<var>3</var>];</td></tr>
<tr><th id="503">503</th><td>  <b>for</b> (<em>int</em> <dfn class="local col1 decl" id="111j" title='j' data-type='int' data-ref="111j">j</dfn> = <var>0</var>, <dfn class="local col2 decl" id="112k" title='k' data-type='int' data-ref="112k">k</dfn> = <var>0</var>; <a class="local col1 ref" href="#111j" title='j' data-ref="111j">j</a> &lt; <var>3</var>; ++<a class="local col1 ref" href="#111j" title='j' data-ref="111j">j</a>) {</td></tr>
<tr><th id="504">504</th><td>    <b>for</b> (<em>int</em> <dfn class="local col3 decl" id="113i" title='i' data-type='int' data-ref="113i">i</dfn> = <var>0</var>; <a class="local col3 ref" href="#113i" title='i' data-ref="113i">i</a> &lt; <var>3</var>; ++<a class="local col3 ref" href="#113i" title='i' data-ref="113i">i</a>, ++<a class="local col2 ref" href="#112k" title='k' data-ref="112k">k</a>) {</td></tr>
<tr><th id="505">505</th><td>      <a class="local col0 ref" href="#110out_rowmajor" title='out_rowmajor' data-ref="110out_rowmajor">out_rowmajor</a>[<a class="local col3 ref" href="#113i" title='i' data-ref="113i">i</a>][<a class="local col1 ref" href="#111j" title='j' data-ref="111j">j</a>] = <a class="local col8 ref" href="#108out_matrix" title='out_matrix' data-ref="108out_matrix">out_matrix</a>[<a class="local col2 ref" href="#112k" title='k' data-ref="112k">k</a>];</td></tr>
<tr><th id="506">506</th><td>    }</td></tr>
<tr><th id="507">507</th><td>  }</td></tr>
<tr><th id="508">508</th><td>  <a class="macro" href="../../../include/glog/logging.h.html#483" title="google::LogMessage( &quot;/home/yzf/code/ceres-solver/internal/ceres/rotation_test.cc&quot;, 508).stream()" data-ref="_M/LOG">LOG</a>(INFO) <a class="ref" href="../../../include/c++/4.8/ostream.html#_ZStlsRSt13basic_ostreamIcT_EPKc" title='std::operator&lt;&lt;' data-ref="_ZStlsRSt13basic_ostreamIcT_EPKc">&lt;&lt;</a> <q>"Rotation:"</q>;</td></tr>
<tr><th id="509">509</th><td>  <a class="macro" href="../../../include/glog/logging.h.html#483" title="google::LogMessage( &quot;/home/yzf/code/ceres-solver/internal/ceres/rotation_test.cc&quot;, 509).stream()" data-ref="_M/LOG">LOG</a>(INFO) <a class="ref" href="../../../include/c++/4.8/ostream.html#_ZStlsRSt13basic_ostreamIcT_EPKc" title='std::operator&lt;&lt;' data-ref="_ZStlsRSt13basic_ostreamIcT_EPKc">&lt;&lt;</a> <q>"EXPECTED        |        ACTUAL"</q>;</td></tr>
<tr><th id="510">510</th><td>  <b>for</b> (<em>int</em> <dfn class="local col4 decl" id="114i" title='i' data-type='int' data-ref="114i">i</dfn> = <var>0</var>; <a class="local col4 ref" href="#114i" title='i' data-ref="114i">i</a> &lt; <var>3</var>; ++<a class="local col4 ref" href="#114i" title='i' data-ref="114i">i</a>) {</td></tr>
<tr><th id="511">511</th><td>    <a class="typedef" href="../../../include/c++/4.8/bits/stringfwd.h.html#std::string" title='std::string' data-type='basic_string&lt;char&gt;' data-ref="std::string">string</a> <a class="ref fake" href="../../../include/c++/4.8/bits/basic_string.h.html#_ZNSt12basic_stringC1Ev" title='std::basic_string::basic_string&lt;_CharT, _Traits, _Alloc&gt;' data-ref="_ZNSt12basic_stringC1Ev"></a><dfn class="local col5 decl" id="115line" title='line' data-type='string' data-ref="115line">line</dfn>;</td></tr>
<tr><th id="512">512</th><td>    <b>for</b> (<em>int</em> <dfn class="local col6 decl" id="116j" title='j' data-type='int' data-ref="116j">j</dfn> = <var>0</var>; <a class="local col6 ref" href="#116j" title='j' data-ref="116j">j</a> &lt; <var>3</var>; ++<a class="local col6 ref" href="#116j" title='j' data-ref="116j">j</a>) {</td></tr>
<tr><th id="513">513</th><td>      <a class="ref" href="stringprintf.h.html#_ZN5ceres8internal13StringAppendFEPSsPKcz" title='ceres::internal::StringAppendF' data-ref="_ZN5ceres8internal13StringAppendFEPSsPKcz">StringAppendF</a>(&amp;<a class="local col5 ref" href="#115line" title='line' data-ref="115line">line</a>, <q>"%g "</q>, <a class="local col2 ref" href="#102kMatrix" title='kMatrix' data-ref="102kMatrix">kMatrix</a>[<a class="local col4 ref" href="#114i" title='i' data-ref="114i">i</a>][<a class="local col6 ref" href="#116j" title='j' data-ref="116j">j</a>]);</td></tr>
<tr><th id="514">514</th><td>    }</td></tr>
<tr><th id="515">515</th><td>    <a class="local col5 ref" href="#115line" title='line' data-ref="115line">line</a> <a class="ref" href="../../../include/c++/4.8/bits/basic_string.h.html#_ZNSt12basic_stringpLEPKT_" title='std::basic_string::operator+=' data-ref="_ZNSt12basic_stringpLEPKT_">+=</a> <q>"         |        "</q>;</td></tr>
<tr><th id="516">516</th><td>    <b>for</b> (<em>int</em> <dfn class="local col7 decl" id="117j" title='j' data-type='int' data-ref="117j">j</dfn> = <var>0</var>; <a class="local col7 ref" href="#117j" title='j' data-ref="117j">j</a> &lt; <var>3</var>; ++<a class="local col7 ref" href="#117j" title='j' data-ref="117j">j</a>) {</td></tr>
<tr><th id="517">517</th><td>      <a class="ref" href="stringprintf.h.html#_ZN5ceres8internal13StringAppendFEPSsPKcz" title='ceres::internal::StringAppendF' data-ref="_ZN5ceres8internal13StringAppendFEPSsPKcz">StringAppendF</a>(&amp;<a class="local col5 ref" href="#115line" title='line' data-ref="115line">line</a>, <q>"%g "</q>, <a class="local col0 ref" href="#110out_rowmajor" title='out_rowmajor' data-ref="110out_rowmajor">out_rowmajor</a>[<a class="local col4 ref" href="#114i" title='i' data-ref="114i">i</a>][<a class="local col7 ref" href="#117j" title='j' data-ref="117j">j</a>]);</td></tr>
<tr><th id="518">518</th><td>    }</td></tr>
<tr><th id="519">519</th><td>    <a class="macro" href="../../../include/glog/logging.h.html#483" title="google::LogMessage( &quot;/home/yzf/code/ceres-solver/internal/ceres/rotation_test.cc&quot;, 519).stream()" data-ref="_M/LOG">LOG</a>(INFO) <a class="ref" href="../../../include/c++/4.8/bits/basic_string.h.html#_ZStlsRSt13basic_ostreamIT_T0_ERKSbIS0_S1_T1_E" title='std::operator&lt;&lt;' data-ref="_ZStlsRSt13basic_ostreamIT_T0_ERKSbIS0_S1_T1_E">&lt;&lt;</a> <a class="local col5 ref" href="#115line" title='line' data-ref="115line">line</a>;</td></tr>
<tr><th id="520">520</th><td>  }</td></tr>
<tr><th id="521">521</th><td></td></tr>
<tr><th id="522">522</th><td>  <a class="macro" href="gmock/gmock.h.html#9209" title="switch (0) case 0: default: if (const ::testing::AssertionResult gtest_ar = (::testing::internal::MakePredicateFormatterFromMatcher(IsNearAngleAxis(expected_axis_angle))(&quot;axis_angle&quot;, axis_angle))) ; else ::testing::internal::AssertHelper(::testing::TestPartResult::kNonFatalFailure, &quot;/home/yzf/code/ceres-solver/internal/ceres/rotation_test.cc&quot;, 522, gtest_ar.failure_message()) = ::testing::Message()" data-ref="_M/EXPECT_THAT">EXPECT_THAT</a>(<a class="local col9 ref" href="#109axis_angle" title='axis_angle' data-ref="109axis_angle">axis_angle</a>, <a class="ref" href="#140" title='ceres::internal::IsNearAngleAxis' data-ref="_ZN5ceres8internal15IsNearAngleAxisET_">IsNearAngleAxis</a>(<a class="local col7 ref" href="#107expected_axis_angle" title='expected_axis_angle' data-ref="107expected_axis_angle">expected_axis_angle</a>));</td></tr>
<tr><th id="523">523</th><td>  <a class="macro" href="gmock/gmock.h.html#9209" title="switch (0) case 0: default: if (const ::testing::AssertionResult gtest_ar = (::testing::internal::MakePredicateFormatterFromMatcher(IsNear3x3Matrix(in_matrix))(&quot;out_matrix&quot;, out_matrix))) ; else ::testing::internal::AssertHelper(::testing::TestPartResult::kNonFatalFailure, &quot;/home/yzf/code/ceres-solver/internal/ceres/rotation_test.cc&quot;, 523, gtest_ar.failure_message()) = ::testing::Message()" data-ref="_M/EXPECT_THAT">EXPECT_THAT</a>(<a class="local col8 ref" href="#108out_matrix" title='out_matrix' data-ref="108out_matrix">out_matrix</a>, <a class="ref" href="#210" title='ceres::internal::IsNear3x3Matrix' data-ref="_ZN5ceres8internal15IsNear3x3MatrixET_">IsNear3x3Matrix</a>(<a class="local col3 ref" href="#103in_matrix" title='in_matrix' data-ref="103in_matrix">in_matrix</a>));</td></tr>
<tr><th id="524">524</th><td>}</td></tr>
<tr><th id="525">525</th><td></td></tr>
<tr><th id="526">526</th><td><i>// Transforms an axis angle that rotates by pi/3 about the Z axis to a</i></td></tr>
<tr><th id="527">527</th><td><i>// rotation matrix.</i></td></tr>
<tr><th id="528">528</th><td><a class="macro" href="gtest/gtest.h.html#21153" title="class Rotation_ZRotationToRotationMatrix_Test : public ::testing::Test { public: Rotation_ZRotationToRotationMatrix_Test() {} private: virtual void TestBody(); static ::testing::TestInfo* const test_info_ __attribute__ ((unused)); Rotation_ZRotationToRotationMatrix_Test(Rotation_ZRotationToRotationMatrix_Test const &amp;); void operator=(Rotation_ZRotationToRotationMatrix_Test const &amp;);};::testing::TestInfo* const Rotation_ZRotationToRotationMatrix_Test ::test_info_ = ::testing::internal::MakeAndRegisterTestInfo( &quot;Rotation&quot;, &quot;ZRotationToRotationMatrix&quot;, __null, __null, ::testing::internal::CodeLocation(&quot;/home/yzf/code/ceres-solver/internal/ceres/rotation_test.cc&quot;, 528), (::testing::internal::GetTestTypeId()), ::testing::Test::SetUpTestCase, ::testing::Test::TearDownTestCase, new ::testing::internal::TestFactoryImpl&lt; Rotation_ZRotationToRotationMatrix_Test&gt;);void Rotation_ZRotationToRotationMatrix_Test::TestBody()" data-ref="_M/TEST">TEST</a>(Rotation, ZRotationToRotationMatrix) {</td></tr>
<tr><th id="529">529</th><td>  <em>double</em> <dfn class="local col8 decl" id="118axis_angle" title='axis_angle' data-type='double [3]' data-ref="118axis_angle">axis_angle</dfn>[<var>3</var>] =  { <var>0</var>, <var>0</var>, <a class="tu ref" href="#ceres::internal::kPi" title='ceres::internal::kPi' data-use='r' data-ref="ceres::internal::kPi">kPi</a> / <var>3</var> };</td></tr>
<tr><th id="530">530</th><td>  <em>double</em> <dfn class="local col9 decl" id="119matrix" title='matrix' data-type='double [9]' data-ref="119matrix">matrix</dfn>[<var>9</var>];</td></tr>
<tr><th id="531">531</th><td>  <i>// This is laid-out row-major on the screen but is actually stored</i></td></tr>
<tr><th id="532">532</th><td><i>  // column-major.</i></td></tr>
<tr><th id="533">533</th><td>  <em>double</em> <dfn class="local col0 decl" id="120expected" title='expected' data-type='double [9]' data-ref="120expected">expected</dfn>[<var>9</var>] = { <var>0.5</var>, <a class="ref" href="../../include/ceres/jet.h.html#_ZN5ceres4sqrtEd" title='ceres::sqrt' data-ref="_ZN5ceres4sqrtEd">sqrt</a>(<var>3</var>) / <var>2</var>, <var>0</var>,   <i>// Column 1</i></td></tr>
<tr><th id="534">534</th><td>                         -<a class="ref" href="../../include/ceres/jet.h.html#_ZN5ceres4sqrtEd" title='ceres::sqrt' data-ref="_ZN5ceres4sqrtEd">sqrt</a>(<var>3</var>) / <var>2</var>, <var>0.5</var>, <var>0</var>,  <i>// Column 2</i></td></tr>
<tr><th id="535">535</th><td>                         <var>0</var>, <var>0</var>, <var>1</var> };             <i>// Column 3</i></td></tr>
<tr><th id="536">536</th><td>  <a class="ref" href="../../include/ceres/rotation.h.html#_ZN5ceres25AngleAxisToRotationMatrixEPKT_PS0_" title='ceres::AngleAxisToRotationMatrix' data-ref="_ZN5ceres25AngleAxisToRotationMatrixEPKT_PS0_">AngleAxisToRotationMatrix</a>(<a class="local col8 ref" href="#118axis_angle" title='axis_angle' data-ref="118axis_angle">axis_angle</a>, <a class="local col9 ref" href="#119matrix" title='matrix' data-ref="119matrix">matrix</a>);</td></tr>
<tr><th id="537">537</th><td>  <a class="macro" href="gmock/gmock.h.html#9209" title="switch (0) case 0: default: if (const ::testing::AssertionResult gtest_ar = (::testing::internal::MakePredicateFormatterFromMatcher(IsOrthonormal())(&quot;matrix&quot;, matrix))) ; else ::testing::internal::AssertHelper(::testing::TestPartResult::kNonFatalFailure, &quot;/home/yzf/code/ceres-solver/internal/ceres/rotation_test.cc&quot;, 537, gtest_ar.failure_message()) = ::testing::Message()" data-ref="_M/EXPECT_THAT">EXPECT_THAT</a>(<a class="local col9 ref" href="#119matrix" title='matrix' data-ref="119matrix">matrix</a>, <a class="ref" href="#181" title='ceres::internal::IsOrthonormal' data-ref="_ZN5ceres8internal13IsOrthonormalEv">IsOrthonormal</a>());</td></tr>
<tr><th id="538">538</th><td>  <a class="macro" href="gmock/gmock.h.html#9209" title="switch (0) case 0: default: if (const ::testing::AssertionResult gtest_ar = (::testing::internal::MakePredicateFormatterFromMatcher(IsNear3x3Matrix(expected))(&quot;matrix&quot;, matrix))) ; else ::testing::internal::AssertHelper(::testing::TestPartResult::kNonFatalFailure, &quot;/home/yzf/code/ceres-solver/internal/ceres/rotation_test.cc&quot;, 538, gtest_ar.failure_message()) = ::testing::Message()" data-ref="_M/EXPECT_THAT">EXPECT_THAT</a>(<a class="local col9 ref" href="#119matrix" title='matrix' data-ref="119matrix">matrix</a>, <a class="ref" href="#210" title='ceres::internal::IsNear3x3Matrix' data-ref="_ZN5ceres8internal15IsNear3x3MatrixET_">IsNear3x3Matrix</a>(<a class="local col0 ref" href="#120expected" title='expected' data-ref="120expected">expected</a>));</td></tr>
<tr><th id="539">539</th><td>  <em>double</em> <dfn class="local col1 decl" id="121round_trip" title='round_trip' data-type='double [3]' data-ref="121round_trip">round_trip</dfn>[<var>3</var>];</td></tr>
<tr><th id="540">540</th><td>  <a class="ref" href="../../include/ceres/rotation.h.html#_ZN5ceres25RotationMatrixToAngleAxisEPKT_PS0_" title='ceres::RotationMatrixToAngleAxis' data-ref="_ZN5ceres25RotationMatrixToAngleAxisEPKT_PS0_">RotationMatrixToAngleAxis</a>(<a class="local col9 ref" href="#119matrix" title='matrix' data-ref="119matrix">matrix</a>, <a class="local col1 ref" href="#121round_trip" title='round_trip' data-ref="121round_trip">round_trip</a>);</td></tr>
<tr><th id="541">541</th><td>  <a class="macro" href="gmock/gmock.h.html#9209" title="switch (0) case 0: default: if (const ::testing::AssertionResult gtest_ar = (::testing::internal::MakePredicateFormatterFromMatcher(IsNearAngleAxis(axis_angle))(&quot;round_trip&quot;, round_trip))) ; else ::testing::internal::AssertHelper(::testing::TestPartResult::kNonFatalFailure, &quot;/home/yzf/code/ceres-solver/internal/ceres/rotation_test.cc&quot;, 541, gtest_ar.failure_message()) = ::testing::Message()" data-ref="_M/EXPECT_THAT">EXPECT_THAT</a>(<a class="local col1 ref" href="#121round_trip" title='round_trip' data-ref="121round_trip">round_trip</a>, <a class="ref" href="#140" title='ceres::internal::IsNearAngleAxis' data-ref="_ZN5ceres8internal15IsNearAngleAxisET_">IsNearAngleAxis</a>(<a class="local col8 ref" href="#118axis_angle" title='axis_angle' data-ref="118axis_angle">axis_angle</a>));</td></tr>
<tr><th id="542">542</th><td>}</td></tr>
<tr><th id="543">543</th><td></td></tr>
<tr><th id="544">544</th><td><i>// Takes a bunch of random axis/angle values, converts them to rotation</i></td></tr>
<tr><th id="545">545</th><td><i>// matrices, and back again.</i></td></tr>
<tr><th id="546">546</th><td><a class="macro" href="gtest/gtest.h.html#21153" title="class Rotation_AngleAxisToRotationMatrixAndBack_Test : public ::testing::Test { public: Rotation_AngleAxisToRotationMatrixAndBack_Test() {} private: virtual void TestBody(); static ::testing::TestInfo* const test_info_ __attribute__ ((unused)); Rotation_AngleAxisToRotationMatrixAndBack_Test(Rotation_AngleAxisToRotationMatrixAndBack_Test const &amp;); void operator=(Rotation_AngleAxisToRotationMatrixAndBack_Test const &amp;);};::testing::TestInfo* const Rotation_AngleAxisToRotationMatrixAndBack_Test ::test_info_ = ::testing::internal::MakeAndRegisterTestInfo( &quot;Rotation&quot;, &quot;AngleAxisToRotationMatrixAndBack&quot;, __null, __null, ::testing::internal::CodeLocation(&quot;/home/yzf/code/ceres-solver/internal/ceres/rotation_test.cc&quot;, 546), (::testing::internal::GetTestTypeId()), ::testing::Test::SetUpTestCase, ::testing::Test::TearDownTestCase, new ::testing::internal::TestFactoryImpl&lt; Rotation_AngleAxisToRotationMatrixAndBack_Test&gt;);void Rotation_AngleAxisToRotationMatrixAndBack_Test::TestBody()" data-ref="_M/TEST">TEST</a>(Rotation, AngleAxisToRotationMatrixAndBack) {</td></tr>
<tr><th id="547">547</th><td>  <a class="ref" href="../../../include/stdlib.h.html#srand" title='srand' data-ref="srand">srand</a>(<var>5</var>);</td></tr>
<tr><th id="548">548</th><td>  <b>for</b> (<em>int</em> <dfn class="local col2 decl" id="122i" title='i' data-type='int' data-ref="122i">i</dfn> = <var>0</var>; <a class="local col2 ref" href="#122i" title='i' data-ref="122i">i</a> &lt; <a class="tu ref" href="#ceres::internal::kNumTrials" title='ceres::internal::kNumTrials' data-use='r' data-ref="ceres::internal::kNumTrials">kNumTrials</a>; <a class="local col2 ref" href="#122i" title='i' data-ref="122i">i</a>++) {</td></tr>
<tr><th id="549">549</th><td>    <em>double</em> <dfn class="local col3 decl" id="123axis_angle" title='axis_angle' data-type='double [3]' data-ref="123axis_angle">axis_angle</dfn>[<var>3</var>];</td></tr>
<tr><th id="550">550</th><td>    <i>// Make an axis by choosing three random numbers in [-1, 1) and</i></td></tr>
<tr><th id="551">551</th><td><i>    // normalizing.</i></td></tr>
<tr><th id="552">552</th><td>    <em>double</em> <dfn class="local col4 decl" id="124norm" title='norm' data-type='double' data-ref="124norm">norm</dfn> = <var>0</var>;</td></tr>
<tr><th id="553">553</th><td>    <b>for</b> (<em>int</em> <dfn class="local col5 decl" id="125i" title='i' data-type='int' data-ref="125i">i</dfn> = <var>0</var>; <a class="local col5 ref" href="#125i" title='i' data-ref="125i">i</a> &lt; <var>3</var>; <a class="local col5 ref" href="#125i" title='i' data-ref="125i">i</a>++) {</td></tr>
<tr><th id="554">554</th><td>      <a class="local col3 ref" href="#123axis_angle" title='axis_angle' data-ref="123axis_angle">axis_angle</a>[<a class="local col5 ref" href="#125i" title='i' data-ref="125i">i</a>] = <a class="ref" href="#_ZN5ceres8internal10RandDoubleEv" title='ceres::internal::RandDouble' data-ref="_ZN5ceres8internal10RandDoubleEv">RandDouble</a>() * <var>2</var> - <var>1</var>;</td></tr>
<tr><th id="555">555</th><td>      <a class="local col4 ref" href="#124norm" title='norm' data-ref="124norm">norm</a> += <a class="local col3 ref" href="#123axis_angle" title='axis_angle' data-ref="123axis_angle">axis_angle</a>[<a class="local col5 ref" href="#125i" title='i' data-ref="125i">i</a>] * <a class="local col3 ref" href="#123axis_angle" title='axis_angle' data-ref="123axis_angle">axis_angle</a>[<a class="local col5 ref" href="#125i" title='i' data-ref="125i">i</a>];</td></tr>
<tr><th id="556">556</th><td>    }</td></tr>
<tr><th id="557">557</th><td>    <a class="local col4 ref" href="#124norm" title='norm' data-ref="124norm">norm</a> = <a class="ref" href="../../include/ceres/jet.h.html#_ZN5ceres4sqrtEd" title='ceres::sqrt' data-ref="_ZN5ceres4sqrtEd">sqrt</a>(<a class="local col4 ref" href="#124norm" title='norm' data-ref="124norm">norm</a>);</td></tr>
<tr><th id="558">558</th><td></td></tr>
<tr><th id="559">559</th><td>    <i>// Angle in [-pi, pi).</i></td></tr>
<tr><th id="560">560</th><td>    <em>double</em> <dfn class="local col6 decl" id="126theta" title='theta' data-type='double' data-ref="126theta">theta</dfn> = <a class="tu ref" href="#ceres::internal::kPi" title='ceres::internal::kPi' data-use='r' data-ref="ceres::internal::kPi">kPi</a> * <var>2</var> * <a class="ref" href="#_ZN5ceres8internal10RandDoubleEv" title='ceres::internal::RandDouble' data-ref="_ZN5ceres8internal10RandDoubleEv">RandDouble</a>() - <a class="tu ref" href="#ceres::internal::kPi" title='ceres::internal::kPi' data-use='r' data-ref="ceres::internal::kPi">kPi</a>;</td></tr>
<tr><th id="561">561</th><td>    <b>for</b> (<em>int</em> <dfn class="local col7 decl" id="127i" title='i' data-type='int' data-ref="127i">i</dfn> = <var>0</var>; <a class="local col7 ref" href="#127i" title='i' data-ref="127i">i</a> &lt; <var>3</var>; <a class="local col7 ref" href="#127i" title='i' data-ref="127i">i</a>++) {</td></tr>
<tr><th id="562">562</th><td>      <a class="local col3 ref" href="#123axis_angle" title='axis_angle' data-ref="123axis_angle">axis_angle</a>[<a class="local col7 ref" href="#127i" title='i' data-ref="127i">i</a>] = <a class="local col3 ref" href="#123axis_angle" title='axis_angle' data-ref="123axis_angle">axis_angle</a>[<a class="local col7 ref" href="#127i" title='i' data-ref="127i">i</a>] * <a class="local col6 ref" href="#126theta" title='theta' data-ref="126theta">theta</a> / <a class="local col4 ref" href="#124norm" title='norm' data-ref="124norm">norm</a>;</td></tr>
<tr><th id="563">563</th><td>    }</td></tr>
<tr><th id="564">564</th><td></td></tr>
<tr><th id="565">565</th><td>    <em>double</em> <dfn class="local col8 decl" id="128matrix" title='matrix' data-type='double [9]' data-ref="128matrix">matrix</dfn>[<var>9</var>];</td></tr>
<tr><th id="566">566</th><td>    <em>double</em> <dfn class="local col9 decl" id="129round_trip" title='round_trip' data-type='double [3]' data-ref="129round_trip">round_trip</dfn>[<var>3</var>];</td></tr>
<tr><th id="567">567</th><td>    <a class="ref" href="../../include/ceres/rotation.h.html#_ZN5ceres25AngleAxisToRotationMatrixEPKT_PS0_" title='ceres::AngleAxisToRotationMatrix' data-ref="_ZN5ceres25AngleAxisToRotationMatrixEPKT_PS0_">AngleAxisToRotationMatrix</a>(<a class="local col3 ref" href="#123axis_angle" title='axis_angle' data-ref="123axis_angle">axis_angle</a>, <a class="local col8 ref" href="#128matrix" title='matrix' data-ref="128matrix">matrix</a>);</td></tr>
<tr><th id="568">568</th><td>    <a class="macro" href="gmock/gmock.h.html#9207" title="switch (0) case 0: default: if (const ::testing::AssertionResult gtest_ar = (::testing::internal::MakePredicateFormatterFromMatcher(IsOrthonormal())(&quot;matrix&quot;, matrix))) ; else return ::testing::internal::AssertHelper(::testing::TestPartResult::kFatalFailure, &quot;/home/yzf/code/ceres-solver/internal/ceres/rotation_test.cc&quot;, 568, gtest_ar.failure_message()) = ::testing::Message()" data-ref="_M/ASSERT_THAT">ASSERT_THAT</a>(<a class="local col8 ref" href="#128matrix" title='matrix' data-ref="128matrix">matrix</a>, <a class="ref" href="#181" title='ceres::internal::IsOrthonormal' data-ref="_ZN5ceres8internal13IsOrthonormalEv">IsOrthonormal</a>());</td></tr>
<tr><th id="569">569</th><td>    <a class="ref" href="../../include/ceres/rotation.h.html#_ZN5ceres25RotationMatrixToAngleAxisEPKT_PS0_" title='ceres::RotationMatrixToAngleAxis' data-ref="_ZN5ceres25RotationMatrixToAngleAxisEPKT_PS0_">RotationMatrixToAngleAxis</a>(<a class="local col8 ref" href="#128matrix" title='matrix' data-ref="128matrix">matrix</a>, <a class="local col9 ref" href="#129round_trip" title='round_trip' data-ref="129round_trip">round_trip</a>);</td></tr>
<tr><th id="570">570</th><td></td></tr>
<tr><th id="571">571</th><td>    <b>for</b> (<em>int</em> <dfn class="local col0 decl" id="130i" title='i' data-type='int' data-ref="130i">i</dfn> = <var>0</var>; <a class="local col0 ref" href="#130i" title='i' data-ref="130i">i</a> &lt; <var>3</var>; ++<a class="local col0 ref" href="#130i" title='i' data-ref="130i">i</a>) {</td></tr>
<tr><th id="572">572</th><td>      <a class="macro" href="gtest/gtest.h.html#21009" title="switch (0) case 0: default: if (const ::testing::AssertionResult gtest_ar = (::testing::internal::DoubleNearPredFormat(&quot;round_trip[i]&quot;, &quot;axis_angle[i]&quot;, &quot;kLooseTolerance&quot;, round_trip[i], axis_angle[i], kLooseTolerance))) ; else ::testing::internal::AssertHelper(::testing::TestPartResult::kNonFatalFailure, &quot;/home/yzf/code/ceres-solver/internal/ceres/rotation_test.cc&quot;, 572, gtest_ar.failure_message()) = ::testing::Message()" data-ref="_M/EXPECT_NEAR">EXPECT_NEAR</a>(<a class="local col9 ref" href="#129round_trip" title='round_trip' data-ref="129round_trip">round_trip</a>[<a class="local col0 ref" href="#130i" title='i' data-ref="130i">i</a>], <a class="local col3 ref" href="#123axis_angle" title='axis_angle' data-ref="123axis_angle">axis_angle</a>[<a class="local col0 ref" href="#130i" title='i' data-ref="130i">i</a>], <a class="tu ref" href="#ceres::internal::kLooseTolerance" title='ceres::internal::kLooseTolerance' data-use='r' data-ref="ceres::internal::kLooseTolerance">kLooseTolerance</a>);</td></tr>
<tr><th id="573">573</th><td>    }</td></tr>
<tr><th id="574">574</th><td>  }</td></tr>
<tr><th id="575">575</th><td>}</td></tr>
<tr><th id="576">576</th><td></td></tr>
<tr><th id="577">577</th><td><i>// Takes a bunch of random axis/angle values near zero, converts them</i></td></tr>
<tr><th id="578">578</th><td><i>// to rotation matrices, and back again.</i></td></tr>
<tr><th id="579">579</th><td><a class="macro" href="gtest/gtest.h.html#21153" title="class Rotation_AngleAxisToRotationMatrixAndBackNearZero_Test : public ::testing::Test { public: Rotation_AngleAxisToRotationMatrixAndBackNearZero_Test() {} private: virtual void TestBody(); static ::testing::TestInfo* const test_info_ __attribute__ ((unused)); Rotation_AngleAxisToRotationMatrixAndBackNearZero_Test(Rotation_AngleAxisToRotationMatrixAndBackNearZero_Test const &amp;); void operator=(Rotation_AngleAxisToRotationMatrixAndBackNearZero_Test const &amp;);};::testing::TestInfo* const Rotation_AngleAxisToRotationMatrixAndBackNearZero_Test ::test_info_ = ::testing::internal::MakeAndRegisterTestInfo( &quot;Rotation&quot;, &quot;AngleAxisToRotationMatrixAndBackNearZero&quot;, __null, __null, ::testing::internal::CodeLocation(&quot;/home/yzf/code/ceres-solver/internal/ceres/rotation_test.cc&quot;, 579), (::testing::internal::GetTestTypeId()), ::testing::Test::SetUpTestCase, ::testing::Test::TearDownTestCase, new ::testing::internal::TestFactoryImpl&lt; Rotation_AngleAxisToRotationMatrixAndBackNearZero_Test&gt;);void Rotation_AngleAxisToRotationMatrixAndBackNearZero_Test::TestBody()" data-ref="_M/TEST">TEST</a>(Rotation, AngleAxisToRotationMatrixAndBackNearZero) {</td></tr>
<tr><th id="580">580</th><td>  <a class="ref" href="../../../include/stdlib.h.html#srand" title='srand' data-ref="srand">srand</a>(<var>5</var>);</td></tr>
<tr><th id="581">581</th><td>  <b>for</b> (<em>int</em> <dfn class="local col1 decl" id="131i" title='i' data-type='int' data-ref="131i">i</dfn> = <var>0</var>; <a class="local col1 ref" href="#131i" title='i' data-ref="131i">i</a> &lt; <a class="tu ref" href="#ceres::internal::kNumTrials" title='ceres::internal::kNumTrials' data-use='r' data-ref="ceres::internal::kNumTrials">kNumTrials</a>; <a class="local col1 ref" href="#131i" title='i' data-ref="131i">i</a>++) {</td></tr>
<tr><th id="582">582</th><td>    <em>double</em> <dfn class="local col2 decl" id="132axis_angle" title='axis_angle' data-type='double [3]' data-ref="132axis_angle">axis_angle</dfn>[<var>3</var>];</td></tr>
<tr><th id="583">583</th><td>    <i>// Make an axis by choosing three random numbers in [-1, 1) and</i></td></tr>
<tr><th id="584">584</th><td><i>    // normalizing.</i></td></tr>
<tr><th id="585">585</th><td>    <em>double</em> <dfn class="local col3 decl" id="133norm" title='norm' data-type='double' data-ref="133norm">norm</dfn> = <var>0</var>;</td></tr>
<tr><th id="586">586</th><td>    <b>for</b> (<em>int</em> <dfn class="local col4 decl" id="134i" title='i' data-type='int' data-ref="134i">i</dfn> = <var>0</var>; <a class="local col4 ref" href="#134i" title='i' data-ref="134i">i</a> &lt; <var>3</var>; <a class="local col4 ref" href="#134i" title='i' data-ref="134i">i</a>++) {</td></tr>
<tr><th id="587">587</th><td>      <a class="local col2 ref" href="#132axis_angle" title='axis_angle' data-ref="132axis_angle">axis_angle</a>[<a class="local col4 ref" href="#134i" title='i' data-ref="134i">i</a>] = <a class="ref" href="#_ZN5ceres8internal10RandDoubleEv" title='ceres::internal::RandDouble' data-ref="_ZN5ceres8internal10RandDoubleEv">RandDouble</a>() * <var>2</var> - <var>1</var>;</td></tr>
<tr><th id="588">588</th><td>      <a class="local col3 ref" href="#133norm" title='norm' data-ref="133norm">norm</a> += <a class="local col2 ref" href="#132axis_angle" title='axis_angle' data-ref="132axis_angle">axis_angle</a>[<a class="local col4 ref" href="#134i" title='i' data-ref="134i">i</a>] * <a class="local col2 ref" href="#132axis_angle" title='axis_angle' data-ref="132axis_angle">axis_angle</a>[<a class="local col4 ref" href="#134i" title='i' data-ref="134i">i</a>];</td></tr>
<tr><th id="589">589</th><td>    }</td></tr>
<tr><th id="590">590</th><td>    <a class="local col3 ref" href="#133norm" title='norm' data-ref="133norm">norm</a> = <a class="ref" href="../../include/ceres/jet.h.html#_ZN5ceres4sqrtEd" title='ceres::sqrt' data-ref="_ZN5ceres4sqrtEd">sqrt</a>(<a class="local col3 ref" href="#133norm" title='norm' data-ref="133norm">norm</a>);</td></tr>
<tr><th id="591">591</th><td></td></tr>
<tr><th id="592">592</th><td>    <i>// Tiny theta.</i></td></tr>
<tr><th id="593">593</th><td>    <em>double</em> <dfn class="local col5 decl" id="135theta" title='theta' data-type='double' data-ref="135theta">theta</dfn> = <var>1e-16</var> * (<a class="tu ref" href="#ceres::internal::kPi" title='ceres::internal::kPi' data-use='r' data-ref="ceres::internal::kPi">kPi</a> * <var>2</var> * <a class="ref" href="#_ZN5ceres8internal10RandDoubleEv" title='ceres::internal::RandDouble' data-ref="_ZN5ceres8internal10RandDoubleEv">RandDouble</a>() - <a class="tu ref" href="#ceres::internal::kPi" title='ceres::internal::kPi' data-use='r' data-ref="ceres::internal::kPi">kPi</a>);</td></tr>
<tr><th id="594">594</th><td>    <b>for</b> (<em>int</em> <dfn class="local col6 decl" id="136i" title='i' data-type='int' data-ref="136i">i</dfn> = <var>0</var>; <a class="local col6 ref" href="#136i" title='i' data-ref="136i">i</a> &lt; <var>3</var>; <a class="local col6 ref" href="#136i" title='i' data-ref="136i">i</a>++) {</td></tr>
<tr><th id="595">595</th><td>      <a class="local col2 ref" href="#132axis_angle" title='axis_angle' data-ref="132axis_angle">axis_angle</a>[<a class="local col6 ref" href="#136i" title='i' data-ref="136i">i</a>] = <a class="local col2 ref" href="#132axis_angle" title='axis_angle' data-ref="132axis_angle">axis_angle</a>[<a class="local col6 ref" href="#136i" title='i' data-ref="136i">i</a>] * <a class="local col5 ref" href="#135theta" title='theta' data-ref="135theta">theta</a> / <a class="local col3 ref" href="#133norm" title='norm' data-ref="133norm">norm</a>;</td></tr>
<tr><th id="596">596</th><td>    }</td></tr>
<tr><th id="597">597</th><td></td></tr>
<tr><th id="598">598</th><td>    <em>double</em> <dfn class="local col7 decl" id="137matrix" title='matrix' data-type='double [9]' data-ref="137matrix">matrix</dfn>[<var>9</var>];</td></tr>
<tr><th id="599">599</th><td>    <em>double</em> <dfn class="local col8 decl" id="138round_trip" title='round_trip' data-type='double [3]' data-ref="138round_trip">round_trip</dfn>[<var>3</var>];</td></tr>
<tr><th id="600">600</th><td>    <a class="ref" href="../../include/ceres/rotation.h.html#_ZN5ceres25AngleAxisToRotationMatrixEPKT_PS0_" title='ceres::AngleAxisToRotationMatrix' data-ref="_ZN5ceres25AngleAxisToRotationMatrixEPKT_PS0_">AngleAxisToRotationMatrix</a>(<a class="local col2 ref" href="#132axis_angle" title='axis_angle' data-ref="132axis_angle">axis_angle</a>, <a class="local col7 ref" href="#137matrix" title='matrix' data-ref="137matrix">matrix</a>);</td></tr>
<tr><th id="601">601</th><td>    <a class="macro" href="gmock/gmock.h.html#9207" title="switch (0) case 0: default: if (const ::testing::AssertionResult gtest_ar = (::testing::internal::MakePredicateFormatterFromMatcher(IsOrthonormal())(&quot;matrix&quot;, matrix))) ; else return ::testing::internal::AssertHelper(::testing::TestPartResult::kFatalFailure, &quot;/home/yzf/code/ceres-solver/internal/ceres/rotation_test.cc&quot;, 601, gtest_ar.failure_message()) = ::testing::Message()" data-ref="_M/ASSERT_THAT">ASSERT_THAT</a>(<a class="local col7 ref" href="#137matrix" title='matrix' data-ref="137matrix">matrix</a>, <a class="ref" href="#181" title='ceres::internal::IsOrthonormal' data-ref="_ZN5ceres8internal13IsOrthonormalEv">IsOrthonormal</a>());</td></tr>
<tr><th id="602">602</th><td>    <a class="ref" href="../../include/ceres/rotation.h.html#_ZN5ceres25RotationMatrixToAngleAxisEPKT_PS0_" title='ceres::RotationMatrixToAngleAxis' data-ref="_ZN5ceres25RotationMatrixToAngleAxisEPKT_PS0_">RotationMatrixToAngleAxis</a>(<a class="local col7 ref" href="#137matrix" title='matrix' data-ref="137matrix">matrix</a>, <a class="local col8 ref" href="#138round_trip" title='round_trip' data-ref="138round_trip">round_trip</a>);</td></tr>
<tr><th id="603">603</th><td></td></tr>
<tr><th id="604">604</th><td>    <b>for</b> (<em>int</em> <dfn class="local col9 decl" id="139i" title='i' data-type='int' data-ref="139i">i</dfn> = <var>0</var>; <a class="local col9 ref" href="#139i" title='i' data-ref="139i">i</a> &lt; <var>3</var>; ++<a class="local col9 ref" href="#139i" title='i' data-ref="139i">i</a>) {</td></tr>
<tr><th id="605">605</th><td>      <a class="macro" href="gtest/gtest.h.html#21009" title="switch (0) case 0: default: if (const ::testing::AssertionResult gtest_ar = (::testing::internal::DoubleNearPredFormat(&quot;round_trip[i]&quot;, &quot;axis_angle[i]&quot;, &quot;numeric_limits&lt;double&gt;::epsilon()&quot;, round_trip[i], axis_angle[i], numeric_limits&lt;double&gt;::epsilon()))) ; else ::testing::internal::AssertHelper(::testing::TestPartResult::kNonFatalFailure, &quot;/home/yzf/code/ceres-solver/internal/ceres/rotation_test.cc&quot;, 606, gtest_ar.failure_message()) = ::testing::Message()" data-ref="_M/EXPECT_NEAR">EXPECT_NEAR</a>(<a class="local col8 ref" href="#138round_trip" title='round_trip' data-ref="138round_trip">round_trip</a>[<a class="local col9 ref" href="#139i" title='i' data-ref="139i">i</a>], <a class="local col2 ref" href="#132axis_angle" title='axis_angle' data-ref="132axis_angle">axis_angle</a>[<a class="local col9 ref" href="#139i" title='i' data-ref="139i">i</a>],</td></tr>
<tr><th id="606">606</th><td>                  <a class="type" href="../../../include/c++/4.8/limits.html#std::numeric_limits" title='std::numeric_limits' data-ref="std::numeric_limits">numeric_limits</a>&lt;<em>double</em>&gt;::<a class="ref" href="../../../include/c++/4.8/limits.html#_ZNSt14numeric_limitsIdE7epsilonEv" title='std::numeric_limits&lt;double&gt;::epsilon' data-ref="_ZNSt14numeric_limitsIdE7epsilonEv">epsilon</a>());</td></tr>
<tr><th id="607">607</th><td>    }</td></tr>
<tr><th id="608">608</th><td>  }</td></tr>
<tr><th id="609">609</th><td>}</td></tr>
<tr><th id="610">610</th><td></td></tr>
<tr><th id="611">611</th><td></td></tr>
<tr><th id="612">612</th><td><i  data-doc="_ZN5ceres8internalL12Transpose3x3EPd">// Transposes a 3x3 matrix.</i></td></tr>
<tr><th id="613">613</th><td><em>static</em> <em>void</em> <dfn class="tu decl def" id="_ZN5ceres8internalL12Transpose3x3EPd" title='ceres::internal::Transpose3x3' data-type='void ceres::internal::Transpose3x3(double * m)' data-ref="_ZN5ceres8internalL12Transpose3x3EPd">Transpose3x3</dfn>(<em>double</em> <dfn class="local col0 decl" id="140m" title='m' data-type='double *' data-ref="140m">m</dfn>[<var>9</var>]) {</td></tr>
<tr><th id="614">614</th><td>  <a class="ref" href="../../../include/c++/4.8/bits/algorithmfwd.h.html#_ZSt4swapRT_S0_" title='std::swap' data-ref="_ZSt4swapRT_S0_">swap</a>(<span class='refarg'><a class="local col0 ref" href="#140m" title='m' data-ref="140m">m</a>[<var>1</var>]</span>, <span class='refarg'><a class="local col0 ref" href="#140m" title='m' data-ref="140m">m</a>[<var>3</var>]</span>);</td></tr>
<tr><th id="615">615</th><td>  <a class="ref" href="../../../include/c++/4.8/bits/algorithmfwd.h.html#_ZSt4swapRT_S0_" title='std::swap' data-ref="_ZSt4swapRT_S0_">swap</a>(<span class='refarg'><a class="local col0 ref" href="#140m" title='m' data-ref="140m">m</a>[<var>2</var>]</span>, <span class='refarg'><a class="local col0 ref" href="#140m" title='m' data-ref="140m">m</a>[<var>6</var>]</span>);</td></tr>
<tr><th id="616">616</th><td>  <a class="ref" href="../../../include/c++/4.8/bits/algorithmfwd.h.html#_ZSt4swapRT_S0_" title='std::swap' data-ref="_ZSt4swapRT_S0_">swap</a>(<span class='refarg'><a class="local col0 ref" href="#140m" title='m' data-ref="140m">m</a>[<var>5</var>]</span>, <span class='refarg'><a class="local col0 ref" href="#140m" title='m' data-ref="140m">m</a>[<var>7</var>]</span>);</td></tr>
<tr><th id="617">617</th><td>}</td></tr>
<tr><th id="618">618</th><td></td></tr>
<tr><th id="619">619</th><td><i  data-doc="_ZN5ceres8internalL9ToDegreesEPd">// Convert Euler angles from radians to degrees.</i></td></tr>
<tr><th id="620">620</th><td><em>static</em> <em>void</em> <dfn class="tu decl def" id="_ZN5ceres8internalL9ToDegreesEPd" title='ceres::internal::ToDegrees' data-type='void ceres::internal::ToDegrees(double * euler_angles)' data-ref="_ZN5ceres8internalL9ToDegreesEPd">ToDegrees</dfn>(<em>double</em> <dfn class="local col1 decl" id="141euler_angles" title='euler_angles' data-type='double *' data-ref="141euler_angles">euler_angles</dfn>[<var>3</var>]) {</td></tr>
<tr><th id="621">621</th><td>  <b>for</b> (<em>int</em> <dfn class="local col2 decl" id="142i" title='i' data-type='int' data-ref="142i">i</dfn> = <var>0</var>; <a class="local col2 ref" href="#142i" title='i' data-ref="142i">i</a> &lt; <var>3</var>; ++<a class="local col2 ref" href="#142i" title='i' data-ref="142i">i</a>) {</td></tr>
<tr><th id="622">622</th><td>    <a class="local col1 ref" href="#141euler_angles" title='euler_angles' data-ref="141euler_angles">euler_angles</a>[<a class="local col2 ref" href="#142i" title='i' data-ref="142i">i</a>] *= <var>180.0</var> / <a class="tu ref" href="#ceres::internal::kPi" title='ceres::internal::kPi' data-use='r' data-ref="ceres::internal::kPi">kPi</a>;</td></tr>
<tr><th id="623">623</th><td>  }</td></tr>
<tr><th id="624">624</th><td>}</td></tr>
<tr><th id="625">625</th><td></td></tr>
<tr><th id="626">626</th><td><i  data-doc="_ZN5ceres8internalL23CompareEulerToAngleAxisEPdS1_">// Compare the 3x3 rotation matrices produced by the axis-angle</i></td></tr>
<tr><th id="627">627</th><td><i  data-doc="_ZN5ceres8internalL23CompareEulerToAngleAxisEPdS1_">// rotation 'aa' and the Euler angle rotation 'ea' (in radians).</i></td></tr>
<tr><th id="628">628</th><td><em>static</em> <em>void</em> <dfn class="tu decl def" id="_ZN5ceres8internalL23CompareEulerToAngleAxisEPdS1_" title='ceres::internal::CompareEulerToAngleAxis' data-type='void ceres::internal::CompareEulerToAngleAxis(double * aa, double * ea)' data-ref="_ZN5ceres8internalL23CompareEulerToAngleAxisEPdS1_">CompareEulerToAngleAxis</dfn>(<em>double</em> <dfn class="local col3 decl" id="143aa" title='aa' data-type='double *' data-ref="143aa">aa</dfn>[<var>3</var>], <em>double</em> <dfn class="local col4 decl" id="144ea" title='ea' data-type='double *' data-ref="144ea">ea</dfn>[<var>3</var>]) {</td></tr>
<tr><th id="629">629</th><td>  <em>double</em> <dfn class="local col5 decl" id="145aa_matrix" title='aa_matrix' data-type='double [9]' data-ref="145aa_matrix">aa_matrix</dfn>[<var>9</var>];</td></tr>
<tr><th id="630">630</th><td>  <a class="ref" href="../../include/ceres/rotation.h.html#_ZN5ceres25AngleAxisToRotationMatrixEPKT_PS0_" title='ceres::AngleAxisToRotationMatrix' data-ref="_ZN5ceres25AngleAxisToRotationMatrixEPKT_PS0_">AngleAxisToRotationMatrix</a>(<a class="local col3 ref" href="#143aa" title='aa' data-ref="143aa">aa</a>, <a class="local col5 ref" href="#145aa_matrix" title='aa_matrix' data-ref="145aa_matrix">aa_matrix</a>);</td></tr>
<tr><th id="631">631</th><td>  <a class="tu ref" href="#_ZN5ceres8internalL12Transpose3x3EPd" title='ceres::internal::Transpose3x3' data-use='c' data-ref="_ZN5ceres8internalL12Transpose3x3EPd">Transpose3x3</a>(<a class="local col5 ref" href="#145aa_matrix" title='aa_matrix' data-ref="145aa_matrix">aa_matrix</a>);  <i>// Column to row major order.</i></td></tr>
<tr><th id="632">632</th><td></td></tr>
<tr><th id="633">633</th><td>  <em>double</em> <dfn class="local col6 decl" id="146ea_matrix" title='ea_matrix' data-type='double [9]' data-ref="146ea_matrix">ea_matrix</dfn>[<var>9</var>];</td></tr>
<tr><th id="634">634</th><td>  <a class="tu ref" href="#_ZN5ceres8internalL9ToDegreesEPd" title='ceres::internal::ToDegrees' data-use='c' data-ref="_ZN5ceres8internalL9ToDegreesEPd">ToDegrees</a>(<a class="local col4 ref" href="#144ea" title='ea' data-ref="144ea">ea</a>);  <i>// Radians to degrees.</i></td></tr>
<tr><th id="635">635</th><td>  <em>const</em> <em>int</em> <dfn class="local col7 decl" id="147kRowStride" title='kRowStride' data-type='const int' data-ref="147kRowStride">kRowStride</dfn> = <var>3</var>;</td></tr>
<tr><th id="636">636</th><td>  <a class="ref" href="../../include/ceres/rotation.h.html#_ZN5ceres27EulerAnglesToRotationMatrixEPKT_iPS0_" title='ceres::EulerAnglesToRotationMatrix' data-ref="_ZN5ceres27EulerAnglesToRotationMatrixEPKT_iPS0_">EulerAnglesToRotationMatrix</a>(<a class="local col4 ref" href="#144ea" title='ea' data-ref="144ea">ea</a>, <a class="local col7 ref" href="#147kRowStride" title='kRowStride' data-ref="147kRowStride">kRowStride</a>, <a class="local col6 ref" href="#146ea_matrix" title='ea_matrix' data-ref="146ea_matrix">ea_matrix</a>);</td></tr>
<tr><th id="637">637</th><td></td></tr>
<tr><th id="638">638</th><td>  <a class="macro" href="gmock/gmock.h.html#9209" title="switch (0) case 0: default: if (const ::testing::AssertionResult gtest_ar = (::testing::internal::MakePredicateFormatterFromMatcher(IsOrthonormal())(&quot;aa_matrix&quot;, aa_matrix))) ; else ::testing::internal::AssertHelper(::testing::TestPartResult::kNonFatalFailure, &quot;/home/yzf/code/ceres-solver/internal/ceres/rotation_test.cc&quot;, 638, gtest_ar.failure_message()) = ::testing::Message()" data-ref="_M/EXPECT_THAT">EXPECT_THAT</a>(<a class="local col5 ref" href="#145aa_matrix" title='aa_matrix' data-ref="145aa_matrix">aa_matrix</a>, <a class="ref" href="#181" title='ceres::internal::IsOrthonormal' data-ref="_ZN5ceres8internal13IsOrthonormalEv">IsOrthonormal</a>());</td></tr>
<tr><th id="639">639</th><td>  <a class="macro" href="gmock/gmock.h.html#9209" title="switch (0) case 0: default: if (const ::testing::AssertionResult gtest_ar = (::testing::internal::MakePredicateFormatterFromMatcher(IsOrthonormal())(&quot;ea_matrix&quot;, ea_matrix))) ; else ::testing::internal::AssertHelper(::testing::TestPartResult::kNonFatalFailure, &quot;/home/yzf/code/ceres-solver/internal/ceres/rotation_test.cc&quot;, 639, gtest_ar.failure_message()) = ::testing::Message()" data-ref="_M/EXPECT_THAT">EXPECT_THAT</a>(<a class="local col6 ref" href="#146ea_matrix" title='ea_matrix' data-ref="146ea_matrix">ea_matrix</a>, <a class="ref" href="#181" title='ceres::internal::IsOrthonormal' data-ref="_ZN5ceres8internal13IsOrthonormalEv">IsOrthonormal</a>());</td></tr>
<tr><th id="640">640</th><td>  <a class="macro" href="gmock/gmock.h.html#9209" title="switch (0) case 0: default: if (const ::testing::AssertionResult gtest_ar = (::testing::internal::MakePredicateFormatterFromMatcher(IsNear3x3Matrix(aa_matrix))(&quot;ea_matrix&quot;, ea_matrix))) ; else ::testing::internal::AssertHelper(::testing::TestPartResult::kNonFatalFailure, &quot;/home/yzf/code/ceres-solver/internal/ceres/rotation_test.cc&quot;, 640, gtest_ar.failure_message()) = ::testing::Message()" data-ref="_M/EXPECT_THAT">EXPECT_THAT</a>(<a class="local col6 ref" href="#146ea_matrix" title='ea_matrix' data-ref="146ea_matrix">ea_matrix</a>, <a class="ref" href="#210" title='ceres::internal::IsNear3x3Matrix' data-ref="_ZN5ceres8internal15IsNear3x3MatrixET_">IsNear3x3Matrix</a>(<a class="local col5 ref" href="#145aa_matrix" title='aa_matrix' data-ref="145aa_matrix">aa_matrix</a>));</td></tr>
<tr><th id="641">641</th><td>}</td></tr>
<tr><th id="642">642</th><td></td></tr>
<tr><th id="643">643</th><td><i>// Test with rotation axis along the x/y/z axes.</i></td></tr>
<tr><th id="644">644</th><td><i>// Also test zero rotation.</i></td></tr>
<tr><th id="645">645</th><td><a class="macro" href="gtest/gtest.h.html#21153" title="class EulerAnglesToRotationMatrix_OnAxis_Test : public ::testing::Test { public: EulerAnglesToRotationMatrix_OnAxis_Test() {} private: virtual void TestBody(); static ::testing::TestInfo* const test_info_ __attribute__ ((unused)); EulerAnglesToRotationMatrix_OnAxis_Test(EulerAnglesToRotationMatrix_OnAxis_Test const &amp;); void operator=(EulerAnglesToRotationMatrix_OnAxis_Test const &amp;);};::testing::TestInfo* const EulerAnglesToRotationMatrix_OnAxis_Test ::test_info_ = ::testing::internal::MakeAndRegisterTestInfo( &quot;EulerAnglesToRotationMatrix&quot;, &quot;OnAxis&quot;, __null, __null, ::testing::internal::CodeLocation(&quot;/home/yzf/code/ceres-solver/internal/ceres/rotation_test.cc&quot;, 645), (::testing::internal::GetTestTypeId()), ::testing::Test::SetUpTestCase, ::testing::Test::TearDownTestCase, new ::testing::internal::TestFactoryImpl&lt; EulerAnglesToRotationMatrix_OnAxis_Test&gt;);void EulerAnglesToRotationMatrix_OnAxis_Test::TestBody()" data-ref="_M/TEST">TEST</a>(EulerAnglesToRotationMatrix, OnAxis) {</td></tr>
<tr><th id="646">646</th><td>  <em>int</em> <dfn class="local col8 decl" id="148n_tests" title='n_tests' data-type='int' data-ref="148n_tests">n_tests</dfn> = <var>0</var>;</td></tr>
<tr><th id="647">647</th><td>  <b>for</b> (<em>double</em> <dfn class="local col9 decl" id="149x" title='x' data-type='double' data-ref="149x">x</dfn> = -<var>1.0</var>; <a class="local col9 ref" href="#149x" title='x' data-ref="149x">x</a> &lt;= <var>1.0</var>; <a class="local col9 ref" href="#149x" title='x' data-ref="149x">x</a> += <var>1.0</var>) {</td></tr>
<tr><th id="648">648</th><td>    <b>for</b> (<em>double</em> <dfn class="local col0 decl" id="150y" title='y' data-type='double' data-ref="150y">y</dfn> = -<var>1.0</var>; <a class="local col0 ref" href="#150y" title='y' data-ref="150y">y</a> &lt;= <var>1.0</var>; <a class="local col0 ref" href="#150y" title='y' data-ref="150y">y</a> += <var>1.0</var>) {</td></tr>
<tr><th id="649">649</th><td>      <b>for</b> (<em>double</em> <dfn class="local col1 decl" id="151z" title='z' data-type='double' data-ref="151z">z</dfn> = -<var>1.0</var>; <a class="local col1 ref" href="#151z" title='z' data-ref="151z">z</a> &lt;= <var>1.0</var>; <a class="local col1 ref" href="#151z" title='z' data-ref="151z">z</a> += <var>1.0</var>) {</td></tr>
<tr><th id="650">650</th><td>        <b>if</b> ((<a class="local col9 ref" href="#149x" title='x' data-ref="149x">x</a> != <var>0</var>) + (<a class="local col0 ref" href="#150y" title='y' data-ref="150y">y</a> != <var>0</var>) + (<a class="local col1 ref" href="#151z" title='z' data-ref="151z">z</a> != <var>0</var>) &gt; <var>1</var>)</td></tr>
<tr><th id="651">651</th><td>          <b>continue</b>;</td></tr>
<tr><th id="652">652</th><td>        <em>double</em> <dfn class="local col2 decl" id="152axis_angle" title='axis_angle' data-type='double [3]' data-ref="152axis_angle">axis_angle</dfn>[<var>3</var>] = {<a class="local col9 ref" href="#149x" title='x' data-ref="149x">x</a>, <a class="local col0 ref" href="#150y" title='y' data-ref="150y">y</a>, <a class="local col1 ref" href="#151z" title='z' data-ref="151z">z</a>};</td></tr>
<tr><th id="653">653</th><td>        <em>double</em> <dfn class="local col3 decl" id="153euler_angles" title='euler_angles' data-type='double [3]' data-ref="153euler_angles">euler_angles</dfn>[<var>3</var>] = {<a class="local col9 ref" href="#149x" title='x' data-ref="149x">x</a>, <a class="local col0 ref" href="#150y" title='y' data-ref="150y">y</a>, <a class="local col1 ref" href="#151z" title='z' data-ref="151z">z</a>};</td></tr>
<tr><th id="654">654</th><td>        <a class="tu ref" href="#_ZN5ceres8internalL23CompareEulerToAngleAxisEPdS1_" title='ceres::internal::CompareEulerToAngleAxis' data-use='c' data-ref="_ZN5ceres8internalL23CompareEulerToAngleAxisEPdS1_">CompareEulerToAngleAxis</a>(<a class="local col2 ref" href="#152axis_angle" title='axis_angle' data-ref="152axis_angle">axis_angle</a>, <a class="local col3 ref" href="#153euler_angles" title='euler_angles' data-ref="153euler_angles">euler_angles</a>);</td></tr>
<tr><th id="655">655</th><td>        ++<a class="local col8 ref" href="#148n_tests" title='n_tests' data-ref="148n_tests">n_tests</a>;</td></tr>
<tr><th id="656">656</th><td>      }</td></tr>
<tr><th id="657">657</th><td>    }</td></tr>
<tr><th id="658">658</th><td>  }</td></tr>
<tr><th id="659">659</th><td>  <a class="macro" href="../../../include/glog/logging.h.html#765" title="while (google::CheckOpString _result = google::Check_EQImpl( google::GetReferenceableValue(7), google::GetReferenceableValue(n_tests), &quot;7&quot; &quot; &quot; &quot;==&quot; &quot; &quot; &quot;n_tests&quot;)) google::LogMessageFatal(&quot;/home/yzf/code/ceres-solver/internal/ceres/rotation_test.cc&quot;, 659, _result).stream()" data-ref="_M/CHECK_EQ">CHECK_EQ</a>(<var>7</var>, <a class="local col8 ref" href="#148n_tests" title='n_tests' data-ref="148n_tests">n_tests</a>);</td></tr>
<tr><th id="660">660</th><td>}</td></tr>
<tr><th id="661">661</th><td></td></tr>
<tr><th id="662">662</th><td><i>// Test that a random rotation produces an orthonormal rotation</i></td></tr>
<tr><th id="663">663</th><td><i>// matrix.</i></td></tr>
<tr><th id="664">664</th><td><a class="macro" href="gtest/gtest.h.html#21153" title="class EulerAnglesToRotationMatrix_IsOrthonormal_Test : public ::testing::Test { public: EulerAnglesToRotationMatrix_IsOrthonormal_Test() {} private: virtual void TestBody(); static ::testing::TestInfo* const test_info_ __attribute__ ((unused)); EulerAnglesToRotationMatrix_IsOrthonormal_Test(EulerAnglesToRotationMatrix_IsOrthonormal_Test const &amp;); void operator=(EulerAnglesToRotationMatrix_IsOrthonormal_Test const &amp;);};::testing::TestInfo* const EulerAnglesToRotationMatrix_IsOrthonormal_Test ::test_info_ = ::testing::internal::MakeAndRegisterTestInfo( &quot;EulerAnglesToRotationMatrix&quot;, &quot;IsOrthonormal&quot;, __null, __null, ::testing::internal::CodeLocation(&quot;/home/yzf/code/ceres-solver/internal/ceres/rotation_test.cc&quot;, 664), (::testing::internal::GetTestTypeId()), ::testing::Test::SetUpTestCase, ::testing::Test::TearDownTestCase, new ::testing::internal::TestFactoryImpl&lt; EulerAnglesToRotationMatrix_IsOrthonormal_Test&gt;);void EulerAnglesToRotationMatrix_IsOrthonormal_Test::TestBody()" data-ref="_M/TEST">TEST</a>(EulerAnglesToRotationMatrix, IsOrthonormal) {</td></tr>
<tr><th id="665">665</th><td>  <a class="ref" href="../../../include/stdlib.h.html#srand" title='srand' data-ref="srand">srand</a>(<var>5</var>);</td></tr>
<tr><th id="666">666</th><td>  <b>for</b> (<em>int</em> <dfn class="local col4 decl" id="154trial" title='trial' data-type='int' data-ref="154trial">trial</dfn> = <var>0</var>; <a class="local col4 ref" href="#154trial" title='trial' data-ref="154trial">trial</a> &lt; <a class="tu ref" href="#ceres::internal::kNumTrials" title='ceres::internal::kNumTrials' data-use='r' data-ref="ceres::internal::kNumTrials">kNumTrials</a>; ++<a class="local col4 ref" href="#154trial" title='trial' data-ref="154trial">trial</a>) {</td></tr>
<tr><th id="667">667</th><td>    <em>double</em> <dfn class="local col5 decl" id="155euler_angles_degrees" title='euler_angles_degrees' data-type='double [3]' data-ref="155euler_angles_degrees">euler_angles_degrees</dfn>[<var>3</var>];</td></tr>
<tr><th id="668">668</th><td>    <b>for</b> (<em>int</em> <dfn class="local col6 decl" id="156i" title='i' data-type='int' data-ref="156i">i</dfn> = <var>0</var>; <a class="local col6 ref" href="#156i" title='i' data-ref="156i">i</a> &lt; <var>3</var>; ++<a class="local col6 ref" href="#156i" title='i' data-ref="156i">i</a>) {</td></tr>
<tr><th id="669">669</th><td>      <a class="local col5 ref" href="#155euler_angles_degrees" title='euler_angles_degrees' data-ref="155euler_angles_degrees">euler_angles_degrees</a>[<a class="local col6 ref" href="#156i" title='i' data-ref="156i">i</a>] = <a class="ref" href="#_ZN5ceres8internal10RandDoubleEv" title='ceres::internal::RandDouble' data-ref="_ZN5ceres8internal10RandDoubleEv">RandDouble</a>() * <var>360.0</var> - <var>180.0</var>;</td></tr>
<tr><th id="670">670</th><td>    }</td></tr>
<tr><th id="671">671</th><td>    <em>double</em> <dfn class="local col7 decl" id="157rotation_matrix" title='rotation_matrix' data-type='double [9]' data-ref="157rotation_matrix">rotation_matrix</dfn>[<var>9</var>];</td></tr>
<tr><th id="672">672</th><td>    <a class="ref" href="../../include/ceres/rotation.h.html#_ZN5ceres27EulerAnglesToRotationMatrixEPKT_iPS0_" title='ceres::EulerAnglesToRotationMatrix' data-ref="_ZN5ceres27EulerAnglesToRotationMatrixEPKT_iPS0_">EulerAnglesToRotationMatrix</a>(<a class="local col5 ref" href="#155euler_angles_degrees" title='euler_angles_degrees' data-ref="155euler_angles_degrees">euler_angles_degrees</a>, <var>3</var>, <a class="local col7 ref" href="#157rotation_matrix" title='rotation_matrix' data-ref="157rotation_matrix">rotation_matrix</a>);</td></tr>
<tr><th id="673">673</th><td>    <a class="macro" href="gmock/gmock.h.html#9209" title="switch (0) case 0: default: if (const ::testing::AssertionResult gtest_ar = (::testing::internal::MakePredicateFormatterFromMatcher(IsOrthonormal())(&quot;rotation_matrix&quot;, rotation_matrix))) ; else ::testing::internal::AssertHelper(::testing::TestPartResult::kNonFatalFailure, &quot;/home/yzf/code/ceres-solver/internal/ceres/rotation_test.cc&quot;, 673, gtest_ar.failure_message()) = ::testing::Message()" data-ref="_M/EXPECT_THAT">EXPECT_THAT</a>(<a class="local col7 ref" href="#157rotation_matrix" title='rotation_matrix' data-ref="157rotation_matrix">rotation_matrix</a>, <a class="ref" href="#181" title='ceres::internal::IsOrthonormal' data-ref="_ZN5ceres8internal13IsOrthonormalEv">IsOrthonormal</a>());</td></tr>
<tr><th id="674">674</th><td>  }</td></tr>
<tr><th id="675">675</th><td>}</td></tr>
<tr><th id="676">676</th><td></td></tr>
<tr><th id="677">677</th><td><i>// Tests using Jets for specific behavior involving auto differentiation</i></td></tr>
<tr><th id="678">678</th><td><i>// near singularity points.</i></td></tr>
<tr><th id="679">679</th><td></td></tr>
<tr><th id="680">680</th><td><b>typedef</b> <a class="type" href="../../include/ceres/jet.h.html#ceres::Jet" title='ceres::Jet' data-ref="ceres::Jet">Jet</a>&lt;<em>double</em>, <var>3</var>&gt; <dfn class="typedef" id="ceres::internal::J3" title='ceres::internal::J3' data-type='Jet&lt;double, 3&gt;' data-ref="ceres::internal::J3">J3</dfn>;</td></tr>
<tr><th id="681">681</th><td><b>typedef</b> <a class="type" href="../../include/ceres/jet.h.html#ceres::Jet" title='ceres::Jet' data-ref="ceres::Jet">Jet</a>&lt;<em>double</em>, <var>4</var>&gt; <dfn class="typedef" id="ceres::internal::J4" title='ceres::internal::J4' data-type='Jet&lt;double, 4&gt;' data-ref="ceres::internal::J4">J4</dfn>;</td></tr>
<tr><th id="682">682</th><td></td></tr>
<tr><th id="683">683</th><td><a class="typedef" href="#ceres::internal::J3" title='ceres::internal::J3' data-type='Jet&lt;double, 3&gt;' data-ref="ceres::internal::J3">J3</a> <dfn class="decl def" id="_ZN5ceres8internal6MakeJ3Edddd" title='ceres::internal::MakeJ3' data-ref="_ZN5ceres8internal6MakeJ3Edddd">MakeJ3</dfn>(<em>double</em> <dfn class="local col8 decl" id="158a" title='a' data-type='double' data-ref="158a">a</dfn>, <em>double</em> <dfn class="local col9 decl" id="159v0" title='v0' data-type='double' data-ref="159v0">v0</dfn>, <em>double</em> <dfn class="local col0 decl" id="160v1" title='v1' data-type='double' data-ref="160v1">v1</dfn>, <em>double</em> <dfn class="local col1 decl" id="161v2" title='v2' data-type='double' data-ref="161v2">v2</dfn>) {</td></tr>
<tr><th id="684">684</th><td>  <a class="typedef" href="#ceres::internal::J3" title='ceres::internal::J3' data-type='Jet&lt;double, 3&gt;' data-ref="ceres::internal::J3">J3</a> <a class="ref fake" href="../../include/ceres/jet.h.html#_ZN5ceres3JetC1Ev" title='ceres::Jet::Jet&lt;T, N&gt;' data-ref="_ZN5ceres3JetC1Ev"></a><dfn class="local col2 decl" id="162j" title='j' data-type='J3' data-ref="162j">j</dfn>;</td></tr>
<tr><th id="685">685</th><td>  <a class="local col2 ref" href="#162j" title='j' data-ref="162j">j</a>.<a class="ref" href="../../include/ceres/jet.h.html#ceres::Jet::a" title='ceres::Jet&lt;double, 3&gt;::a' data-ref="ceres::Jet::a">a</a> = <a class="local col8 ref" href="#158a" title='a' data-ref="158a">a</a>;</td></tr>
<tr><th id="686">686</th><td>  <a class="local col2 ref" href="#162j" title='j' data-ref="162j">j</a>.<a class="ref" href="../../include/ceres/jet.h.html#ceres::Jet::v" title='ceres::Jet&lt;double, 3&gt;::v' data-ref="ceres::Jet::v">v</a><a class="ref" href="../../../include/eigen3/Eigen/src/Core/DenseCoeffsBase.h.html#_ZN5Eigen15DenseCoeffsBaseIT_Li1EEixENS_8internal6traitsIS1_E5IndexE" title='Eigen::DenseCoeffsBase&lt;type-parameter-0-0, 1&gt;::operator[]' data-ref="_ZN5Eigen15DenseCoeffsBaseIT_Li1EEixENS_8internal6traitsIS1_E5IndexE">[<var>0</var>]</a> = <a class="local col9 ref" href="#159v0" title='v0' data-ref="159v0">v0</a>;</td></tr>
<tr><th id="687">687</th><td>  <a class="local col2 ref" href="#162j" title='j' data-ref="162j">j</a>.<a class="ref" href="../../include/ceres/jet.h.html#ceres::Jet::v" title='ceres::Jet&lt;double, 3&gt;::v' data-ref="ceres::Jet::v">v</a><a class="ref" href="../../../include/eigen3/Eigen/src/Core/DenseCoeffsBase.h.html#_ZN5Eigen15DenseCoeffsBaseIT_Li1EEixENS_8internal6traitsIS1_E5IndexE" title='Eigen::DenseCoeffsBase&lt;type-parameter-0-0, 1&gt;::operator[]' data-ref="_ZN5Eigen15DenseCoeffsBaseIT_Li1EEixENS_8internal6traitsIS1_E5IndexE">[<var>1</var>]</a> = <a class="local col0 ref" href="#160v1" title='v1' data-ref="160v1">v1</a>;</td></tr>
<tr><th id="688">688</th><td>  <a class="local col2 ref" href="#162j" title='j' data-ref="162j">j</a>.<a class="ref" href="../../include/ceres/jet.h.html#ceres::Jet::v" title='ceres::Jet&lt;double, 3&gt;::v' data-ref="ceres::Jet::v">v</a><a class="ref" href="../../../include/eigen3/Eigen/src/Core/DenseCoeffsBase.h.html#_ZN5Eigen15DenseCoeffsBaseIT_Li1EEixENS_8internal6traitsIS1_E5IndexE" title='Eigen::DenseCoeffsBase&lt;type-parameter-0-0, 1&gt;::operator[]' data-ref="_ZN5Eigen15DenseCoeffsBaseIT_Li1EEixENS_8internal6traitsIS1_E5IndexE">[<var>2</var>]</a> = <a class="local col1 ref" href="#161v2" title='v2' data-ref="161v2">v2</a>;</td></tr>
<tr><th id="689">689</th><td>  <b>return</b> <a class="local col2 ref" href="#162j" title='j' data-ref="162j">j</a>;</td></tr>
<tr><th id="690">690</th><td>}</td></tr>
<tr><th id="691">691</th><td></td></tr>
<tr><th id="692">692</th><td><a class="typedef" href="#ceres::internal::J4" title='ceres::internal::J4' data-type='Jet&lt;double, 4&gt;' data-ref="ceres::internal::J4">J4</a> <dfn class="decl def" id="_ZN5ceres8internal6MakeJ4Eddddd" title='ceres::internal::MakeJ4' data-ref="_ZN5ceres8internal6MakeJ4Eddddd">MakeJ4</dfn>(<em>double</em> <dfn class="local col3 decl" id="163a" title='a' data-type='double' data-ref="163a">a</dfn>, <em>double</em> <dfn class="local col4 decl" id="164v0" title='v0' data-type='double' data-ref="164v0">v0</dfn>, <em>double</em> <dfn class="local col5 decl" id="165v1" title='v1' data-type='double' data-ref="165v1">v1</dfn>, <em>double</em> <dfn class="local col6 decl" id="166v2" title='v2' data-type='double' data-ref="166v2">v2</dfn>, <em>double</em> <dfn class="local col7 decl" id="167v3" title='v3' data-type='double' data-ref="167v3">v3</dfn>) {</td></tr>
<tr><th id="693">693</th><td>  <a class="typedef" href="#ceres::internal::J4" title='ceres::internal::J4' data-type='Jet&lt;double, 4&gt;' data-ref="ceres::internal::J4">J4</a> <a class="ref fake" href="../../include/ceres/jet.h.html#_ZN5ceres3JetC1Ev" title='ceres::Jet::Jet&lt;T, N&gt;' data-ref="_ZN5ceres3JetC1Ev"></a><dfn class="local col8 decl" id="168j" title='j' data-type='J4' data-ref="168j">j</dfn>;</td></tr>
<tr><th id="694">694</th><td>  <a class="local col8 ref" href="#168j" title='j' data-ref="168j">j</a>.<a class="ref" href="../../include/ceres/jet.h.html#ceres::Jet::a" title='ceres::Jet&lt;double, 4&gt;::a' data-ref="ceres::Jet::a">a</a> = <a class="local col3 ref" href="#163a" title='a' data-ref="163a">a</a>;</td></tr>
<tr><th id="695">695</th><td>  <a class="local col8 ref" href="#168j" title='j' data-ref="168j">j</a>.<a class="ref" href="../../include/ceres/jet.h.html#ceres::Jet::v" title='ceres::Jet&lt;double, 4&gt;::v' data-ref="ceres::Jet::v">v</a><a class="ref" href="../../../include/eigen3/Eigen/src/Core/DenseCoeffsBase.h.html#_ZN5Eigen15DenseCoeffsBaseIT_Li1EEixENS_8internal6traitsIS1_E5IndexE" title='Eigen::DenseCoeffsBase&lt;type-parameter-0-0, 1&gt;::operator[]' data-ref="_ZN5Eigen15DenseCoeffsBaseIT_Li1EEixENS_8internal6traitsIS1_E5IndexE">[<var>0</var>]</a> = <a class="local col4 ref" href="#164v0" title='v0' data-ref="164v0">v0</a>;</td></tr>
<tr><th id="696">696</th><td>  <a class="local col8 ref" href="#168j" title='j' data-ref="168j">j</a>.<a class="ref" href="../../include/ceres/jet.h.html#ceres::Jet::v" title='ceres::Jet&lt;double, 4&gt;::v' data-ref="ceres::Jet::v">v</a><a class="ref" href="../../../include/eigen3/Eigen/src/Core/DenseCoeffsBase.h.html#_ZN5Eigen15DenseCoeffsBaseIT_Li1EEixENS_8internal6traitsIS1_E5IndexE" title='Eigen::DenseCoeffsBase&lt;type-parameter-0-0, 1&gt;::operator[]' data-ref="_ZN5Eigen15DenseCoeffsBaseIT_Li1EEixENS_8internal6traitsIS1_E5IndexE">[<var>1</var>]</a> = <a class="local col5 ref" href="#165v1" title='v1' data-ref="165v1">v1</a>;</td></tr>
<tr><th id="697">697</th><td>  <a class="local col8 ref" href="#168j" title='j' data-ref="168j">j</a>.<a class="ref" href="../../include/ceres/jet.h.html#ceres::Jet::v" title='ceres::Jet&lt;double, 4&gt;::v' data-ref="ceres::Jet::v">v</a><a class="ref" href="../../../include/eigen3/Eigen/src/Core/DenseCoeffsBase.h.html#_ZN5Eigen15DenseCoeffsBaseIT_Li1EEixENS_8internal6traitsIS1_E5IndexE" title='Eigen::DenseCoeffsBase&lt;type-parameter-0-0, 1&gt;::operator[]' data-ref="_ZN5Eigen15DenseCoeffsBaseIT_Li1EEixENS_8internal6traitsIS1_E5IndexE">[<var>2</var>]</a> = <a class="local col6 ref" href="#166v2" title='v2' data-ref="166v2">v2</a>;</td></tr>
<tr><th id="698">698</th><td>  <a class="local col8 ref" href="#168j" title='j' data-ref="168j">j</a>.<a class="ref" href="../../include/ceres/jet.h.html#ceres::Jet::v" title='ceres::Jet&lt;double, 4&gt;::v' data-ref="ceres::Jet::v">v</a><a class="ref" href="../../../include/eigen3/Eigen/src/Core/DenseCoeffsBase.h.html#_ZN5Eigen15DenseCoeffsBaseIT_Li1EEixENS_8internal6traitsIS1_E5IndexE" title='Eigen::DenseCoeffsBase&lt;type-parameter-0-0, 1&gt;::operator[]' data-ref="_ZN5Eigen15DenseCoeffsBaseIT_Li1EEixENS_8internal6traitsIS1_E5IndexE">[<var>3</var>]</a> = <a class="local col7 ref" href="#167v3" title='v3' data-ref="167v3">v3</a>;</td></tr>
<tr><th id="699">699</th><td>  <b>return</b> <a class="local col8 ref" href="#168j" title='j' data-ref="168j">j</a>;</td></tr>
<tr><th id="700">700</th><td>}</td></tr>
<tr><th id="701">701</th><td></td></tr>
<tr><th id="702">702</th><td><em>bool</em> <dfn class="decl def" id="_ZN5ceres8internal7IsCloseEdd" title='ceres::internal::IsClose' data-ref="_ZN5ceres8internal7IsCloseEdd">IsClose</dfn>(<em>double</em> <dfn class="local col9 decl" id="169x" title='x' data-type='double' data-ref="169x">x</dfn>, <em>double</em> <dfn class="local col0 decl" id="170y" title='y' data-type='double' data-ref="170y">y</dfn>) {</td></tr>
<tr><th id="703">703</th><td>  <a class="macro" href="gtest/gtest.h.html#20471" title="switch (0) case 0: default: if (const ::testing::AssertionResult gtest_ar_ = ::testing::AssertionResult(!(IsNaN(x)))) ; else ::testing::internal::AssertHelper(::testing::TestPartResult::kNonFatalFailure, &quot;/home/yzf/code/ceres-solver/internal/ceres/rotation_test.cc&quot;, 703, ::testing::internal::GetBoolAssertionFailureMessage( gtest_ar_, &quot;IsNaN(x)&quot;, &quot;true&quot;, &quot;false&quot;).c_str()) = ::testing::Message()" data-ref="_M/EXPECT_FALSE">EXPECT_FALSE</a>(<a class="ref" href="../../include/ceres/fpclassify.h.html#_ZN5ceres5IsNaNEd" title='ceres::IsNaN' data-ref="_ZN5ceres5IsNaNEd">IsNaN</a>(<a class="local col9 ref" href="#169x" title='x' data-ref="169x">x</a>));</td></tr>
<tr><th id="704">704</th><td>  <a class="macro" href="gtest/gtest.h.html#20471" title="switch (0) case 0: default: if (const ::testing::AssertionResult gtest_ar_ = ::testing::AssertionResult(!(IsNaN(y)))) ; else ::testing::internal::AssertHelper(::testing::TestPartResult::kNonFatalFailure, &quot;/home/yzf/code/ceres-solver/internal/ceres/rotation_test.cc&quot;, 704, ::testing::internal::GetBoolAssertionFailureMessage( gtest_ar_, &quot;IsNaN(y)&quot;, &quot;true&quot;, &quot;false&quot;).c_str()) = ::testing::Message()" data-ref="_M/EXPECT_FALSE">EXPECT_FALSE</a>(<a class="ref" href="../../include/ceres/fpclassify.h.html#_ZN5ceres5IsNaNEd" title='ceres::IsNaN' data-ref="_ZN5ceres5IsNaNEd">IsNaN</a>(<a class="local col0 ref" href="#170y" title='y' data-ref="170y">y</a>));</td></tr>
<tr><th id="705">705</th><td>  <b>return</b> <span class="namespace">internal::</span><a class="ref" href="is_close.h.html#_ZN5ceres8internal7IsCloseEdddPdS1_" title='ceres::internal::IsClose' data-ref="_ZN5ceres8internal7IsCloseEdddPdS1_">IsClose</a>(<a class="local col9 ref" href="#169x" title='x' data-ref="169x">x</a>, <a class="local col0 ref" href="#170y" title='y' data-ref="170y">y</a>, <a class="tu ref" href="#ceres::internal::kTolerance" title='ceres::internal::kTolerance' data-use='r' data-ref="ceres::internal::kTolerance">kTolerance</a>, <span class="macro" title="__null" data-ref="_M/NULL">NULL</span>, <span class="macro" title="__null" data-ref="_M/NULL">NULL</span>);</td></tr>
<tr><th id="706">706</th><td>}</td></tr>
<tr><th id="707">707</th><td></td></tr>
<tr><th id="708">708</th><td><b>template</b> &lt;<em>int</em> N&gt;</td></tr>
<tr><th id="709">709</th><td><em>bool</em> <dfn class="decl def" id="_ZN5ceres8internal7IsCloseERKNS_3JetIdXT_EEES4_" title='ceres::internal::IsClose' data-ref="_ZN5ceres8internal7IsCloseERKNS_3JetIdXT_EEES4_">IsClose</dfn>(<em>const</em> <a class="type" href="../../include/ceres/jet.h.html#ceres::Jet" title='ceres::Jet' data-ref="ceres::Jet">Jet</a>&lt;<em>double</em>, <a class="tu ref" href="#N" title='N' data-ref="N">N</a>&gt; &amp;<dfn class="local col1 decl" id="171x" title='x' data-type='const Jet&lt;double, N&gt; &amp;' data-ref="171x">x</dfn>, <em>const</em> <a class="type" href="../../include/ceres/jet.h.html#ceres::Jet" title='ceres::Jet' data-ref="ceres::Jet">Jet</a>&lt;<em>double</em>, <a class="tu ref" href="#N" title='N' data-ref="N">N</a>&gt; &amp;<dfn class="local col2 decl" id="172y" title='y' data-type='const Jet&lt;double, N&gt; &amp;' data-ref="172y">y</dfn>) {</td></tr>
<tr><th id="710">710</th><td>  <b>if</b> (!IsClose(<a class="local col1 ref" href="#171x" title='x' data-ref="171x">x</a>.a, <a class="local col2 ref" href="#172y" title='y' data-ref="172y">y</a>.a)) {</td></tr>
<tr><th id="711">711</th><td>    <b>return</b> <b>false</b>;</td></tr>
<tr><th id="712">712</th><td>  }</td></tr>
<tr><th id="713">713</th><td>  <b>for</b> (<em>int</em> <dfn class="local col3 decl" id="173i" title='i' data-type='int' data-ref="173i">i</dfn> = <var>0</var>; <a class="local col3 ref" href="#173i" title='i' data-ref="173i">i</a> &lt; <a class="tu ref" href="#N" title='N' data-use='r' data-ref="N">N</a>; <a class="local col3 ref" href="#173i" title='i' data-ref="173i">i</a>++) {</td></tr>
<tr><th id="714">714</th><td>    <b>if</b> (!IsClose(<a class="local col1 ref" href="#171x" title='x' data-ref="171x">x</a>.v[<a class="local col3 ref" href="#173i" title='i' data-ref="173i">i</a>], <a class="local col2 ref" href="#172y" title='y' data-ref="172y">y</a>.v[<a class="local col3 ref" href="#173i" title='i' data-ref="173i">i</a>])) {</td></tr>
<tr><th id="715">715</th><td>      <b>return</b> <b>false</b>;</td></tr>
<tr><th id="716">716</th><td>    }</td></tr>
<tr><th id="717">717</th><td>  }</td></tr>
<tr><th id="718">718</th><td>  <b>return</b> <b>true</b>;</td></tr>
<tr><th id="719">719</th><td>}</td></tr>
<tr><th id="720">720</th><td></td></tr>
<tr><th id="721">721</th><td><b>template</b> &lt;<em>int</em> M, <em>int</em> N&gt;</td></tr>
<tr><th id="722">722</th><td><em>void</em> <dfn class="decl def" id="_ZN5ceres8internal20ExpectJetArraysCloseEPKNS_3JetIdXT0_EEES4_" title='ceres::internal::ExpectJetArraysClose' data-ref="_ZN5ceres8internal20ExpectJetArraysCloseEPKNS_3JetIdXT0_EEES4_">ExpectJetArraysClose</dfn>(<em>const</em> <a class="type" href="../../include/ceres/jet.h.html#ceres::Jet" title='ceres::Jet' data-ref="ceres::Jet">Jet</a>&lt;<em>double</em>, <a class="tu ref" href="#N" title='N' data-ref="N">N</a>&gt; *<dfn class="local col4 decl" id="174x" title='x' data-type='const Jet&lt;double, N&gt; *' data-ref="174x">x</dfn>, <em>const</em> <a class="type" href="../../include/ceres/jet.h.html#ceres::Jet" title='ceres::Jet' data-ref="ceres::Jet">Jet</a>&lt;<em>double</em>, <a class="tu ref" href="#N" title='N' data-ref="N">N</a>&gt; *<dfn class="local col5 decl" id="175y" title='y' data-type='const Jet&lt;double, N&gt; *' data-ref="175y">y</dfn>) {</td></tr>
<tr><th id="723">723</th><td>  <b>for</b> (<em>int</em> <dfn class="local col6 decl" id="176i" title='i' data-type='int' data-ref="176i">i</dfn> = <var>0</var>; <a class="local col6 ref" href="#176i" title='i' data-ref="176i">i</a> &lt; <a class="tu ref" href="#M" title='M' data-use='r' data-ref="M">M</a>; <a class="local col6 ref" href="#176i" title='i' data-ref="176i">i</a>++) {</td></tr>
<tr><th id="724">724</th><td>    <b>if</b> (!IsClose(<a class="local col4 ref" href="#174x" title='x' data-ref="174x">x</a>[<a class="local col6 ref" href="#176i" title='i' data-ref="176i">i</a>], <a class="local col5 ref" href="#175y" title='y' data-ref="175y">y</a>[<a class="local col6 ref" href="#176i" title='i' data-ref="176i">i</a>])) {</td></tr>
<tr><th id="725">725</th><td>      <a class="macro" href="../../../include/glog/logging.h.html#483" title="google::LogMessage( &quot;/home/yzf/code/ceres-solver/internal/ceres/rotation_test.cc&quot;, 725, google::GLOG_ERROR).stream()" data-ref="_M/LOG">LOG</a>(ERROR) <a class="ref" href="../../../include/c++/4.8/ostream.html#_ZStlsRSt13basic_ostreamIcT_EPKc" title='std::operator&lt;&lt;' data-ref="_ZStlsRSt13basic_ostreamIcT_EPKc">&lt;&lt;</a> <q>"Jet "</q> <a class="ref" href="../../../include/c++/4.8/ostream.html#_ZNSt13basic_ostreamlsEi" title='std::basic_ostream::operator&lt;&lt;' data-ref="_ZNSt13basic_ostreamlsEi">&lt;&lt;</a> <a class="local col6 ref" href="#176i" title='i' data-ref="176i">i</a> <a class="ref" href="../../../include/c++/4.8/ostream.html#_ZStlsRSt13basic_ostreamIcT_EPKc" title='std::operator&lt;&lt;' data-ref="_ZStlsRSt13basic_ostreamIcT_EPKc">&lt;&lt;</a> <q>"/"</q> <a class="ref" href="../../../include/c++/4.8/ostream.html#_ZNSt13basic_ostreamlsEi" title='std::basic_ostream::operator&lt;&lt;' data-ref="_ZNSt13basic_ostreamlsEi">&lt;&lt;</a> <a class="tu ref" href="#M" title='M' data-use='r' data-ref="M">M</a> <a class="ref" href="../../../include/c++/4.8/ostream.html#_ZStlsRSt13basic_ostreamIcT_EPKc" title='std::operator&lt;&lt;' data-ref="_ZStlsRSt13basic_ostreamIcT_EPKc">&lt;&lt;</a> <q>" not equal"</q>;</td></tr>
<tr><th id="726">726</th><td>      <a class="macro" href="../../../include/glog/logging.h.html#483" title="google::LogMessage( &quot;/home/yzf/code/ceres-solver/internal/ceres/rotation_test.cc&quot;, 726, google::GLOG_ERROR).stream()" data-ref="_M/LOG">LOG</a>(ERROR) <a class="ref" href="../../../include/c++/4.8/ostream.html#_ZStlsRSt13basic_ostreamIcT_EPKc" title='std::operator&lt;&lt;' data-ref="_ZStlsRSt13basic_ostreamIcT_EPKc">&lt;&lt;</a> <q>"x["</q> <a class="ref" href="../../../include/c++/4.8/ostream.html#_ZNSt13basic_ostreamlsEi" title='std::basic_ostream::operator&lt;&lt;' data-ref="_ZNSt13basic_ostreamlsEi">&lt;&lt;</a> <a class="local col6 ref" href="#176i" title='i' data-ref="176i">i</a> <a class="ref" href="../../../include/c++/4.8/ostream.html#_ZStlsRSt13basic_ostreamIcT_EPKc" title='std::operator&lt;&lt;' data-ref="_ZStlsRSt13basic_ostreamIcT_EPKc">&lt;&lt;</a> <q>"]: "</q> &lt;&lt; <a class="local col4 ref" href="#174x" title='x' data-ref="174x">x</a>[<a class="local col6 ref" href="#176i" title='i' data-ref="176i">i</a>];</td></tr>
<tr><th id="727">727</th><td>      <a class="macro" href="../../../include/glog/logging.h.html#483" title="google::LogMessage( &quot;/home/yzf/code/ceres-solver/internal/ceres/rotation_test.cc&quot;, 727, google::GLOG_ERROR).stream()" data-ref="_M/LOG">LOG</a>(ERROR) <a class="ref" href="../../../include/c++/4.8/ostream.html#_ZStlsRSt13basic_ostreamIcT_EPKc" title='std::operator&lt;&lt;' data-ref="_ZStlsRSt13basic_ostreamIcT_EPKc">&lt;&lt;</a> <q>"y["</q> <a class="ref" href="../../../include/c++/4.8/ostream.html#_ZNSt13basic_ostreamlsEi" title='std::basic_ostream::operator&lt;&lt;' data-ref="_ZNSt13basic_ostreamlsEi">&lt;&lt;</a> <a class="local col6 ref" href="#176i" title='i' data-ref="176i">i</a> <a class="ref" href="../../../include/c++/4.8/ostream.html#_ZStlsRSt13basic_ostreamIcT_EPKc" title='std::operator&lt;&lt;' data-ref="_ZStlsRSt13basic_ostreamIcT_EPKc">&lt;&lt;</a> <q>"]: "</q> &lt;&lt; <a class="local col5 ref" href="#175y" title='y' data-ref="175y">y</a>[<a class="local col6 ref" href="#176i" title='i' data-ref="176i">i</a>];</td></tr>
<tr><th id="728">728</th><td>      <a class="type" href="../../include/ceres/jet.h.html#ceres::Jet" title='ceres::Jet' data-ref="ceres::Jet">Jet</a>&lt;<em>double</em>, <a class="tu ref" href="#N" title='N' data-ref="N">N</a>&gt; <dfn class="local col7 decl" id="177d" title='d' data-type='Jet&lt;double, N&gt;' data-ref="177d">d</dfn>, <dfn class="local col8 decl" id="178zero" title='zero' data-type='Jet&lt;double, N&gt;' data-ref="178zero">zero</dfn>;</td></tr>
<tr><th id="729">729</th><td>      <a class="local col7 ref" href="#177d" title='d' data-ref="177d">d</a>.a = <a class="local col5 ref" href="#175y" title='y' data-ref="175y">y</a>[<a class="local col6 ref" href="#176i" title='i' data-ref="176i">i</a>].a - <a class="local col4 ref" href="#174x" title='x' data-ref="174x">x</a>[<a class="local col6 ref" href="#176i" title='i' data-ref="176i">i</a>].a;</td></tr>
<tr><th id="730">730</th><td>      <b>for</b> (<em>int</em> <dfn class="local col9 decl" id="179j" title='j' data-type='int' data-ref="179j">j</dfn> = <var>0</var>; <a class="local col9 ref" href="#179j" title='j' data-ref="179j">j</a> &lt; <a class="tu ref" href="#N" title='N' data-use='r' data-ref="N">N</a>; <a class="local col9 ref" href="#179j" title='j' data-ref="179j">j</a>++) {</td></tr>
<tr><th id="731">731</th><td>        <a class="local col7 ref" href="#177d" title='d' data-ref="177d">d</a>.v[<a class="local col9 ref" href="#179j" title='j' data-ref="179j">j</a>] = <a class="local col5 ref" href="#175y" title='y' data-ref="175y">y</a>[<a class="local col6 ref" href="#176i" title='i' data-ref="176i">i</a>].v[<a class="local col9 ref" href="#179j" title='j' data-ref="179j">j</a>] - <a class="local col4 ref" href="#174x" title='x' data-ref="174x">x</a>[<a class="local col6 ref" href="#176i" title='i' data-ref="176i">i</a>].v[<a class="local col9 ref" href="#179j" title='j' data-ref="179j">j</a>];</td></tr>
<tr><th id="732">732</th><td>      }</td></tr>
<tr><th id="733">733</th><td>      <a class="macro" href="../../../include/glog/logging.h.html#483" title="google::LogMessage( &quot;/home/yzf/code/ceres-solver/internal/ceres/rotation_test.cc&quot;, 733, google::GLOG_ERROR).stream()" data-ref="_M/LOG">LOG</a>(ERROR) <a class="ref" href="../../../include/c++/4.8/ostream.html#_ZStlsRSt13basic_ostreamIcT_EPKc" title='std::operator&lt;&lt;' data-ref="_ZStlsRSt13basic_ostreamIcT_EPKc">&lt;&lt;</a> <q>"diff: "</q> &lt;&lt; <a class="local col7 ref" href="#177d" title='d' data-ref="177d">d</a>;</td></tr>
<tr><th id="734">734</th><td>      <a class="macro" href="gtest/gtest.h.html#20468" title="switch (0) case 0: default: if (const ::testing::AssertionResult gtest_ar_ = ::testing::AssertionResult((IsClose(x[i], y[i])))) ; else ::testing::internal::AssertHelper(::testing::TestPartResult::kNonFatalFailure, &quot;/home/yzf/code/ceres-solver/internal/ceres/rotation_test.cc&quot;, 734, ::testing::internal::GetBoolAssertionFailureMessage( gtest_ar_, &quot;IsClose(x[i], y[i])&quot;, &quot;false&quot;, &quot;true&quot;).c_str()) = ::testing::Message()" data-ref="_M/EXPECT_TRUE">EXPECT_TRUE</a>(IsClose(<a class="local col4 ref" href="#174x" title='x' data-ref="174x">x</a>[<a class="local col6 ref" href="#176i" title='i' data-ref="176i">i</a>], <a class="local col5 ref" href="#175y" title='y' data-ref="175y">y</a>[<a class="local col6 ref" href="#176i" title='i' data-ref="176i">i</a>]));</td></tr>
<tr><th id="735">735</th><td>    }</td></tr>
<tr><th id="736">736</th><td>  }</td></tr>
<tr><th id="737">737</th><td>}</td></tr>
<tr><th id="738">738</th><td></td></tr>
<tr><th id="739">739</th><td><i  data-doc="ceres::internal::kSmallTinyCutoff">// Log-10 of a value well below machine precision.</i></td></tr>
<tr><th id="740">740</th><td><em>static</em> <em>const</em> <em>int</em> <dfn class="tu decl def" id="ceres::internal::kSmallTinyCutoff" title='ceres::internal::kSmallTinyCutoff' data-type='const int' data-ref="ceres::internal::kSmallTinyCutoff">kSmallTinyCutoff</dfn> =</td></tr>
<tr><th id="741">741</th><td>    <b>static_cast</b>&lt;<em>int</em>&gt;(<var>2</var> * <a class="ref" href="../../include/ceres/jet.h.html#_ZN5ceres3logEd" title='ceres::log' data-ref="_ZN5ceres3logEd">log</a>(<a class="type" href="../../../include/c++/4.8/limits.html#std::numeric_limits" title='std::numeric_limits' data-ref="std::numeric_limits">numeric_limits</a>&lt;<em>double</em>&gt;::<a class="ref" href="../../../include/c++/4.8/limits.html#_ZNSt14numeric_limitsIdE7epsilonEv" title='std::numeric_limits&lt;double&gt;::epsilon' data-ref="_ZNSt14numeric_limitsIdE7epsilonEv">epsilon</a>())/<a class="ref" href="../../include/ceres/jet.h.html#_ZN5ceres3logEd" title='ceres::log' data-ref="_ZN5ceres3logEd">log</a>(<var>10.0</var>));</td></tr>
<tr><th id="742">742</th><td></td></tr>
<tr><th id="743">743</th><td><i  data-doc="ceres::internal::kTinyZeroLimit">// Log-10 of a value just below values representable by double.</i></td></tr>
<tr><th id="744">744</th><td><em>static</em> <em>const</em> <em>int</em> <dfn class="tu decl def" id="ceres::internal::kTinyZeroLimit" title='ceres::internal::kTinyZeroLimit' data-type='const int' data-ref="ceres::internal::kTinyZeroLimit">kTinyZeroLimit</dfn>   =</td></tr>
<tr><th id="745">745</th><td>    <b>static_cast</b>&lt;<em>int</em>&gt;(<var>1</var> + <a class="ref" href="../../include/ceres/jet.h.html#_ZN5ceres3logEd" title='ceres::log' data-ref="_ZN5ceres3logEd">log</a>(<a class="type" href="../../../include/c++/4.8/limits.html#std::numeric_limits" title='std::numeric_limits' data-ref="std::numeric_limits">numeric_limits</a>&lt;<em>double</em>&gt;::<a class="ref" href="../../../include/c++/4.8/limits.html#_ZNSt14numeric_limitsIdE3minEv" title='std::numeric_limits&lt;double&gt;::min' data-ref="_ZNSt14numeric_limitsIdE3minEv">min</a>())/<a class="ref" href="../../include/ceres/jet.h.html#_ZN5ceres3logEd" title='ceres::log' data-ref="_ZN5ceres3logEd">log</a>(<var>10.0</var>));</td></tr>
<tr><th id="746">746</th><td></td></tr>
<tr><th id="747">747</th><td><i>// Test that exact conversion works for small angles when jets are used.</i></td></tr>
<tr><th id="748">748</th><td><a class="macro" href="gtest/gtest.h.html#21153" title="class Rotation_SmallAngleAxisToQuaternionForJets_Test : public ::testing::Test { public: Rotation_SmallAngleAxisToQuaternionForJets_Test() {} private: virtual void TestBody(); static ::testing::TestInfo* const test_info_ __attribute__ ((unused)); Rotation_SmallAngleAxisToQuaternionForJets_Test(Rotation_SmallAngleAxisToQuaternionForJets_Test const &amp;); void operator=(Rotation_SmallAngleAxisToQuaternionForJets_Test const &amp;);};::testing::TestInfo* const Rotation_SmallAngleAxisToQuaternionForJets_Test ::test_info_ = ::testing::internal::MakeAndRegisterTestInfo( &quot;Rotation&quot;, &quot;SmallAngleAxisToQuaternionForJets&quot;, __null, __null, ::testing::internal::CodeLocation(&quot;/home/yzf/code/ceres-solver/internal/ceres/rotation_test.cc&quot;, 748), (::testing::internal::GetTestTypeId()), ::testing::Test::SetUpTestCase, ::testing::Test::TearDownTestCase, new ::testing::internal::TestFactoryImpl&lt; Rotation_SmallAngleAxisToQuaternionForJets_Test&gt;);void Rotation_SmallAngleAxisToQuaternionForJets_Test::TestBody()" data-ref="_M/TEST">TEST</a>(Rotation, SmallAngleAxisToQuaternionForJets) {</td></tr>
<tr><th id="749">749</th><td>  <i>// Examine small x rotations that are still large enough</i></td></tr>
<tr><th id="750">750</th><td><i>  // to be well within the range represented by doubles.</i></td></tr>
<tr><th id="751">751</th><td>  <b>for</b> (<em>int</em> <dfn class="local col0 decl" id="180i" title='i' data-type='int' data-ref="180i">i</dfn> = -<var>2</var>; <a class="local col0 ref" href="#180i" title='i' data-ref="180i">i</a> &gt;= <a class="tu ref" href="#ceres::internal::kSmallTinyCutoff" title='ceres::internal::kSmallTinyCutoff' data-use='r' data-ref="ceres::internal::kSmallTinyCutoff">kSmallTinyCutoff</a>; <a class="local col0 ref" href="#180i" title='i' data-ref="180i">i</a>--) {</td></tr>
<tr><th id="752">752</th><td>    <em>double</em> <dfn class="local col1 decl" id="181theta" title='theta' data-type='double' data-ref="181theta">theta</dfn> = <a class="ref" href="../../include/ceres/jet.h.html#_ZN5ceres3powEdd" title='ceres::pow' data-ref="_ZN5ceres3powEdd">pow</a>(<var>10.0</var>, <a class="local col0 ref" href="#180i" title='i' data-ref="180i">i</a>);</td></tr>
<tr><th id="753">753</th><td>    <a class="typedef" href="#ceres::internal::J3" title='ceres::internal::J3' data-type='Jet&lt;double, 3&gt;' data-ref="ceres::internal::J3">J3</a> <dfn class="local col2 decl" id="182axis_angle" title='axis_angle' data-type='J3 [3]' data-ref="182axis_angle">axis_angle</dfn>[<var>3</var>] = { <a class="typedef" href="#ceres::internal::J3" title='ceres::internal::J3' data-type='Jet&lt;double, 3&gt;' data-ref="ceres::internal::J3">J3</a><a class="ref" href="../../include/ceres/jet.h.html#_ZN5ceres3JetC1ERKT_i" title='ceres::Jet::Jet&lt;T, N&gt;' data-ref="_ZN5ceres3JetC1ERKT_i">(</a><a class="local col1 ref" href="#181theta" title='theta' data-ref="181theta">theta</a>, <var>0</var>), <a class="typedef" href="#ceres::internal::J3" title='ceres::internal::J3' data-type='Jet&lt;double, 3&gt;' data-ref="ceres::internal::J3">J3</a><a class="ref" href="../../include/ceres/jet.h.html#_ZN5ceres3JetC1ERKT_i" title='ceres::Jet::Jet&lt;T, N&gt;' data-ref="_ZN5ceres3JetC1ERKT_i">(</a><var>0</var>, <var>1</var>), <a class="typedef" href="#ceres::internal::J3" title='ceres::internal::J3' data-type='Jet&lt;double, 3&gt;' data-ref="ceres::internal::J3">J3</a><a class="ref" href="../../include/ceres/jet.h.html#_ZN5ceres3JetC1ERKT_i" title='ceres::Jet::Jet&lt;T, N&gt;' data-ref="_ZN5ceres3JetC1ERKT_i">(</a><var>0</var>, <var>2</var>) };</td></tr>
<tr><th id="754">754</th><td>    <a class="typedef" href="#ceres::internal::J3" title='ceres::internal::J3' data-type='Jet&lt;double, 3&gt;' data-ref="ceres::internal::J3">J3</a> <a class="ref fake" href="../../include/ceres/jet.h.html#_ZN5ceres3JetC1Ev" title='ceres::Jet::Jet&lt;T, N&gt;' data-ref="_ZN5ceres3JetC1Ev"></a><dfn class="local col3 decl" id="183quaternion" title='quaternion' data-type='J3 [4]' data-ref="183quaternion">quaternion</dfn>[<var>4</var>];</td></tr>
<tr><th id="755">755</th><td>    <a class="typedef" href="#ceres::internal::J3" title='ceres::internal::J3' data-type='Jet&lt;double, 3&gt;' data-ref="ceres::internal::J3">J3</a> <dfn class="local col4 decl" id="184expected" title='expected' data-type='J3 [4]' data-ref="184expected">expected</dfn>[<var>4</var>] = {</td></tr>
<tr><th id="756">756</th><td>        <a class="ref" href="#_ZN5ceres8internal6MakeJ3Edddd" title='ceres::internal::MakeJ3' data-ref="_ZN5ceres8internal6MakeJ3Edddd">MakeJ3</a>(<a class="ref" href="../../include/ceres/jet.h.html#_ZN5ceres3cosEd" title='ceres::cos' data-ref="_ZN5ceres3cosEd">cos</a>(<a class="local col1 ref" href="#181theta" title='theta' data-ref="181theta">theta</a>/<var>2</var>), -<a class="ref" href="../../include/ceres/jet.h.html#_ZN5ceres3sinEd" title='ceres::sin' data-ref="_ZN5ceres3sinEd">sin</a>(<a class="local col1 ref" href="#181theta" title='theta' data-ref="181theta">theta</a>/<var>2</var>)/<var>2</var>, <var>0</var>, <var>0</var>),</td></tr>
<tr><th id="757">757</th><td>        <a class="ref" href="#_ZN5ceres8internal6MakeJ3Edddd" title='ceres::internal::MakeJ3' data-ref="_ZN5ceres8internal6MakeJ3Edddd">MakeJ3</a>(<a class="ref" href="../../include/ceres/jet.h.html#_ZN5ceres3sinEd" title='ceres::sin' data-ref="_ZN5ceres3sinEd">sin</a>(<a class="local col1 ref" href="#181theta" title='theta' data-ref="181theta">theta</a>/<var>2</var>), <a class="ref" href="../../include/ceres/jet.h.html#_ZN5ceres3cosEd" title='ceres::cos' data-ref="_ZN5ceres3cosEd">cos</a>(<a class="local col1 ref" href="#181theta" title='theta' data-ref="181theta">theta</a>/<var>2</var>)/<var>2</var>, <var>0</var>, <var>0</var>),</td></tr>
<tr><th id="758">758</th><td>        <a class="ref" href="#_ZN5ceres8internal6MakeJ3Edddd" title='ceres::internal::MakeJ3' data-ref="_ZN5ceres8internal6MakeJ3Edddd">MakeJ3</a>(<var>0</var>, <var>0</var>, <a class="ref" href="../../include/ceres/jet.h.html#_ZN5ceres3sinEd" title='ceres::sin' data-ref="_ZN5ceres3sinEd">sin</a>(<a class="local col1 ref" href="#181theta" title='theta' data-ref="181theta">theta</a>/<var>2</var>)/<a class="local col1 ref" href="#181theta" title='theta' data-ref="181theta">theta</a>, <var>0</var>),</td></tr>
<tr><th id="759">759</th><td>        <a class="ref" href="#_ZN5ceres8internal6MakeJ3Edddd" title='ceres::internal::MakeJ3' data-ref="_ZN5ceres8internal6MakeJ3Edddd">MakeJ3</a>(<var>0</var>, <var>0</var>, <var>0</var>, <a class="ref" href="../../include/ceres/jet.h.html#_ZN5ceres3sinEd" title='ceres::sin' data-ref="_ZN5ceres3sinEd">sin</a>(<a class="local col1 ref" href="#181theta" title='theta' data-ref="181theta">theta</a>/<var>2</var>)/<a class="local col1 ref" href="#181theta" title='theta' data-ref="181theta">theta</a>),</td></tr>
<tr><th id="760">760</th><td>    };</td></tr>
<tr><th id="761">761</th><td>    <a class="ref" href="../../include/ceres/rotation.h.html#_ZN5ceres21AngleAxisToQuaternionEPKT_PS0_" title='ceres::AngleAxisToQuaternion' data-ref="_ZN5ceres21AngleAxisToQuaternionEPKT_PS0_">AngleAxisToQuaternion</a>(<a class="local col2 ref" href="#182axis_angle" title='axis_angle' data-ref="182axis_angle">axis_angle</a>, <a class="local col3 ref" href="#183quaternion" title='quaternion' data-ref="183quaternion">quaternion</a>);</td></tr>
<tr><th id="762">762</th><td>    <a class="ref" href="#_ZN5ceres8internal20ExpectJetArraysCloseEPKNS_3JetIdXT0_EEES4_" title='ceres::internal::ExpectJetArraysClose' data-ref="_ZN5ceres8internal20ExpectJetArraysCloseEPKNS_3JetIdXT0_EEES4_">ExpectJetArraysClose</a>&lt;<var>4</var>, <var>3</var>&gt;(<a class="local col3 ref" href="#183quaternion" title='quaternion' data-ref="183quaternion">quaternion</a>, <a class="local col4 ref" href="#184expected" title='expected' data-ref="184expected">expected</a>);</td></tr>
<tr><th id="763">763</th><td>  }</td></tr>
<tr><th id="764">764</th><td>}</td></tr>
<tr><th id="765">765</th><td></td></tr>
<tr><th id="766">766</th><td></td></tr>
<tr><th id="767">767</th><td><i>// Test that conversion works for very small angles when jets are used.</i></td></tr>
<tr><th id="768">768</th><td><a class="macro" href="gtest/gtest.h.html#21153" title="class Rotation_TinyAngleAxisToQuaternionForJets_Test : public ::testing::Test { public: Rotation_TinyAngleAxisToQuaternionForJets_Test() {} private: virtual void TestBody(); static ::testing::TestInfo* const test_info_ __attribute__ ((unused)); Rotation_TinyAngleAxisToQuaternionForJets_Test(Rotation_TinyAngleAxisToQuaternionForJets_Test const &amp;); void operator=(Rotation_TinyAngleAxisToQuaternionForJets_Test const &amp;);};::testing::TestInfo* const Rotation_TinyAngleAxisToQuaternionForJets_Test ::test_info_ = ::testing::internal::MakeAndRegisterTestInfo( &quot;Rotation&quot;, &quot;TinyAngleAxisToQuaternionForJets&quot;, __null, __null, ::testing::internal::CodeLocation(&quot;/home/yzf/code/ceres-solver/internal/ceres/rotation_test.cc&quot;, 768), (::testing::internal::GetTestTypeId()), ::testing::Test::SetUpTestCase, ::testing::Test::TearDownTestCase, new ::testing::internal::TestFactoryImpl&lt; Rotation_TinyAngleAxisToQuaternionForJets_Test&gt;);void Rotation_TinyAngleAxisToQuaternionForJets_Test::TestBody()" data-ref="_M/TEST">TEST</a>(Rotation, TinyAngleAxisToQuaternionForJets) {</td></tr>
<tr><th id="769">769</th><td>  <i>// Examine tiny x rotations that extend all the way to where</i></td></tr>
<tr><th id="770">770</th><td><i>  // underflow occurs.</i></td></tr>
<tr><th id="771">771</th><td>  <b>for</b> (<em>int</em> <dfn class="local col5 decl" id="185i" title='i' data-type='int' data-ref="185i">i</dfn> = <a class="tu ref" href="#ceres::internal::kSmallTinyCutoff" title='ceres::internal::kSmallTinyCutoff' data-use='r' data-ref="ceres::internal::kSmallTinyCutoff">kSmallTinyCutoff</a>; <a class="local col5 ref" href="#185i" title='i' data-ref="185i">i</a> &gt;= <a class="tu ref" href="#ceres::internal::kTinyZeroLimit" title='ceres::internal::kTinyZeroLimit' data-use='r' data-ref="ceres::internal::kTinyZeroLimit">kTinyZeroLimit</a>; <a class="local col5 ref" href="#185i" title='i' data-ref="185i">i</a>--) {</td></tr>
<tr><th id="772">772</th><td>    <em>double</em> <dfn class="local col6 decl" id="186theta" title='theta' data-type='double' data-ref="186theta">theta</dfn> = <a class="ref" href="../../include/ceres/jet.h.html#_ZN5ceres3powEdd" title='ceres::pow' data-ref="_ZN5ceres3powEdd">pow</a>(<var>10.0</var>, <a class="local col5 ref" href="#185i" title='i' data-ref="185i">i</a>);</td></tr>
<tr><th id="773">773</th><td>    <a class="typedef" href="#ceres::internal::J3" title='ceres::internal::J3' data-type='Jet&lt;double, 3&gt;' data-ref="ceres::internal::J3">J3</a> <dfn class="local col7 decl" id="187axis_angle" title='axis_angle' data-type='J3 [3]' data-ref="187axis_angle">axis_angle</dfn>[<var>3</var>] = { <a class="typedef" href="#ceres::internal::J3" title='ceres::internal::J3' data-type='Jet&lt;double, 3&gt;' data-ref="ceres::internal::J3">J3</a><a class="ref" href="../../include/ceres/jet.h.html#_ZN5ceres3JetC1ERKT_i" title='ceres::Jet::Jet&lt;T, N&gt;' data-ref="_ZN5ceres3JetC1ERKT_i">(</a><a class="local col6 ref" href="#186theta" title='theta' data-ref="186theta">theta</a>, <var>0</var>), <a class="typedef" href="#ceres::internal::J3" title='ceres::internal::J3' data-type='Jet&lt;double, 3&gt;' data-ref="ceres::internal::J3">J3</a><a class="ref" href="../../include/ceres/jet.h.html#_ZN5ceres3JetC1ERKT_i" title='ceres::Jet::Jet&lt;T, N&gt;' data-ref="_ZN5ceres3JetC1ERKT_i">(</a><var>0</var>, <var>1</var>), <a class="typedef" href="#ceres::internal::J3" title='ceres::internal::J3' data-type='Jet&lt;double, 3&gt;' data-ref="ceres::internal::J3">J3</a><a class="ref" href="../../include/ceres/jet.h.html#_ZN5ceres3JetC1ERKT_i" title='ceres::Jet::Jet&lt;T, N&gt;' data-ref="_ZN5ceres3JetC1ERKT_i">(</a><var>0</var>, <var>2</var>) };</td></tr>
<tr><th id="774">774</th><td>    <a class="typedef" href="#ceres::internal::J3" title='ceres::internal::J3' data-type='Jet&lt;double, 3&gt;' data-ref="ceres::internal::J3">J3</a> <a class="ref fake" href="../../include/ceres/jet.h.html#_ZN5ceres3JetC1Ev" title='ceres::Jet::Jet&lt;T, N&gt;' data-ref="_ZN5ceres3JetC1Ev"></a><dfn class="local col8 decl" id="188quaternion" title='quaternion' data-type='J3 [4]' data-ref="188quaternion">quaternion</dfn>[<var>4</var>];</td></tr>
<tr><th id="775">775</th><td>    <i>// To avoid loss of precision in the test itself,</i></td></tr>
<tr><th id="776">776</th><td><i>    // a finite expansion is used here, which will</i></td></tr>
<tr><th id="777">777</th><td><i>    // be exact up to machine precision for the test values used.</i></td></tr>
<tr><th id="778">778</th><td>    <a class="typedef" href="#ceres::internal::J3" title='ceres::internal::J3' data-type='Jet&lt;double, 3&gt;' data-ref="ceres::internal::J3">J3</a> <dfn class="local col9 decl" id="189expected" title='expected' data-type='J3 [4]' data-ref="189expected">expected</dfn>[<var>4</var>] = {</td></tr>
<tr><th id="779">779</th><td>        <a class="ref" href="#_ZN5ceres8internal6MakeJ3Edddd" title='ceres::internal::MakeJ3' data-ref="_ZN5ceres8internal6MakeJ3Edddd">MakeJ3</a>(<var>1.0</var>, <var>0</var>, <var>0</var>, <var>0</var>),</td></tr>
<tr><th id="780">780</th><td>        <a class="ref" href="#_ZN5ceres8internal6MakeJ3Edddd" title='ceres::internal::MakeJ3' data-ref="_ZN5ceres8internal6MakeJ3Edddd">MakeJ3</a>(<var>0</var>, <var>0.5</var>, <var>0</var>, <var>0</var>),</td></tr>
<tr><th id="781">781</th><td>        <a class="ref" href="#_ZN5ceres8internal6MakeJ3Edddd" title='ceres::internal::MakeJ3' data-ref="_ZN5ceres8internal6MakeJ3Edddd">MakeJ3</a>(<var>0</var>, <var>0</var>, <var>0.5</var>, <var>0</var>),</td></tr>
<tr><th id="782">782</th><td>        <a class="ref" href="#_ZN5ceres8internal6MakeJ3Edddd" title='ceres::internal::MakeJ3' data-ref="_ZN5ceres8internal6MakeJ3Edddd">MakeJ3</a>(<var>0</var>, <var>0</var>, <var>0</var>, <var>0.5</var>),</td></tr>
<tr><th id="783">783</th><td>    };</td></tr>
<tr><th id="784">784</th><td>    <a class="ref" href="../../include/ceres/rotation.h.html#_ZN5ceres21AngleAxisToQuaternionEPKT_PS0_" title='ceres::AngleAxisToQuaternion' data-ref="_ZN5ceres21AngleAxisToQuaternionEPKT_PS0_">AngleAxisToQuaternion</a>(<a class="local col7 ref" href="#187axis_angle" title='axis_angle' data-ref="187axis_angle">axis_angle</a>, <a class="local col8 ref" href="#188quaternion" title='quaternion' data-ref="188quaternion">quaternion</a>);</td></tr>
<tr><th id="785">785</th><td>    <a class="ref" href="#_ZN5ceres8internal20ExpectJetArraysCloseEPKNS_3JetIdXT0_EEES4_" title='ceres::internal::ExpectJetArraysClose' data-ref="_ZN5ceres8internal20ExpectJetArraysCloseEPKNS_3JetIdXT0_EEES4_">ExpectJetArraysClose</a>&lt;<var>4</var>, <var>3</var>&gt;(<a class="local col8 ref" href="#188quaternion" title='quaternion' data-ref="188quaternion">quaternion</a>, <a class="local col9 ref" href="#189expected" title='expected' data-ref="189expected">expected</a>);</td></tr>
<tr><th id="786">786</th><td>  }</td></tr>
<tr><th id="787">787</th><td>}</td></tr>
<tr><th id="788">788</th><td></td></tr>
<tr><th id="789">789</th><td><i>// Test that derivatives are correct for zero rotation.</i></td></tr>
<tr><th id="790">790</th><td><a class="macro" href="gtest/gtest.h.html#21153" title="class Rotation_ZeroAngleAxisToQuaternionForJets_Test : public ::testing::Test { public: Rotation_ZeroAngleAxisToQuaternionForJets_Test() {} private: virtual void TestBody(); static ::testing::TestInfo* const test_info_ __attribute__ ((unused)); Rotation_ZeroAngleAxisToQuaternionForJets_Test(Rotation_ZeroAngleAxisToQuaternionForJets_Test const &amp;); void operator=(Rotation_ZeroAngleAxisToQuaternionForJets_Test const &amp;);};::testing::TestInfo* const Rotation_ZeroAngleAxisToQuaternionForJets_Test ::test_info_ = ::testing::internal::MakeAndRegisterTestInfo( &quot;Rotation&quot;, &quot;ZeroAngleAxisToQuaternionForJets&quot;, __null, __null, ::testing::internal::CodeLocation(&quot;/home/yzf/code/ceres-solver/internal/ceres/rotation_test.cc&quot;, 790), (::testing::internal::GetTestTypeId()), ::testing::Test::SetUpTestCase, ::testing::Test::TearDownTestCase, new ::testing::internal::TestFactoryImpl&lt; Rotation_ZeroAngleAxisToQuaternionForJets_Test&gt;);void Rotation_ZeroAngleAxisToQuaternionForJets_Test::TestBody()" data-ref="_M/TEST">TEST</a>(Rotation, ZeroAngleAxisToQuaternionForJets) {</td></tr>
<tr><th id="791">791</th><td>  <a class="typedef" href="#ceres::internal::J3" title='ceres::internal::J3' data-type='Jet&lt;double, 3&gt;' data-ref="ceres::internal::J3">J3</a> <dfn class="local col0 decl" id="190axis_angle" title='axis_angle' data-type='J3 [3]' data-ref="190axis_angle">axis_angle</dfn>[<var>3</var>] = { <a class="typedef" href="#ceres::internal::J3" title='ceres::internal::J3' data-type='Jet&lt;double, 3&gt;' data-ref="ceres::internal::J3">J3</a><a class="ref" href="../../include/ceres/jet.h.html#_ZN5ceres3JetC1ERKT_i" title='ceres::Jet::Jet&lt;T, N&gt;' data-ref="_ZN5ceres3JetC1ERKT_i">(</a><var>0</var>, <var>0</var>), <a class="typedef" href="#ceres::internal::J3" title='ceres::internal::J3' data-type='Jet&lt;double, 3&gt;' data-ref="ceres::internal::J3">J3</a><a class="ref" href="../../include/ceres/jet.h.html#_ZN5ceres3JetC1ERKT_i" title='ceres::Jet::Jet&lt;T, N&gt;' data-ref="_ZN5ceres3JetC1ERKT_i">(</a><var>0</var>, <var>1</var>), <a class="typedef" href="#ceres::internal::J3" title='ceres::internal::J3' data-type='Jet&lt;double, 3&gt;' data-ref="ceres::internal::J3">J3</a><a class="ref" href="../../include/ceres/jet.h.html#_ZN5ceres3JetC1ERKT_i" title='ceres::Jet::Jet&lt;T, N&gt;' data-ref="_ZN5ceres3JetC1ERKT_i">(</a><var>0</var>, <var>2</var>) };</td></tr>
<tr><th id="792">792</th><td>  <a class="typedef" href="#ceres::internal::J3" title='ceres::internal::J3' data-type='Jet&lt;double, 3&gt;' data-ref="ceres::internal::J3">J3</a> <a class="ref fake" href="../../include/ceres/jet.h.html#_ZN5ceres3JetC1Ev" title='ceres::Jet::Jet&lt;T, N&gt;' data-ref="_ZN5ceres3JetC1Ev"></a><dfn class="local col1 decl" id="191quaternion" title='quaternion' data-type='J3 [4]' data-ref="191quaternion">quaternion</dfn>[<var>4</var>];</td></tr>
<tr><th id="793">793</th><td>  <a class="typedef" href="#ceres::internal::J3" title='ceres::internal::J3' data-type='Jet&lt;double, 3&gt;' data-ref="ceres::internal::J3">J3</a> <dfn class="local col2 decl" id="192expected" title='expected' data-type='J3 [4]' data-ref="192expected">expected</dfn>[<var>4</var>] = {</td></tr>
<tr><th id="794">794</th><td>      <a class="ref" href="#_ZN5ceres8internal6MakeJ3Edddd" title='ceres::internal::MakeJ3' data-ref="_ZN5ceres8internal6MakeJ3Edddd">MakeJ3</a>(<var>1.0</var>, <var>0</var>, <var>0</var>, <var>0</var>),</td></tr>
<tr><th id="795">795</th><td>      <a class="ref" href="#_ZN5ceres8internal6MakeJ3Edddd" title='ceres::internal::MakeJ3' data-ref="_ZN5ceres8internal6MakeJ3Edddd">MakeJ3</a>(<var>0</var>, <var>0.5</var>, <var>0</var>, <var>0</var>),</td></tr>
<tr><th id="796">796</th><td>      <a class="ref" href="#_ZN5ceres8internal6MakeJ3Edddd" title='ceres::internal::MakeJ3' data-ref="_ZN5ceres8internal6MakeJ3Edddd">MakeJ3</a>(<var>0</var>, <var>0</var>, <var>0.5</var>, <var>0</var>),</td></tr>
<tr><th id="797">797</th><td>      <a class="ref" href="#_ZN5ceres8internal6MakeJ3Edddd" title='ceres::internal::MakeJ3' data-ref="_ZN5ceres8internal6MakeJ3Edddd">MakeJ3</a>(<var>0</var>, <var>0</var>, <var>0</var>, <var>0.5</var>),</td></tr>
<tr><th id="798">798</th><td>  };</td></tr>
<tr><th id="799">799</th><td>  <a class="ref" href="../../include/ceres/rotation.h.html#_ZN5ceres21AngleAxisToQuaternionEPKT_PS0_" title='ceres::AngleAxisToQuaternion' data-ref="_ZN5ceres21AngleAxisToQuaternionEPKT_PS0_">AngleAxisToQuaternion</a>(<a class="local col0 ref" href="#190axis_angle" title='axis_angle' data-ref="190axis_angle">axis_angle</a>, <a class="local col1 ref" href="#191quaternion" title='quaternion' data-ref="191quaternion">quaternion</a>);</td></tr>
<tr><th id="800">800</th><td>  <a class="ref" href="#_ZN5ceres8internal20ExpectJetArraysCloseEPKNS_3JetIdXT0_EEES4_" title='ceres::internal::ExpectJetArraysClose' data-ref="_ZN5ceres8internal20ExpectJetArraysCloseEPKNS_3JetIdXT0_EEES4_">ExpectJetArraysClose</a>&lt;<var>4</var>, <var>3</var>&gt;(<a class="local col1 ref" href="#191quaternion" title='quaternion' data-ref="191quaternion">quaternion</a>, <a class="local col2 ref" href="#192expected" title='expected' data-ref="192expected">expected</a>);</td></tr>
<tr><th id="801">801</th><td>}</td></tr>
<tr><th id="802">802</th><td></td></tr>
<tr><th id="803">803</th><td><i>// Test that exact conversion works for small angles.</i></td></tr>
<tr><th id="804">804</th><td><a class="macro" href="gtest/gtest.h.html#21153" title="class Rotation_SmallQuaternionToAngleAxisForJets_Test : public ::testing::Test { public: Rotation_SmallQuaternionToAngleAxisForJets_Test() {} private: virtual void TestBody(); static ::testing::TestInfo* const test_info_ __attribute__ ((unused)); Rotation_SmallQuaternionToAngleAxisForJets_Test(Rotation_SmallQuaternionToAngleAxisForJets_Test const &amp;); void operator=(Rotation_SmallQuaternionToAngleAxisForJets_Test const &amp;);};::testing::TestInfo* const Rotation_SmallQuaternionToAngleAxisForJets_Test ::test_info_ = ::testing::internal::MakeAndRegisterTestInfo( &quot;Rotation&quot;, &quot;SmallQuaternionToAngleAxisForJets&quot;, __null, __null, ::testing::internal::CodeLocation(&quot;/home/yzf/code/ceres-solver/internal/ceres/rotation_test.cc&quot;, 804), (::testing::internal::GetTestTypeId()), ::testing::Test::SetUpTestCase, ::testing::Test::TearDownTestCase, new ::testing::internal::TestFactoryImpl&lt; Rotation_SmallQuaternionToAngleAxisForJets_Test&gt;);void Rotation_SmallQuaternionToAngleAxisForJets_Test::TestBody()" data-ref="_M/TEST">TEST</a>(Rotation, SmallQuaternionToAngleAxisForJets) {</td></tr>
<tr><th id="805">805</th><td>  <i>// Examine small x rotations that are still large enough</i></td></tr>
<tr><th id="806">806</th><td><i>  // to be well within the range represented by doubles.</i></td></tr>
<tr><th id="807">807</th><td>  <b>for</b> (<em>int</em> <dfn class="local col3 decl" id="193i" title='i' data-type='int' data-ref="193i">i</dfn> = -<var>2</var>; <a class="local col3 ref" href="#193i" title='i' data-ref="193i">i</a> &gt;= <a class="tu ref" href="#ceres::internal::kSmallTinyCutoff" title='ceres::internal::kSmallTinyCutoff' data-use='r' data-ref="ceres::internal::kSmallTinyCutoff">kSmallTinyCutoff</a>; <a class="local col3 ref" href="#193i" title='i' data-ref="193i">i</a>--) {</td></tr>
<tr><th id="808">808</th><td>    <em>double</em> <dfn class="local col4 decl" id="194theta" title='theta' data-type='double' data-ref="194theta">theta</dfn> = <a class="ref" href="../../include/ceres/jet.h.html#_ZN5ceres3powEdd" title='ceres::pow' data-ref="_ZN5ceres3powEdd">pow</a>(<var>10.0</var>, <a class="local col3 ref" href="#193i" title='i' data-ref="193i">i</a>);</td></tr>
<tr><th id="809">809</th><td>    <em>double</em> <dfn class="local col5 decl" id="195s" title='s' data-type='double' data-ref="195s">s</dfn> = <a class="ref" href="../../include/ceres/jet.h.html#_ZN5ceres3sinEd" title='ceres::sin' data-ref="_ZN5ceres3sinEd">sin</a>(<a class="local col4 ref" href="#194theta" title='theta' data-ref="194theta">theta</a>);</td></tr>
<tr><th id="810">810</th><td>    <em>double</em> <dfn class="local col6 decl" id="196c" title='c' data-type='double' data-ref="196c">c</dfn> = <a class="ref" href="../../include/ceres/jet.h.html#_ZN5ceres3cosEd" title='ceres::cos' data-ref="_ZN5ceres3cosEd">cos</a>(<a class="local col4 ref" href="#194theta" title='theta' data-ref="194theta">theta</a>);</td></tr>
<tr><th id="811">811</th><td>    <a class="typedef" href="#ceres::internal::J4" title='ceres::internal::J4' data-type='Jet&lt;double, 4&gt;' data-ref="ceres::internal::J4">J4</a> <dfn class="local col7 decl" id="197quaternion" title='quaternion' data-type='J4 [4]' data-ref="197quaternion">quaternion</dfn>[<var>4</var>] = { <a class="typedef" href="#ceres::internal::J4" title='ceres::internal::J4' data-type='Jet&lt;double, 4&gt;' data-ref="ceres::internal::J4">J4</a><a class="ref" href="../../include/ceres/jet.h.html#_ZN5ceres3JetC1ERKT_i" title='ceres::Jet::Jet&lt;T, N&gt;' data-ref="_ZN5ceres3JetC1ERKT_i">(</a><a class="local col6 ref" href="#196c" title='c' data-ref="196c">c</a>, <var>0</var>), <a class="typedef" href="#ceres::internal::J4" title='ceres::internal::J4' data-type='Jet&lt;double, 4&gt;' data-ref="ceres::internal::J4">J4</a><a class="ref" href="../../include/ceres/jet.h.html#_ZN5ceres3JetC1ERKT_i" title='ceres::Jet::Jet&lt;T, N&gt;' data-ref="_ZN5ceres3JetC1ERKT_i">(</a><a class="local col5 ref" href="#195s" title='s' data-ref="195s">s</a>, <var>1</var>), <a class="typedef" href="#ceres::internal::J4" title='ceres::internal::J4' data-type='Jet&lt;double, 4&gt;' data-ref="ceres::internal::J4">J4</a><a class="ref" href="../../include/ceres/jet.h.html#_ZN5ceres3JetC1ERKT_i" title='ceres::Jet::Jet&lt;T, N&gt;' data-ref="_ZN5ceres3JetC1ERKT_i">(</a><var>0</var>, <var>2</var>), <a class="typedef" href="#ceres::internal::J4" title='ceres::internal::J4' data-type='Jet&lt;double, 4&gt;' data-ref="ceres::internal::J4">J4</a><a class="ref" href="../../include/ceres/jet.h.html#_ZN5ceres3JetC1ERKT_i" title='ceres::Jet::Jet&lt;T, N&gt;' data-ref="_ZN5ceres3JetC1ERKT_i">(</a><var>0</var>, <var>3</var>) };</td></tr>
<tr><th id="812">812</th><td>    <a class="typedef" href="#ceres::internal::J4" title='ceres::internal::J4' data-type='Jet&lt;double, 4&gt;' data-ref="ceres::internal::J4">J4</a> <a class="ref fake" href="../../include/ceres/jet.h.html#_ZN5ceres3JetC1Ev" title='ceres::Jet::Jet&lt;T, N&gt;' data-ref="_ZN5ceres3JetC1Ev"></a><dfn class="local col8 decl" id="198axis_angle" title='axis_angle' data-type='J4 [3]' data-ref="198axis_angle">axis_angle</dfn>[<var>3</var>];</td></tr>
<tr><th id="813">813</th><td>    <a class="typedef" href="#ceres::internal::J4" title='ceres::internal::J4' data-type='Jet&lt;double, 4&gt;' data-ref="ceres::internal::J4">J4</a> <dfn class="local col9 decl" id="199expected" title='expected' data-type='J4 [3]' data-ref="199expected">expected</dfn>[<var>3</var>] = {</td></tr>
<tr><th id="814">814</th><td>        <a class="ref" href="#_ZN5ceres8internal6MakeJ4Eddddd" title='ceres::internal::MakeJ4' data-ref="_ZN5ceres8internal6MakeJ4Eddddd">MakeJ4</a>(<var>2</var>*<a class="local col4 ref" href="#194theta" title='theta' data-ref="194theta">theta</a>, -<var>2</var>*<a class="local col5 ref" href="#195s" title='s' data-ref="195s">s</a>, <var>2</var>*<a class="local col6 ref" href="#196c" title='c' data-ref="196c">c</a>,  <var>0</var>,         <var>0</var>),</td></tr>
<tr><th id="815">815</th><td>        <a class="ref" href="#_ZN5ceres8internal6MakeJ4Eddddd" title='ceres::internal::MakeJ4' data-ref="_ZN5ceres8internal6MakeJ4Eddddd">MakeJ4</a>(<var>0</var>,        <var>0</var>,   <var>0</var>,    <var>2</var>*<a class="local col4 ref" href="#194theta" title='theta' data-ref="194theta">theta</a>/<a class="local col5 ref" href="#195s" title='s' data-ref="195s">s</a>, <var>0</var>),</td></tr>
<tr><th id="816">816</th><td>        <a class="ref" href="#_ZN5ceres8internal6MakeJ4Eddddd" title='ceres::internal::MakeJ4' data-ref="_ZN5ceres8internal6MakeJ4Eddddd">MakeJ4</a>(<var>0</var>,        <var>0</var>,   <var>0</var>,    <var>0</var>,         <var>2</var>*<a class="local col4 ref" href="#194theta" title='theta' data-ref="194theta">theta</a>/<a class="local col5 ref" href="#195s" title='s' data-ref="195s">s</a>),</td></tr>
<tr><th id="817">817</th><td>    };</td></tr>
<tr><th id="818">818</th><td>    <a class="ref" href="../../include/ceres/rotation.h.html#_ZN5ceres21QuaternionToAngleAxisEPKT_PS0_" title='ceres::QuaternionToAngleAxis' data-ref="_ZN5ceres21QuaternionToAngleAxisEPKT_PS0_">QuaternionToAngleAxis</a>(<a class="local col7 ref" href="#197quaternion" title='quaternion' data-ref="197quaternion">quaternion</a>, <a class="local col8 ref" href="#198axis_angle" title='axis_angle' data-ref="198axis_angle">axis_angle</a>);</td></tr>
<tr><th id="819">819</th><td>    <a class="ref" href="#_ZN5ceres8internal20ExpectJetArraysCloseEPKNS_3JetIdXT0_EEES4_" title='ceres::internal::ExpectJetArraysClose' data-ref="_ZN5ceres8internal20ExpectJetArraysCloseEPKNS_3JetIdXT0_EEES4_">ExpectJetArraysClose</a>&lt;<var>3</var>, <var>4</var>&gt;(<a class="local col8 ref" href="#198axis_angle" title='axis_angle' data-ref="198axis_angle">axis_angle</a>, <a class="local col9 ref" href="#199expected" title='expected' data-ref="199expected">expected</a>);</td></tr>
<tr><th id="820">820</th><td>  }</td></tr>
<tr><th id="821">821</th><td>}</td></tr>
<tr><th id="822">822</th><td></td></tr>
<tr><th id="823">823</th><td><i>// Test that conversion works for very small angles.</i></td></tr>
<tr><th id="824">824</th><td><a class="macro" href="gtest/gtest.h.html#21153" title="class Rotation_TinyQuaternionToAngleAxisForJets_Test : public ::testing::Test { public: Rotation_TinyQuaternionToAngleAxisForJets_Test() {} private: virtual void TestBody(); static ::testing::TestInfo* const test_info_ __attribute__ ((unused)); Rotation_TinyQuaternionToAngleAxisForJets_Test(Rotation_TinyQuaternionToAngleAxisForJets_Test const &amp;); void operator=(Rotation_TinyQuaternionToAngleAxisForJets_Test const &amp;);};::testing::TestInfo* const Rotation_TinyQuaternionToAngleAxisForJets_Test ::test_info_ = ::testing::internal::MakeAndRegisterTestInfo( &quot;Rotation&quot;, &quot;TinyQuaternionToAngleAxisForJets&quot;, __null, __null, ::testing::internal::CodeLocation(&quot;/home/yzf/code/ceres-solver/internal/ceres/rotation_test.cc&quot;, 824), (::testing::internal::GetTestTypeId()), ::testing::Test::SetUpTestCase, ::testing::Test::TearDownTestCase, new ::testing::internal::TestFactoryImpl&lt; Rotation_TinyQuaternionToAngleAxisForJets_Test&gt;);void Rotation_TinyQuaternionToAngleAxisForJets_Test::TestBody()" data-ref="_M/TEST">TEST</a>(Rotation, TinyQuaternionToAngleAxisForJets) {</td></tr>
<tr><th id="825">825</th><td>  <i>// Examine tiny x rotations that extend all the way to where</i></td></tr>
<tr><th id="826">826</th><td><i>  // underflow occurs.</i></td></tr>
<tr><th id="827">827</th><td>  <b>for</b> (<em>int</em> <dfn class="local col0 decl" id="200i" title='i' data-type='int' data-ref="200i">i</dfn> = <a class="tu ref" href="#ceres::internal::kSmallTinyCutoff" title='ceres::internal::kSmallTinyCutoff' data-use='r' data-ref="ceres::internal::kSmallTinyCutoff">kSmallTinyCutoff</a>; <a class="local col0 ref" href="#200i" title='i' data-ref="200i">i</a> &gt;= <a class="tu ref" href="#ceres::internal::kTinyZeroLimit" title='ceres::internal::kTinyZeroLimit' data-use='r' data-ref="ceres::internal::kTinyZeroLimit">kTinyZeroLimit</a>; <a class="local col0 ref" href="#200i" title='i' data-ref="200i">i</a>--) {</td></tr>
<tr><th id="828">828</th><td>    <em>double</em> <dfn class="local col1 decl" id="201theta" title='theta' data-type='double' data-ref="201theta">theta</dfn> = <a class="ref" href="../../include/ceres/jet.h.html#_ZN5ceres3powEdd" title='ceres::pow' data-ref="_ZN5ceres3powEdd">pow</a>(<var>10.0</var>, <a class="local col0 ref" href="#200i" title='i' data-ref="200i">i</a>);</td></tr>
<tr><th id="829">829</th><td>    <em>double</em> <dfn class="local col2 decl" id="202s" title='s' data-type='double' data-ref="202s">s</dfn> = <a class="ref" href="../../include/ceres/jet.h.html#_ZN5ceres3sinEd" title='ceres::sin' data-ref="_ZN5ceres3sinEd">sin</a>(<a class="local col1 ref" href="#201theta" title='theta' data-ref="201theta">theta</a>);</td></tr>
<tr><th id="830">830</th><td>    <em>double</em> <dfn class="local col3 decl" id="203c" title='c' data-type='double' data-ref="203c">c</dfn> = <a class="ref" href="../../include/ceres/jet.h.html#_ZN5ceres3cosEd" title='ceres::cos' data-ref="_ZN5ceres3cosEd">cos</a>(<a class="local col1 ref" href="#201theta" title='theta' data-ref="201theta">theta</a>);</td></tr>
<tr><th id="831">831</th><td>    <a class="typedef" href="#ceres::internal::J4" title='ceres::internal::J4' data-type='Jet&lt;double, 4&gt;' data-ref="ceres::internal::J4">J4</a> <dfn class="local col4 decl" id="204quaternion" title='quaternion' data-type='J4 [4]' data-ref="204quaternion">quaternion</dfn>[<var>4</var>] = { <a class="typedef" href="#ceres::internal::J4" title='ceres::internal::J4' data-type='Jet&lt;double, 4&gt;' data-ref="ceres::internal::J4">J4</a><a class="ref" href="../../include/ceres/jet.h.html#_ZN5ceres3JetC1ERKT_i" title='ceres::Jet::Jet&lt;T, N&gt;' data-ref="_ZN5ceres3JetC1ERKT_i">(</a><a class="local col3 ref" href="#203c" title='c' data-ref="203c">c</a>, <var>0</var>), <a class="typedef" href="#ceres::internal::J4" title='ceres::internal::J4' data-type='Jet&lt;double, 4&gt;' data-ref="ceres::internal::J4">J4</a><a class="ref" href="../../include/ceres/jet.h.html#_ZN5ceres3JetC1ERKT_i" title='ceres::Jet::Jet&lt;T, N&gt;' data-ref="_ZN5ceres3JetC1ERKT_i">(</a><a class="local col2 ref" href="#202s" title='s' data-ref="202s">s</a>, <var>1</var>), <a class="typedef" href="#ceres::internal::J4" title='ceres::internal::J4' data-type='Jet&lt;double, 4&gt;' data-ref="ceres::internal::J4">J4</a><a class="ref" href="../../include/ceres/jet.h.html#_ZN5ceres3JetC1ERKT_i" title='ceres::Jet::Jet&lt;T, N&gt;' data-ref="_ZN5ceres3JetC1ERKT_i">(</a><var>0</var>, <var>2</var>), <a class="typedef" href="#ceres::internal::J4" title='ceres::internal::J4' data-type='Jet&lt;double, 4&gt;' data-ref="ceres::internal::J4">J4</a><a class="ref" href="../../include/ceres/jet.h.html#_ZN5ceres3JetC1ERKT_i" title='ceres::Jet::Jet&lt;T, N&gt;' data-ref="_ZN5ceres3JetC1ERKT_i">(</a><var>0</var>, <var>3</var>) };</td></tr>
<tr><th id="832">832</th><td>    <a class="typedef" href="#ceres::internal::J4" title='ceres::internal::J4' data-type='Jet&lt;double, 4&gt;' data-ref="ceres::internal::J4">J4</a> <a class="ref fake" href="../../include/ceres/jet.h.html#_ZN5ceres3JetC1Ev" title='ceres::Jet::Jet&lt;T, N&gt;' data-ref="_ZN5ceres3JetC1Ev"></a><dfn class="local col5 decl" id="205axis_angle" title='axis_angle' data-type='J4 [3]' data-ref="205axis_angle">axis_angle</dfn>[<var>3</var>];</td></tr>
<tr><th id="833">833</th><td>    <i>// To avoid loss of precision in the test itself,</i></td></tr>
<tr><th id="834">834</th><td><i>    // a finite expansion is used here, which will</i></td></tr>
<tr><th id="835">835</th><td><i>    // be exact up to machine precision for the test values used.</i></td></tr>
<tr><th id="836">836</th><td>    <a class="typedef" href="#ceres::internal::J4" title='ceres::internal::J4' data-type='Jet&lt;double, 4&gt;' data-ref="ceres::internal::J4">J4</a> <dfn class="local col6 decl" id="206expected" title='expected' data-type='J4 [3]' data-ref="206expected">expected</dfn>[<var>3</var>] = {</td></tr>
<tr><th id="837">837</th><td>        <a class="ref" href="#_ZN5ceres8internal6MakeJ4Eddddd" title='ceres::internal::MakeJ4' data-ref="_ZN5ceres8internal6MakeJ4Eddddd">MakeJ4</a>(<var>2</var>*<a class="local col1 ref" href="#201theta" title='theta' data-ref="201theta">theta</a>, -<var>2</var>*<a class="local col2 ref" href="#202s" title='s' data-ref="202s">s</a>, <var>2.0</var>, <var>0</var>,   <var>0</var>),</td></tr>
<tr><th id="838">838</th><td>        <a class="ref" href="#_ZN5ceres8internal6MakeJ4Eddddd" title='ceres::internal::MakeJ4' data-ref="_ZN5ceres8internal6MakeJ4Eddddd">MakeJ4</a>(<var>0</var>,        <var>0</var>,   <var>0</var>,   <var>2.0</var>, <var>0</var>),</td></tr>
<tr><th id="839">839</th><td>        <a class="ref" href="#_ZN5ceres8internal6MakeJ4Eddddd" title='ceres::internal::MakeJ4' data-ref="_ZN5ceres8internal6MakeJ4Eddddd">MakeJ4</a>(<var>0</var>,        <var>0</var>,   <var>0</var>,   <var>0</var>,   <var>2.0</var>),</td></tr>
<tr><th id="840">840</th><td>    };</td></tr>
<tr><th id="841">841</th><td>    <a class="ref" href="../../include/ceres/rotation.h.html#_ZN5ceres21QuaternionToAngleAxisEPKT_PS0_" title='ceres::QuaternionToAngleAxis' data-ref="_ZN5ceres21QuaternionToAngleAxisEPKT_PS0_">QuaternionToAngleAxis</a>(<a class="local col4 ref" href="#204quaternion" title='quaternion' data-ref="204quaternion">quaternion</a>, <a class="local col5 ref" href="#205axis_angle" title='axis_angle' data-ref="205axis_angle">axis_angle</a>);</td></tr>
<tr><th id="842">842</th><td>    <a class="ref" href="#_ZN5ceres8internal20ExpectJetArraysCloseEPKNS_3JetIdXT0_EEES4_" title='ceres::internal::ExpectJetArraysClose' data-ref="_ZN5ceres8internal20ExpectJetArraysCloseEPKNS_3JetIdXT0_EEES4_">ExpectJetArraysClose</a>&lt;<var>3</var>, <var>4</var>&gt;(<a class="local col5 ref" href="#205axis_angle" title='axis_angle' data-ref="205axis_angle">axis_angle</a>, <a class="local col6 ref" href="#206expected" title='expected' data-ref="206expected">expected</a>);</td></tr>
<tr><th id="843">843</th><td>  }</td></tr>
<tr><th id="844">844</th><td>}</td></tr>
<tr><th id="845">845</th><td></td></tr>
<tr><th id="846">846</th><td><i>// Test that conversion works for no rotation.</i></td></tr>
<tr><th id="847">847</th><td><a class="macro" href="gtest/gtest.h.html#21153" title="class Rotation_ZeroQuaternionToAngleAxisForJets_Test : public ::testing::Test { public: Rotation_ZeroQuaternionToAngleAxisForJets_Test() {} private: virtual void TestBody(); static ::testing::TestInfo* const test_info_ __attribute__ ((unused)); Rotation_ZeroQuaternionToAngleAxisForJets_Test(Rotation_ZeroQuaternionToAngleAxisForJets_Test const &amp;); void operator=(Rotation_ZeroQuaternionToAngleAxisForJets_Test const &amp;);};::testing::TestInfo* const Rotation_ZeroQuaternionToAngleAxisForJets_Test ::test_info_ = ::testing::internal::MakeAndRegisterTestInfo( &quot;Rotation&quot;, &quot;ZeroQuaternionToAngleAxisForJets&quot;, __null, __null, ::testing::internal::CodeLocation(&quot;/home/yzf/code/ceres-solver/internal/ceres/rotation_test.cc&quot;, 847), (::testing::internal::GetTestTypeId()), ::testing::Test::SetUpTestCase, ::testing::Test::TearDownTestCase, new ::testing::internal::TestFactoryImpl&lt; Rotation_ZeroQuaternionToAngleAxisForJets_Test&gt;);void Rotation_ZeroQuaternionToAngleAxisForJets_Test::TestBody()" data-ref="_M/TEST">TEST</a>(Rotation, ZeroQuaternionToAngleAxisForJets) {</td></tr>
<tr><th id="848">848</th><td>  <a class="typedef" href="#ceres::internal::J4" title='ceres::internal::J4' data-type='Jet&lt;double, 4&gt;' data-ref="ceres::internal::J4">J4</a> <dfn class="local col7 decl" id="207quaternion" title='quaternion' data-type='J4 [4]' data-ref="207quaternion">quaternion</dfn>[<var>4</var>] = { <a class="typedef" href="#ceres::internal::J4" title='ceres::internal::J4' data-type='Jet&lt;double, 4&gt;' data-ref="ceres::internal::J4">J4</a><a class="ref" href="../../include/ceres/jet.h.html#_ZN5ceres3JetC1ERKT_i" title='ceres::Jet::Jet&lt;T, N&gt;' data-ref="_ZN5ceres3JetC1ERKT_i">(</a><var>1</var>, <var>0</var>), <a class="typedef" href="#ceres::internal::J4" title='ceres::internal::J4' data-type='Jet&lt;double, 4&gt;' data-ref="ceres::internal::J4">J4</a><a class="ref" href="../../include/ceres/jet.h.html#_ZN5ceres3JetC1ERKT_i" title='ceres::Jet::Jet&lt;T, N&gt;' data-ref="_ZN5ceres3JetC1ERKT_i">(</a><var>0</var>, <var>1</var>), <a class="typedef" href="#ceres::internal::J4" title='ceres::internal::J4' data-type='Jet&lt;double, 4&gt;' data-ref="ceres::internal::J4">J4</a><a class="ref" href="../../include/ceres/jet.h.html#_ZN5ceres3JetC1ERKT_i" title='ceres::Jet::Jet&lt;T, N&gt;' data-ref="_ZN5ceres3JetC1ERKT_i">(</a><var>0</var>, <var>2</var>), <a class="typedef" href="#ceres::internal::J4" title='ceres::internal::J4' data-type='Jet&lt;double, 4&gt;' data-ref="ceres::internal::J4">J4</a><a class="ref" href="../../include/ceres/jet.h.html#_ZN5ceres3JetC1ERKT_i" title='ceres::Jet::Jet&lt;T, N&gt;' data-ref="_ZN5ceres3JetC1ERKT_i">(</a><var>0</var>, <var>3</var>) };</td></tr>
<tr><th id="849">849</th><td>  <a class="typedef" href="#ceres::internal::J4" title='ceres::internal::J4' data-type='Jet&lt;double, 4&gt;' data-ref="ceres::internal::J4">J4</a> <a class="ref fake" href="../../include/ceres/jet.h.html#_ZN5ceres3JetC1Ev" title='ceres::Jet::Jet&lt;T, N&gt;' data-ref="_ZN5ceres3JetC1Ev"></a><dfn class="local col8 decl" id="208axis_angle" title='axis_angle' data-type='J4 [3]' data-ref="208axis_angle">axis_angle</dfn>[<var>3</var>];</td></tr>
<tr><th id="850">850</th><td>  <a class="typedef" href="#ceres::internal::J4" title='ceres::internal::J4' data-type='Jet&lt;double, 4&gt;' data-ref="ceres::internal::J4">J4</a> <dfn class="local col9 decl" id="209expected" title='expected' data-type='J4 [3]' data-ref="209expected">expected</dfn>[<var>3</var>] = {</td></tr>
<tr><th id="851">851</th><td>      <a class="ref" href="#_ZN5ceres8internal6MakeJ4Eddddd" title='ceres::internal::MakeJ4' data-ref="_ZN5ceres8internal6MakeJ4Eddddd">MakeJ4</a>(<var>0</var>, <var>0</var>, <var>2.0</var>, <var>0</var>, <var>0</var>),</td></tr>
<tr><th id="852">852</th><td>      <a class="ref" href="#_ZN5ceres8internal6MakeJ4Eddddd" title='ceres::internal::MakeJ4' data-ref="_ZN5ceres8internal6MakeJ4Eddddd">MakeJ4</a>(<var>0</var>, <var>0</var>, <var>0</var>, <var>2.0</var>, <var>0</var>),</td></tr>
<tr><th id="853">853</th><td>      <a class="ref" href="#_ZN5ceres8internal6MakeJ4Eddddd" title='ceres::internal::MakeJ4' data-ref="_ZN5ceres8internal6MakeJ4Eddddd">MakeJ4</a>(<var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>2.0</var>),</td></tr>
<tr><th id="854">854</th><td>  };</td></tr>
<tr><th id="855">855</th><td>  <a class="ref" href="../../include/ceres/rotation.h.html#_ZN5ceres21QuaternionToAngleAxisEPKT_PS0_" title='ceres::QuaternionToAngleAxis' data-ref="_ZN5ceres21QuaternionToAngleAxisEPKT_PS0_">QuaternionToAngleAxis</a>(<a class="local col7 ref" href="#207quaternion" title='quaternion' data-ref="207quaternion">quaternion</a>, <a class="local col8 ref" href="#208axis_angle" title='axis_angle' data-ref="208axis_angle">axis_angle</a>);</td></tr>
<tr><th id="856">856</th><td>  <a class="ref" href="#_ZN5ceres8internal20ExpectJetArraysCloseEPKNS_3JetIdXT0_EEES4_" title='ceres::internal::ExpectJetArraysClose' data-ref="_ZN5ceres8internal20ExpectJetArraysCloseEPKNS_3JetIdXT0_EEES4_">ExpectJetArraysClose</a>&lt;<var>3</var>, <var>4</var>&gt;(<a class="local col8 ref" href="#208axis_angle" title='axis_angle' data-ref="208axis_angle">axis_angle</a>, <a class="local col9 ref" href="#209expected" title='expected' data-ref="209expected">expected</a>);</td></tr>
<tr><th id="857">857</th><td>}</td></tr>
<tr><th id="858">858</th><td></td></tr>
<tr><th id="859">859</th><td><a class="macro" href="gtest/gtest.h.html#21153" title="class Quaternion_RotatePointGivesSameAnswerAsRotationByMatrixCanned_Test : public ::testing::Test { public: Quaternion_RotatePointGivesSameAnswerAsRotationByMatrixCanned_Test() {} private: virtual void TestBody(); static ::testing::TestInfo* const test_info_ __attribute__ ((unused)); Quaternion_RotatePointGivesSameAnswerAsRotationByMatrixCanned_Test(Quaternion_RotatePointGivesSameAnswerAsRotationByMatrixCanned_Test const &amp;); void operator=(Quaternion_RotatePointGivesSameAnswerAsRotationByMatrixCanned_Test const &amp;);};::testing::TestInfo* const Quaternion_RotatePointGivesSameAnswerAsRotationByMatrixCanned_Test ::test_info_ = ::testing::internal::MakeAndRegisterTestInfo( &quot;Quaternion&quot;, &quot;RotatePointGivesSameAnswerAsRotationByMatrixCanned&quot;, __null, __null, ::testing::internal::CodeLocation(&quot;/home/yzf/code/ceres-solver/internal/ceres/rotation_test.cc&quot;, 859), (::testing::internal::GetTestTypeId()), ::testing::Test::SetUpTestCase, ::testing::Test::TearDownTestCase, new ::testing::internal::TestFactoryImpl&lt; Quaternion_RotatePointGivesSameAnswerAsRotationByMatrixCanned_Test&gt;);void Quaternion_RotatePointGivesSameAnswerAsRotationByMatrixCanned_Test::TestBody()" data-ref="_M/TEST">TEST</a>(Quaternion, RotatePointGivesSameAnswerAsRotationByMatrixCanned) {</td></tr>
<tr><th id="860">860</th><td>  <i>// Canned data generated in octave.</i></td></tr>
<tr><th id="861">861</th><td>  <em>double</em> <em>const</em> <dfn class="local col0 decl" id="210q" title='q' data-type='const double [4]' data-ref="210q">q</dfn>[<var>4</var>] = {</td></tr>
<tr><th id="862">862</th><td>    +<var>0.1956830471754074</var>,</td></tr>
<tr><th id="863">863</th><td>    -<var>0.0150618562474847</var>,</td></tr>
<tr><th id="864">864</th><td>    +<var>0.7634572982788086</var>,</td></tr>
<tr><th id="865">865</th><td>    -<var>0.3019454777240753</var>,</td></tr>
<tr><th id="866">866</th><td>  };</td></tr>
<tr><th id="867">867</th><td>  <em>double</em> <em>const</em> <dfn class="local col1 decl" id="211Q" title='Q' data-type='const double [3][3]' data-ref="211Q">Q</dfn>[<var>3</var>][<var>3</var>] = {  <i>// Scaled rotation matrix.</i></td></tr>
<tr><th id="868">868</th><td>    { -<var>0.6355194033477252</var>,  <var>0.0951730541682254</var>,  <var>0.3078870197911186</var> },</td></tr>
<tr><th id="869">869</th><td>    { -<var>0.1411693904792992</var>,  <var>0.5297609702153905</var>, -<var>0.4551502574482019</var> },</td></tr>
<tr><th id="870">870</th><td>    { -<var>0.2896955822708862</var>, -<var>0.4669396571547050</var>, -<var>0.4536309793389248</var> },</td></tr>
<tr><th id="871">871</th><td>  };</td></tr>
<tr><th id="872">872</th><td>  <em>double</em> <em>const</em> <dfn class="local col2 decl" id="212R" title='R' data-type='const double [3][3]' data-ref="212R">R</dfn>[<var>3</var>][<var>3</var>] = {  <i>// With unit rows and columns.</i></td></tr>
<tr><th id="873">873</th><td>    { -<var>0.8918859164053080</var>,  <var>0.1335655625725649</var>,  <var>0.4320876677394745</var> },</td></tr>
<tr><th id="874">874</th><td>    { -<var>0.1981166751680096</var>,  <var>0.7434648665444399</var>, -<var>0.6387564287225856</var> },</td></tr>
<tr><th id="875">875</th><td>    { -<var>0.4065578619806013</var>, -<var>0.6553016349046693</var>, -<var>0.6366242786393164</var> },</td></tr>
<tr><th id="876">876</th><td>  };</td></tr>
<tr><th id="877">877</th><td></td></tr>
<tr><th id="878">878</th><td>  <i>// Compute R from q and compare to known answer.</i></td></tr>
<tr><th id="879">879</th><td>  <em>double</em> <dfn class="local col3 decl" id="213Rq" title='Rq' data-type='double [3][3]' data-ref="213Rq">Rq</dfn>[<var>3</var>][<var>3</var>];</td></tr>
<tr><th id="880">880</th><td>  <a class="ref" href="../../include/ceres/rotation.h.html#_ZN5ceres26QuaternionToScaledRotationEPKT_PS0_" title='ceres::QuaternionToScaledRotation' data-ref="_ZN5ceres26QuaternionToScaledRotationEPKT_PS0_">QuaternionToScaledRotation</a>&lt;<em>double</em>&gt;(<a class="local col0 ref" href="#210q" title='q' data-ref="210q">q</a>, <a class="local col3 ref" href="#213Rq" title='Rq' data-ref="213Rq">Rq</a>[<var>0</var>]);</td></tr>
<tr><th id="881">881</th><td>  <a class="ref" href="test_util.h.html#_ZN5ceres8internal17ExpectArraysCloseEiPKdS2_d" title='ceres::internal::ExpectArraysClose' data-ref="_ZN5ceres8internal17ExpectArraysCloseEiPKdS2_d">ExpectArraysClose</a>(<var>9</var>, <a class="local col1 ref" href="#211Q" title='Q' data-ref="211Q">Q</a>[<var>0</var>], <a class="local col3 ref" href="#213Rq" title='Rq' data-ref="213Rq">Rq</a>[<var>0</var>], <a class="tu ref" href="#ceres::internal::kTolerance" title='ceres::internal::kTolerance' data-use='r' data-ref="ceres::internal::kTolerance">kTolerance</a>);</td></tr>
<tr><th id="882">882</th><td></td></tr>
<tr><th id="883">883</th><td>  <i>// Now do the same but compute R with normalization.</i></td></tr>
<tr><th id="884">884</th><td>  <a class="ref" href="../../include/ceres/rotation.h.html#_ZN5ceres20QuaternionToRotationEPKT_PS0_" title='ceres::QuaternionToRotation' data-ref="_ZN5ceres20QuaternionToRotationEPKT_PS0_">QuaternionToRotation</a>&lt;<em>double</em>&gt;(<a class="local col0 ref" href="#210q" title='q' data-ref="210q">q</a>, <a class="local col3 ref" href="#213Rq" title='Rq' data-ref="213Rq">Rq</a>[<var>0</var>]);</td></tr>
<tr><th id="885">885</th><td>  <a class="ref" href="test_util.h.html#_ZN5ceres8internal17ExpectArraysCloseEiPKdS2_d" title='ceres::internal::ExpectArraysClose' data-ref="_ZN5ceres8internal17ExpectArraysCloseEiPKdS2_d">ExpectArraysClose</a>(<var>9</var>, <a class="local col2 ref" href="#212R" title='R' data-ref="212R">R</a>[<var>0</var>], <a class="local col3 ref" href="#213Rq" title='Rq' data-ref="213Rq">Rq</a>[<var>0</var>], <a class="tu ref" href="#ceres::internal::kTolerance" title='ceres::internal::kTolerance' data-use='r' data-ref="ceres::internal::kTolerance">kTolerance</a>);</td></tr>
<tr><th id="886">886</th><td>}</td></tr>
<tr><th id="887">887</th><td></td></tr>
<tr><th id="888">888</th><td></td></tr>
<tr><th id="889">889</th><td><a class="macro" href="gtest/gtest.h.html#21153" title="class Quaternion_RotatePointGivesSameAnswerAsRotationByMatrix_Test : public ::testing::Test { public: Quaternion_RotatePointGivesSameAnswerAsRotationByMatrix_Test() {} private: virtual void TestBody(); static ::testing::TestInfo* const test_info_ __attribute__ ((unused)); Quaternion_RotatePointGivesSameAnswerAsRotationByMatrix_Test(Quaternion_RotatePointGivesSameAnswerAsRotationByMatrix_Test const &amp;); void operator=(Quaternion_RotatePointGivesSameAnswerAsRotationByMatrix_Test const &amp;);};::testing::TestInfo* const Quaternion_RotatePointGivesSameAnswerAsRotationByMatrix_Test ::test_info_ = ::testing::internal::MakeAndRegisterTestInfo( &quot;Quaternion&quot;, &quot;RotatePointGivesSameAnswerAsRotationByMatrix&quot;, __null, __null, ::testing::internal::CodeLocation(&quot;/home/yzf/code/ceres-solver/internal/ceres/rotation_test.cc&quot;, 889), (::testing::internal::GetTestTypeId()), ::testing::Test::SetUpTestCase, ::testing::Test::TearDownTestCase, new ::testing::internal::TestFactoryImpl&lt; Quaternion_RotatePointGivesSameAnswerAsRotationByMatrix_Test&gt;);void Quaternion_RotatePointGivesSameAnswerAsRotationByMatrix_Test::TestBody()" data-ref="_M/TEST">TEST</a>(Quaternion, RotatePointGivesSameAnswerAsRotationByMatrix) {</td></tr>
<tr><th id="890">890</th><td>  <i>// Rotation defined by a unit quaternion.</i></td></tr>
<tr><th id="891">891</th><td>  <em>double</em> <em>const</em> <dfn class="local col4 decl" id="214q" title='q' data-type='const double [4]' data-ref="214q">q</dfn>[<var>4</var>] = {</td></tr>
<tr><th id="892">892</th><td>    <var>0.2318160216097109</var>,</td></tr>
<tr><th id="893">893</th><td>    -<var>0.0178430356832060</var>,</td></tr>
<tr><th id="894">894</th><td>    <var>0.9044300776717159</var>,</td></tr>
<tr><th id="895">895</th><td>    -<var>0.3576998641394597</var>,</td></tr>
<tr><th id="896">896</th><td>  };</td></tr>
<tr><th id="897">897</th><td>  <em>double</em> <em>const</em> <dfn class="local col5 decl" id="215p" title='p' data-type='const double [3]' data-ref="215p">p</dfn>[<var>3</var>] = {</td></tr>
<tr><th id="898">898</th><td>    +<var>0.11</var>,</td></tr>
<tr><th id="899">899</th><td>    -<var>13.15</var>,</td></tr>
<tr><th id="900">900</th><td>    <var>1.17</var>,</td></tr>
<tr><th id="901">901</th><td>  };</td></tr>
<tr><th id="902">902</th><td></td></tr>
<tr><th id="903">903</th><td>  <em>double</em> <dfn class="local col6 decl" id="216R" title='R' data-type='double [9]' data-ref="216R">R</dfn>[<var>3</var> * <var>3</var>];</td></tr>
<tr><th id="904">904</th><td>  <a class="ref" href="../../include/ceres/rotation.h.html#_ZN5ceres20QuaternionToRotationEPKT_PS0_" title='ceres::QuaternionToRotation' data-ref="_ZN5ceres20QuaternionToRotationEPKT_PS0_">QuaternionToRotation</a>(<a class="local col4 ref" href="#214q" title='q' data-ref="214q">q</a>, <a class="local col6 ref" href="#216R" title='R' data-ref="216R">R</a>);</td></tr>
<tr><th id="905">905</th><td></td></tr>
<tr><th id="906">906</th><td>  <em>double</em> <dfn class="local col7 decl" id="217result1" title='result1' data-type='double [3]' data-ref="217result1">result1</dfn>[<var>3</var>];</td></tr>
<tr><th id="907">907</th><td>  <a class="ref" href="../../include/ceres/rotation.h.html#_ZN5ceres25UnitQuaternionRotatePointEPKT_S2_PS0_" title='ceres::UnitQuaternionRotatePoint' data-ref="_ZN5ceres25UnitQuaternionRotatePointEPKT_S2_PS0_">UnitQuaternionRotatePoint</a>(<a class="local col4 ref" href="#214q" title='q' data-ref="214q">q</a>, <a class="local col5 ref" href="#215p" title='p' data-ref="215p">p</a>, <a class="local col7 ref" href="#217result1" title='result1' data-ref="217result1">result1</a>);</td></tr>
<tr><th id="908">908</th><td></td></tr>
<tr><th id="909">909</th><td>  <em>double</em> <dfn class="local col8 decl" id="218result2" title='result2' data-type='double [3]' data-ref="218result2">result2</dfn>[<var>3</var>];</td></tr>
<tr><th id="910">910</th><td>  <a class="typedef" href="../../include/ceres/internal/eigen.h.html#ceres::VectorRef" title='ceres::VectorRef' data-type='Eigen::Map&lt;Vector&gt;' data-ref="ceres::VectorRef">VectorRef</a><a class="ref" href="../../../include/eigen3/Eigen/src/Core/Map.h.html#_ZN5Eigen3MapC1ENS_7MapBaseINS_3MapIT_XT0_ET1_EEXqusr8internal15accessors_levelIS6_EE16has_write_accessLNS_14AccessorLevelsE1ELS7_0EEE11PointerTypeENS10190211" title='Eigen::Map::Map&lt;MatrixType, MapOptions, StrideType&gt;' data-ref="_ZN5Eigen3MapC1ENS_7MapBaseINS_3MapIT_XT0_ET1_EEXqusr8internal15accessors_levelIS6_EE16has_write_accessLNS_14AccessorLevelsE1ELS7_0EEE11PointerTypeENS10190211">(</a><a class="local col8 ref" href="#218result2" title='result2' data-ref="218result2">result2</a>, <var>3</var>) <a class="ref" href="../../../include/eigen3/Eigen/src/Core/Map.h.html#170" title='Eigen::Map::operator=' data-ref="_ZN5Eigen3MapaSERKNS_9DenseBaseIT_EE">=</a> <a class="typedef" href="../../include/ceres/internal/eigen.h.html#ceres::ConstMatrixRef" title='ceres::ConstMatrixRef' data-type='Eigen::Map&lt;const Matrix&gt;' data-ref="ceres::ConstMatrixRef">ConstMatrixRef</a><a class="ref" href="../../../include/eigen3/Eigen/src/Core/Map.h.html#_ZN5Eigen3MapC1ENS_7MapBaseINS_3MapIT_XT0_ET1_EEXqusr8internal15accessors_levelIS6_EE16has_write_accessLNS_14AccessorLevelsE1ELS7_0EEE11PointerTypeENS11163329" title='Eigen::Map::Map&lt;MatrixType, MapOptions, StrideType&gt;' data-ref="_ZN5Eigen3MapC1ENS_7MapBaseINS_3MapIT_XT0_ET1_EEXqusr8internal15accessors_levelIS6_EE16has_write_accessLNS_14AccessorLevelsE1ELS7_0EEE11PointerTypeENS11163329">(</a><a class="local col6 ref" href="#216R" title='R' data-ref="216R">R</a>, <var>3</var>, <var>3</var>)<a class="ref" href="../../../include/eigen3/Eigen/src/Core/MatrixBase.h.html#_ZNK5Eigen10MatrixBasemlERKNS_10MatrixBaseIT_EE" title='Eigen::MatrixBase::operator*' data-ref="_ZNK5Eigen10MatrixBasemlERKNS_10MatrixBaseIT_EE">*</a> <a class="typedef" href="../../include/ceres/internal/eigen.h.html#ceres::ConstVectorRef" title='ceres::ConstVectorRef' data-type='Eigen::Map&lt;const Vector&gt;' data-ref="ceres::ConstVectorRef">ConstVectorRef</a><a class="ref" href="../../../include/eigen3/Eigen/src/Core/Map.h.html#_ZN5Eigen3MapC1ENS_7MapBaseINS_3MapIT_XT0_ET1_EEXqusr8internal15accessors_levelIS6_EE16has_write_accessLNS_14AccessorLevelsE1ELS7_0EEE11PointerTypeENS10190211" title='Eigen::Map::Map&lt;MatrixType, MapOptions, StrideType&gt;' data-ref="_ZN5Eigen3MapC1ENS_7MapBaseINS_3MapIT_XT0_ET1_EEXqusr8internal15accessors_levelIS6_EE16has_write_accessLNS_14AccessorLevelsE1ELS7_0EEE11PointerTypeENS10190211">(</a><a class="local col5 ref" href="#215p" title='p' data-ref="215p">p</a>, <var>3</var>);</td></tr>
<tr><th id="911">911</th><td>  <a class="ref" href="test_util.h.html#_ZN5ceres8internal17ExpectArraysCloseEiPKdS2_d" title='ceres::internal::ExpectArraysClose' data-ref="_ZN5ceres8internal17ExpectArraysCloseEiPKdS2_d">ExpectArraysClose</a>(<var>3</var>, <a class="local col7 ref" href="#217result1" title='result1' data-ref="217result1">result1</a>, <a class="local col8 ref" href="#218result2" title='result2' data-ref="218result2">result2</a>, <a class="tu ref" href="#ceres::internal::kTolerance" title='ceres::internal::kTolerance' data-use='r' data-ref="ceres::internal::kTolerance">kTolerance</a>);</td></tr>
<tr><th id="912">912</th><td>}</td></tr>
<tr><th id="913">913</th><td></td></tr>
<tr><th id="914">914</th><td></td></tr>
<tr><th id="915">915</th><td><i>// Verify that (a * b) * c == a * (b * c).</i></td></tr>
<tr><th id="916">916</th><td><a class="macro" href="gtest/gtest.h.html#21153" title="class Quaternion_MultiplicationIsAssociative_Test : public ::testing::Test { public: Quaternion_MultiplicationIsAssociative_Test() {} private: virtual void TestBody(); static ::testing::TestInfo* const test_info_ __attribute__ ((unused)); Quaternion_MultiplicationIsAssociative_Test(Quaternion_MultiplicationIsAssociative_Test const &amp;); void operator=(Quaternion_MultiplicationIsAssociative_Test const &amp;);};::testing::TestInfo* const Quaternion_MultiplicationIsAssociative_Test ::test_info_ = ::testing::internal::MakeAndRegisterTestInfo( &quot;Quaternion&quot;, &quot;MultiplicationIsAssociative&quot;, __null, __null, ::testing::internal::CodeLocation(&quot;/home/yzf/code/ceres-solver/internal/ceres/rotation_test.cc&quot;, 916), (::testing::internal::GetTestTypeId()), ::testing::Test::SetUpTestCase, ::testing::Test::TearDownTestCase, new ::testing::internal::TestFactoryImpl&lt; Quaternion_MultiplicationIsAssociative_Test&gt;);void Quaternion_MultiplicationIsAssociative_Test::TestBody()" data-ref="_M/TEST">TEST</a>(Quaternion, MultiplicationIsAssociative) {</td></tr>
<tr><th id="917">917</th><td>  <em>double</em> <dfn class="local col9 decl" id="219a" title='a' data-type='double [4]' data-ref="219a">a</dfn>[<var>4</var>];</td></tr>
<tr><th id="918">918</th><td>  <em>double</em> <dfn class="local col0 decl" id="220b" title='b' data-type='double [4]' data-ref="220b">b</dfn>[<var>4</var>];</td></tr>
<tr><th id="919">919</th><td>  <em>double</em> <dfn class="local col1 decl" id="221c" title='c' data-type='double [4]' data-ref="221c">c</dfn>[<var>4</var>];</td></tr>
<tr><th id="920">920</th><td>  <b>for</b> (<em>int</em> <dfn class="local col2 decl" id="222i" title='i' data-type='int' data-ref="222i">i</dfn> = <var>0</var>; <a class="local col2 ref" href="#222i" title='i' data-ref="222i">i</a> &lt; <var>4</var>; ++<a class="local col2 ref" href="#222i" title='i' data-ref="222i">i</a>) {</td></tr>
<tr><th id="921">921</th><td>    <a class="local col9 ref" href="#219a" title='a' data-ref="219a">a</a>[<a class="local col2 ref" href="#222i" title='i' data-ref="222i">i</a>] = <var>2</var> * <a class="ref" href="#_ZN5ceres8internal10RandDoubleEv" title='ceres::internal::RandDouble' data-ref="_ZN5ceres8internal10RandDoubleEv">RandDouble</a>() - <var>1</var>;</td></tr>
<tr><th id="922">922</th><td>    <a class="local col0 ref" href="#220b" title='b' data-ref="220b">b</a>[<a class="local col2 ref" href="#222i" title='i' data-ref="222i">i</a>] = <var>2</var> * <a class="ref" href="#_ZN5ceres8internal10RandDoubleEv" title='ceres::internal::RandDouble' data-ref="_ZN5ceres8internal10RandDoubleEv">RandDouble</a>() - <var>1</var>;</td></tr>
<tr><th id="923">923</th><td>    <a class="local col1 ref" href="#221c" title='c' data-ref="221c">c</a>[<a class="local col2 ref" href="#222i" title='i' data-ref="222i">i</a>] = <var>2</var> * <a class="ref" href="#_ZN5ceres8internal10RandDoubleEv" title='ceres::internal::RandDouble' data-ref="_ZN5ceres8internal10RandDoubleEv">RandDouble</a>() - <var>1</var>;</td></tr>
<tr><th id="924">924</th><td>  }</td></tr>
<tr><th id="925">925</th><td></td></tr>
<tr><th id="926">926</th><td>  <em>double</em> <dfn class="local col3 decl" id="223ab" title='ab' data-type='double [4]' data-ref="223ab">ab</dfn>[<var>4</var>];</td></tr>
<tr><th id="927">927</th><td>  <em>double</em> <dfn class="local col4 decl" id="224ab_c" title='ab_c' data-type='double [4]' data-ref="224ab_c">ab_c</dfn>[<var>4</var>];</td></tr>
<tr><th id="928">928</th><td>  <a class="ref" href="../../include/ceres/rotation.h.html#_ZN5ceres17QuaternionProductEPKT_S2_PS0_" title='ceres::QuaternionProduct' data-ref="_ZN5ceres17QuaternionProductEPKT_S2_PS0_">QuaternionProduct</a>(<a class="local col9 ref" href="#219a" title='a' data-ref="219a">a</a>, <a class="local col0 ref" href="#220b" title='b' data-ref="220b">b</a>, <a class="local col3 ref" href="#223ab" title='ab' data-ref="223ab">ab</a>);</td></tr>
<tr><th id="929">929</th><td>  <a class="ref" href="../../include/ceres/rotation.h.html#_ZN5ceres17QuaternionProductEPKT_S2_PS0_" title='ceres::QuaternionProduct' data-ref="_ZN5ceres17QuaternionProductEPKT_S2_PS0_">QuaternionProduct</a>(<a class="local col3 ref" href="#223ab" title='ab' data-ref="223ab">ab</a>, <a class="local col1 ref" href="#221c" title='c' data-ref="221c">c</a>, <a class="local col4 ref" href="#224ab_c" title='ab_c' data-ref="224ab_c">ab_c</a>);</td></tr>
<tr><th id="930">930</th><td></td></tr>
<tr><th id="931">931</th><td>  <em>double</em> <dfn class="local col5 decl" id="225bc" title='bc' data-type='double [4]' data-ref="225bc">bc</dfn>[<var>4</var>];</td></tr>
<tr><th id="932">932</th><td>  <em>double</em> <dfn class="local col6 decl" id="226a_bc" title='a_bc' data-type='double [4]' data-ref="226a_bc">a_bc</dfn>[<var>4</var>];</td></tr>
<tr><th id="933">933</th><td>  <a class="ref" href="../../include/ceres/rotation.h.html#_ZN5ceres17QuaternionProductEPKT_S2_PS0_" title='ceres::QuaternionProduct' data-ref="_ZN5ceres17QuaternionProductEPKT_S2_PS0_">QuaternionProduct</a>(<a class="local col0 ref" href="#220b" title='b' data-ref="220b">b</a>, <a class="local col1 ref" href="#221c" title='c' data-ref="221c">c</a>, <a class="local col5 ref" href="#225bc" title='bc' data-ref="225bc">bc</a>);</td></tr>
<tr><th id="934">934</th><td>  <a class="ref" href="../../include/ceres/rotation.h.html#_ZN5ceres17QuaternionProductEPKT_S2_PS0_" title='ceres::QuaternionProduct' data-ref="_ZN5ceres17QuaternionProductEPKT_S2_PS0_">QuaternionProduct</a>(<a class="local col9 ref" href="#219a" title='a' data-ref="219a">a</a>, <a class="local col5 ref" href="#225bc" title='bc' data-ref="225bc">bc</a>, <a class="local col6 ref" href="#226a_bc" title='a_bc' data-ref="226a_bc">a_bc</a>);</td></tr>
<tr><th id="935">935</th><td></td></tr>
<tr><th id="936">936</th><td>  <a class="macro" href="gtest/gtest.h.html#21013" title="switch (0) case 0: default: if (const ::testing::AssertionResult gtest_ar = (::testing::internal::DoubleNearPredFormat(&quot;ab_c[0]&quot;, &quot;a_bc[0]&quot;, &quot;kTolerance&quot;, ab_c[0], a_bc[0], kTolerance))) ; else return ::testing::internal::AssertHelper(::testing::TestPartResult::kFatalFailure, &quot;/home/yzf/code/ceres-solver/internal/ceres/rotation_test.cc&quot;, 936, gtest_ar.failure_message()) = ::testing::Message()" data-ref="_M/ASSERT_NEAR">ASSERT_NEAR</a>(<a class="local col4 ref" href="#224ab_c" title='ab_c' data-ref="224ab_c">ab_c</a>[<var>0</var>], <a class="local col6 ref" href="#226a_bc" title='a_bc' data-ref="226a_bc">a_bc</a>[<var>0</var>], <a class="tu ref" href="#ceres::internal::kTolerance" title='ceres::internal::kTolerance' data-use='r' data-ref="ceres::internal::kTolerance">kTolerance</a>);</td></tr>
<tr><th id="937">937</th><td>  <a class="macro" href="gtest/gtest.h.html#21013" title="switch (0) case 0: default: if (const ::testing::AssertionResult gtest_ar = (::testing::internal::DoubleNearPredFormat(&quot;ab_c[1]&quot;, &quot;a_bc[1]&quot;, &quot;kTolerance&quot;, ab_c[1], a_bc[1], kTolerance))) ; else return ::testing::internal::AssertHelper(::testing::TestPartResult::kFatalFailure, &quot;/home/yzf/code/ceres-solver/internal/ceres/rotation_test.cc&quot;, 937, gtest_ar.failure_message()) = ::testing::Message()" data-ref="_M/ASSERT_NEAR">ASSERT_NEAR</a>(<a class="local col4 ref" href="#224ab_c" title='ab_c' data-ref="224ab_c">ab_c</a>[<var>1</var>], <a class="local col6 ref" href="#226a_bc" title='a_bc' data-ref="226a_bc">a_bc</a>[<var>1</var>], <a class="tu ref" href="#ceres::internal::kTolerance" title='ceres::internal::kTolerance' data-use='r' data-ref="ceres::internal::kTolerance">kTolerance</a>);</td></tr>
<tr><th id="938">938</th><td>  <a class="macro" href="gtest/gtest.h.html#21013" title="switch (0) case 0: default: if (const ::testing::AssertionResult gtest_ar = (::testing::internal::DoubleNearPredFormat(&quot;ab_c[2]&quot;, &quot;a_bc[2]&quot;, &quot;kTolerance&quot;, ab_c[2], a_bc[2], kTolerance))) ; else return ::testing::internal::AssertHelper(::testing::TestPartResult::kFatalFailure, &quot;/home/yzf/code/ceres-solver/internal/ceres/rotation_test.cc&quot;, 938, gtest_ar.failure_message()) = ::testing::Message()" data-ref="_M/ASSERT_NEAR">ASSERT_NEAR</a>(<a class="local col4 ref" href="#224ab_c" title='ab_c' data-ref="224ab_c">ab_c</a>[<var>2</var>], <a class="local col6 ref" href="#226a_bc" title='a_bc' data-ref="226a_bc">a_bc</a>[<var>2</var>], <a class="tu ref" href="#ceres::internal::kTolerance" title='ceres::internal::kTolerance' data-use='r' data-ref="ceres::internal::kTolerance">kTolerance</a>);</td></tr>
<tr><th id="939">939</th><td>  <a class="macro" href="gtest/gtest.h.html#21013" title="switch (0) case 0: default: if (const ::testing::AssertionResult gtest_ar = (::testing::internal::DoubleNearPredFormat(&quot;ab_c[3]&quot;, &quot;a_bc[3]&quot;, &quot;kTolerance&quot;, ab_c[3], a_bc[3], kTolerance))) ; else return ::testing::internal::AssertHelper(::testing::TestPartResult::kFatalFailure, &quot;/home/yzf/code/ceres-solver/internal/ceres/rotation_test.cc&quot;, 939, gtest_ar.failure_message()) = ::testing::Message()" data-ref="_M/ASSERT_NEAR">ASSERT_NEAR</a>(<a class="local col4 ref" href="#224ab_c" title='ab_c' data-ref="224ab_c">ab_c</a>[<var>3</var>], <a class="local col6 ref" href="#226a_bc" title='a_bc' data-ref="226a_bc">a_bc</a>[<var>3</var>], <a class="tu ref" href="#ceres::internal::kTolerance" title='ceres::internal::kTolerance' data-use='r' data-ref="ceres::internal::kTolerance">kTolerance</a>);</td></tr>
<tr><th id="940">940</th><td>}</td></tr>
<tr><th id="941">941</th><td></td></tr>
<tr><th id="942">942</th><td></td></tr>
<tr><th id="943">943</th><td><a class="macro" href="gtest/gtest.h.html#21153" title="class AngleAxis_RotatePointGivesSameAnswerAsRotationMatrix_Test : public ::testing::Test { public: AngleAxis_RotatePointGivesSameAnswerAsRotationMatrix_Test() {} private: virtual void TestBody(); static ::testing::TestInfo* const test_info_ __attribute__ ((unused)); AngleAxis_RotatePointGivesSameAnswerAsRotationMatrix_Test(AngleAxis_RotatePointGivesSameAnswerAsRotationMatrix_Test const &amp;); void operator=(AngleAxis_RotatePointGivesSameAnswerAsRotationMatrix_Test const &amp;);};::testing::TestInfo* const AngleAxis_RotatePointGivesSameAnswerAsRotationMatrix_Test ::test_info_ = ::testing::internal::MakeAndRegisterTestInfo( &quot;AngleAxis&quot;, &quot;RotatePointGivesSameAnswerAsRotationMatrix&quot;, __null, __null, ::testing::internal::CodeLocation(&quot;/home/yzf/code/ceres-solver/internal/ceres/rotation_test.cc&quot;, 943), (::testing::internal::GetTestTypeId()), ::testing::Test::SetUpTestCase, ::testing::Test::TearDownTestCase, new ::testing::internal::TestFactoryImpl&lt; AngleAxis_RotatePointGivesSameAnswerAsRotationMatrix_Test&gt;);void AngleAxis_RotatePointGivesSameAnswerAsRotationMatrix_Test::TestBody()" data-ref="_M/TEST">TEST</a>(AngleAxis, RotatePointGivesSameAnswerAsRotationMatrix) {</td></tr>
<tr><th id="944">944</th><td>  <em>double</em> <dfn class="local col7 decl" id="227angle_axis" title='angle_axis' data-type='double [3]' data-ref="227angle_axis">angle_axis</dfn>[<var>3</var>];</td></tr>
<tr><th id="945">945</th><td>  <em>double</em> <dfn class="local col8 decl" id="228R" title='R' data-type='double [9]' data-ref="228R">R</dfn>[<var>9</var>];</td></tr>
<tr><th id="946">946</th><td>  <em>double</em> <dfn class="local col9 decl" id="229p" title='p' data-type='double [3]' data-ref="229p">p</dfn>[<var>3</var>];</td></tr>
<tr><th id="947">947</th><td>  <em>double</em> <dfn class="local col0 decl" id="230angle_axis_rotated_p" title='angle_axis_rotated_p' data-type='double [3]' data-ref="230angle_axis_rotated_p">angle_axis_rotated_p</dfn>[<var>3</var>];</td></tr>
<tr><th id="948">948</th><td>  <em>double</em> <dfn class="local col1 decl" id="231rotation_matrix_rotated_p" title='rotation_matrix_rotated_p' data-type='double [3]' data-ref="231rotation_matrix_rotated_p">rotation_matrix_rotated_p</dfn>[<var>3</var>];</td></tr>
<tr><th id="949">949</th><td></td></tr>
<tr><th id="950">950</th><td>  <b>for</b> (<em>int</em> <dfn class="local col2 decl" id="232i" title='i' data-type='int' data-ref="232i">i</dfn> = <var>0</var>; <a class="local col2 ref" href="#232i" title='i' data-ref="232i">i</a> &lt; <var>10000</var>; ++<a class="local col2 ref" href="#232i" title='i' data-ref="232i">i</a>) {</td></tr>
<tr><th id="951">951</th><td>    <em>double</em> <dfn class="local col3 decl" id="233theta" title='theta' data-type='double' data-ref="233theta">theta</dfn> = (<var>2.0</var> * <a class="local col2 ref" href="#232i" title='i' data-ref="232i">i</a> * <var>0.0011</var> - <var>1.0</var>) * <a class="tu ref" href="#ceres::internal::kPi" title='ceres::internal::kPi' data-use='r' data-ref="ceres::internal::kPi">kPi</a>;</td></tr>
<tr><th id="952">952</th><td>    <b>for</b> (<em>int</em> <dfn class="local col4 decl" id="234j" title='j' data-type='int' data-ref="234j">j</dfn> = <var>0</var>; <a class="local col4 ref" href="#234j" title='j' data-ref="234j">j</a> &lt; <var>50</var>; ++<a class="local col4 ref" href="#234j" title='j' data-ref="234j">j</a>) {</td></tr>
<tr><th id="953">953</th><td>      <em>double</em> <dfn class="local col5 decl" id="235norm2" title='norm2' data-type='double' data-ref="235norm2">norm2</dfn> = <var>0.0</var>;</td></tr>
<tr><th id="954">954</th><td>      <b>for</b> (<em>int</em> <dfn class="local col6 decl" id="236k" title='k' data-type='int' data-ref="236k">k</dfn> = <var>0</var>; <a class="local col6 ref" href="#236k" title='k' data-ref="236k">k</a> &lt; <var>3</var>; ++<a class="local col6 ref" href="#236k" title='k' data-ref="236k">k</a>) {</td></tr>
<tr><th id="955">955</th><td>        <a class="local col7 ref" href="#227angle_axis" title='angle_axis' data-ref="227angle_axis">angle_axis</a>[<a class="local col6 ref" href="#236k" title='k' data-ref="236k">k</a>] = <var>2.0</var> * <a class="ref" href="#_ZN5ceres8internal10RandDoubleEv" title='ceres::internal::RandDouble' data-ref="_ZN5ceres8internal10RandDoubleEv">RandDouble</a>() - <var>1.0</var>;</td></tr>
<tr><th id="956">956</th><td>        <a class="local col9 ref" href="#229p" title='p' data-ref="229p">p</a>[<a class="local col6 ref" href="#236k" title='k' data-ref="236k">k</a>] = <var>2.0</var> * <a class="ref" href="#_ZN5ceres8internal10RandDoubleEv" title='ceres::internal::RandDouble' data-ref="_ZN5ceres8internal10RandDoubleEv">RandDouble</a>() - <var>1.0</var>;</td></tr>
<tr><th id="957">957</th><td>        <a class="local col5 ref" href="#235norm2" title='norm2' data-ref="235norm2">norm2</a> = <a class="local col7 ref" href="#227angle_axis" title='angle_axis' data-ref="227angle_axis">angle_axis</a>[<a class="local col6 ref" href="#236k" title='k' data-ref="236k">k</a>] * <a class="local col7 ref" href="#227angle_axis" title='angle_axis' data-ref="227angle_axis">angle_axis</a>[<a class="local col6 ref" href="#236k" title='k' data-ref="236k">k</a>];</td></tr>
<tr><th id="958">958</th><td>      }</td></tr>
<tr><th id="959">959</th><td></td></tr>
<tr><th id="960">960</th><td>      <em>const</em> <em>double</em> <dfn class="local col7 decl" id="237inv_norm" title='inv_norm' data-type='const double' data-ref="237inv_norm">inv_norm</dfn> = <a class="local col3 ref" href="#233theta" title='theta' data-ref="233theta">theta</a> / <a class="ref" href="../../include/ceres/jet.h.html#_ZN5ceres4sqrtEd" title='ceres::sqrt' data-ref="_ZN5ceres4sqrtEd">sqrt</a>(<a class="local col5 ref" href="#235norm2" title='norm2' data-ref="235norm2">norm2</a>);</td></tr>
<tr><th id="961">961</th><td>      <b>for</b> (<em>int</em> <dfn class="local col8 decl" id="238k" title='k' data-type='int' data-ref="238k">k</dfn> = <var>0</var>; <a class="local col8 ref" href="#238k" title='k' data-ref="238k">k</a> &lt; <var>3</var>; ++<a class="local col8 ref" href="#238k" title='k' data-ref="238k">k</a>) {</td></tr>
<tr><th id="962">962</th><td>        <a class="local col7 ref" href="#227angle_axis" title='angle_axis' data-ref="227angle_axis">angle_axis</a>[<a class="local col8 ref" href="#238k" title='k' data-ref="238k">k</a>] *= <a class="local col7 ref" href="#237inv_norm" title='inv_norm' data-ref="237inv_norm">inv_norm</a>;</td></tr>
<tr><th id="963">963</th><td>      }</td></tr>
<tr><th id="964">964</th><td></td></tr>
<tr><th id="965">965</th><td>      <a class="ref" href="../../include/ceres/rotation.h.html#_ZN5ceres25AngleAxisToRotationMatrixEPKT_PS0_" title='ceres::AngleAxisToRotationMatrix' data-ref="_ZN5ceres25AngleAxisToRotationMatrixEPKT_PS0_">AngleAxisToRotationMatrix</a>(<a class="local col7 ref" href="#227angle_axis" title='angle_axis' data-ref="227angle_axis">angle_axis</a>, <a class="local col8 ref" href="#228R" title='R' data-ref="228R">R</a>);</td></tr>
<tr><th id="966">966</th><td>      <a class="local col1 ref" href="#231rotation_matrix_rotated_p" title='rotation_matrix_rotated_p' data-ref="231rotation_matrix_rotated_p">rotation_matrix_rotated_p</a>[<var>0</var>] = <a class="local col8 ref" href="#228R" title='R' data-ref="228R">R</a>[<var>0</var>] * <a class="local col9 ref" href="#229p" title='p' data-ref="229p">p</a>[<var>0</var>] + <a class="local col8 ref" href="#228R" title='R' data-ref="228R">R</a>[<var>3</var>] * <a class="local col9 ref" href="#229p" title='p' data-ref="229p">p</a>[<var>1</var>] + <a class="local col8 ref" href="#228R" title='R' data-ref="228R">R</a>[<var>6</var>] * <a class="local col9 ref" href="#229p" title='p' data-ref="229p">p</a>[<var>2</var>];</td></tr>
<tr><th id="967">967</th><td>      <a class="local col1 ref" href="#231rotation_matrix_rotated_p" title='rotation_matrix_rotated_p' data-ref="231rotation_matrix_rotated_p">rotation_matrix_rotated_p</a>[<var>1</var>] = <a class="local col8 ref" href="#228R" title='R' data-ref="228R">R</a>[<var>1</var>] * <a class="local col9 ref" href="#229p" title='p' data-ref="229p">p</a>[<var>0</var>] + <a class="local col8 ref" href="#228R" title='R' data-ref="228R">R</a>[<var>4</var>] * <a class="local col9 ref" href="#229p" title='p' data-ref="229p">p</a>[<var>1</var>] + <a class="local col8 ref" href="#228R" title='R' data-ref="228R">R</a>[<var>7</var>] * <a class="local col9 ref" href="#229p" title='p' data-ref="229p">p</a>[<var>2</var>];</td></tr>
<tr><th id="968">968</th><td>      <a class="local col1 ref" href="#231rotation_matrix_rotated_p" title='rotation_matrix_rotated_p' data-ref="231rotation_matrix_rotated_p">rotation_matrix_rotated_p</a>[<var>2</var>] = <a class="local col8 ref" href="#228R" title='R' data-ref="228R">R</a>[<var>2</var>] * <a class="local col9 ref" href="#229p" title='p' data-ref="229p">p</a>[<var>0</var>] + <a class="local col8 ref" href="#228R" title='R' data-ref="228R">R</a>[<var>5</var>] * <a class="local col9 ref" href="#229p" title='p' data-ref="229p">p</a>[<var>1</var>] + <a class="local col8 ref" href="#228R" title='R' data-ref="228R">R</a>[<var>8</var>] * <a class="local col9 ref" href="#229p" title='p' data-ref="229p">p</a>[<var>2</var>];</td></tr>
<tr><th id="969">969</th><td></td></tr>
<tr><th id="970">970</th><td>      <a class="ref" href="../../include/ceres/rotation.h.html#_ZN5ceres20AngleAxisRotatePointEPKT_S2_PS0_" title='ceres::AngleAxisRotatePoint' data-ref="_ZN5ceres20AngleAxisRotatePointEPKT_S2_PS0_">AngleAxisRotatePoint</a>(<a class="local col7 ref" href="#227angle_axis" title='angle_axis' data-ref="227angle_axis">angle_axis</a>, <a class="local col9 ref" href="#229p" title='p' data-ref="229p">p</a>, <a class="local col0 ref" href="#230angle_axis_rotated_p" title='angle_axis_rotated_p' data-ref="230angle_axis_rotated_p">angle_axis_rotated_p</a>);</td></tr>
<tr><th id="971">971</th><td>      <b>for</b> (<em>int</em> <dfn class="local col9 decl" id="239k" title='k' data-type='int' data-ref="239k">k</dfn> = <var>0</var>; <a class="local col9 ref" href="#239k" title='k' data-ref="239k">k</a> &lt; <var>3</var>; ++<a class="local col9 ref" href="#239k" title='k' data-ref="239k">k</a>) {</td></tr>
<tr><th id="972">972</th><td>        <a class="macro" href="gtest/gtest.h.html#21009" title="switch (0) case 0: default: if (const ::testing::AssertionResult gtest_ar = (::testing::internal::DoubleNearPredFormat(&quot;rotation_matrix_rotated_p[k]&quot;, &quot;angle_axis_rotated_p[k]&quot;, &quot;kTolerance&quot;, rotation_matrix_rotated_p[k], angle_axis_rotated_p[k], kTolerance))) ; else ::testing::internal::AssertHelper(::testing::TestPartResult::kNonFatalFailure, &quot;/home/yzf/code/ceres-solver/internal/ceres/rotation_test.cc&quot;, 974, gtest_ar.failure_message()) = ::testing::Message()" data-ref="_M/EXPECT_NEAR">EXPECT_NEAR</a>(<a class="local col1 ref" href="#231rotation_matrix_rotated_p" title='rotation_matrix_rotated_p' data-ref="231rotation_matrix_rotated_p">rotation_matrix_rotated_p</a>[<a class="local col9 ref" href="#239k" title='k' data-ref="239k">k</a>],</td></tr>
<tr><th id="973">973</th><td>                    <a class="local col0 ref" href="#230angle_axis_rotated_p" title='angle_axis_rotated_p' data-ref="230angle_axis_rotated_p">angle_axis_rotated_p</a>[<a class="local col9 ref" href="#239k" title='k' data-ref="239k">k</a>],</td></tr>
<tr><th id="974">974</th><td>                    <a class="tu ref" href="#ceres::internal::kTolerance" title='ceres::internal::kTolerance' data-use='r' data-ref="ceres::internal::kTolerance">kTolerance</a>) <a class="ref" href="gtest/gtest.h.html#_ZN7testing7MessagelsERKT_" title='testing::Message::operator&lt;&lt;' data-ref="_ZN7testing7MessagelsERKT_">&lt;&lt;</a> <q>"p: "</q> <a class="ref" href="gtest/gtest.h.html#_ZN7testing7MessagelsERKT_" title='testing::Message::operator&lt;&lt;' data-ref="_ZN7testing7MessagelsERKT_">&lt;&lt;</a> <a class="local col9 ref" href="#229p" title='p' data-ref="229p">p</a>[<var>0</var>]</td></tr>
<tr><th id="975">975</th><td>                                <a class="ref" href="gtest/gtest.h.html#_ZN7testing7MessagelsERKT_" title='testing::Message::operator&lt;&lt;' data-ref="_ZN7testing7MessagelsERKT_">&lt;&lt;</a> <q>" "</q> <a class="ref" href="gtest/gtest.h.html#_ZN7testing7MessagelsERKT_" title='testing::Message::operator&lt;&lt;' data-ref="_ZN7testing7MessagelsERKT_">&lt;&lt;</a> <a class="local col9 ref" href="#229p" title='p' data-ref="229p">p</a>[<var>1</var>]</td></tr>
<tr><th id="976">976</th><td>                                <a class="ref" href="gtest/gtest.h.html#_ZN7testing7MessagelsERKT_" title='testing::Message::operator&lt;&lt;' data-ref="_ZN7testing7MessagelsERKT_">&lt;&lt;</a> <q>" "</q> <a class="ref" href="gtest/gtest.h.html#_ZN7testing7MessagelsERKT_" title='testing::Message::operator&lt;&lt;' data-ref="_ZN7testing7MessagelsERKT_">&lt;&lt;</a> <a class="local col9 ref" href="#229p" title='p' data-ref="229p">p</a>[<var>2</var>]</td></tr>
<tr><th id="977">977</th><td>                                <a class="ref" href="gtest/gtest.h.html#_ZN7testing7MessagelsERKT_" title='testing::Message::operator&lt;&lt;' data-ref="_ZN7testing7MessagelsERKT_">&lt;&lt;</a> <q>" angle_axis: "</q> <a class="ref" href="gtest/gtest.h.html#_ZN7testing7MessagelsERKT_" title='testing::Message::operator&lt;&lt;' data-ref="_ZN7testing7MessagelsERKT_">&lt;&lt;</a> <a class="local col7 ref" href="#227angle_axis" title='angle_axis' data-ref="227angle_axis">angle_axis</a>[<var>0</var>]</td></tr>
<tr><th id="978">978</th><td>                                <a class="ref" href="gtest/gtest.h.html#_ZN7testing7MessagelsERKT_" title='testing::Message::operator&lt;&lt;' data-ref="_ZN7testing7MessagelsERKT_">&lt;&lt;</a> <q>" "</q> <a class="ref" href="gtest/gtest.h.html#_ZN7testing7MessagelsERKT_" title='testing::Message::operator&lt;&lt;' data-ref="_ZN7testing7MessagelsERKT_">&lt;&lt;</a> <a class="local col7 ref" href="#227angle_axis" title='angle_axis' data-ref="227angle_axis">angle_axis</a>[<var>1</var>]</td></tr>
<tr><th id="979">979</th><td>                                <a class="ref" href="gtest/gtest.h.html#_ZN7testing7MessagelsERKT_" title='testing::Message::operator&lt;&lt;' data-ref="_ZN7testing7MessagelsERKT_">&lt;&lt;</a> <q>" "</q> <a class="ref" href="gtest/gtest.h.html#_ZN7testing7MessagelsERKT_" title='testing::Message::operator&lt;&lt;' data-ref="_ZN7testing7MessagelsERKT_">&lt;&lt;</a> <a class="local col7 ref" href="#227angle_axis" title='angle_axis' data-ref="227angle_axis">angle_axis</a>[<var>2</var>];</td></tr>
<tr><th id="980">980</th><td>      }</td></tr>
<tr><th id="981">981</th><td>    }</td></tr>
<tr><th id="982">982</th><td>  }</td></tr>
<tr><th id="983">983</th><td>}</td></tr>
<tr><th id="984">984</th><td></td></tr>
<tr><th id="985">985</th><td><a class="macro" href="gtest/gtest.h.html#21153" title="class AngleAxis_NearZeroRotatePointGivesSameAnswerAsRotationMatrix_Test : public ::testing::Test { public: AngleAxis_NearZeroRotatePointGivesSameAnswerAsRotationMatrix_Test() {} private: virtual void TestBody(); static ::testing::TestInfo* const test_info_ __attribute__ ((unused)); AngleAxis_NearZeroRotatePointGivesSameAnswerAsRotationMatrix_Test(AngleAxis_NearZeroRotatePointGivesSameAnswerAsRotationMatrix_Test const &amp;); void operator=(AngleAxis_NearZeroRotatePointGivesSameAnswerAsRotationMatrix_Test const &amp;);};::testing::TestInfo* const AngleAxis_NearZeroRotatePointGivesSameAnswerAsRotationMatrix_Test ::test_info_ = ::testing::internal::MakeAndRegisterTestInfo( &quot;AngleAxis&quot;, &quot;NearZeroRotatePointGivesSameAnswerAsRotationMatrix&quot;, __null, __null, ::testing::internal::CodeLocation(&quot;/home/yzf/code/ceres-solver/internal/ceres/rotation_test.cc&quot;, 985), (::testing::internal::GetTestTypeId()), ::testing::Test::SetUpTestCase, ::testing::Test::TearDownTestCase, new ::testing::internal::TestFactoryImpl&lt; AngleAxis_NearZeroRotatePointGivesSameAnswerAsRotationMatrix_Test&gt;);void AngleAxis_NearZeroRotatePointGivesSameAnswerAsRotationMatrix_Test::TestBody()" data-ref="_M/TEST">TEST</a>(AngleAxis, NearZeroRotatePointGivesSameAnswerAsRotationMatrix) {</td></tr>
<tr><th id="986">986</th><td>  <em>double</em> <dfn class="local col0 decl" id="240angle_axis" title='angle_axis' data-type='double [3]' data-ref="240angle_axis">angle_axis</dfn>[<var>3</var>];</td></tr>
<tr><th id="987">987</th><td>  <em>double</em> <dfn class="local col1 decl" id="241R" title='R' data-type='double [9]' data-ref="241R">R</dfn>[<var>9</var>];</td></tr>
<tr><th id="988">988</th><td>  <em>double</em> <dfn class="local col2 decl" id="242p" title='p' data-type='double [3]' data-ref="242p">p</dfn>[<var>3</var>];</td></tr>
<tr><th id="989">989</th><td>  <em>double</em> <dfn class="local col3 decl" id="243angle_axis_rotated_p" title='angle_axis_rotated_p' data-type='double [3]' data-ref="243angle_axis_rotated_p">angle_axis_rotated_p</dfn>[<var>3</var>];</td></tr>
<tr><th id="990">990</th><td>  <em>double</em> <dfn class="local col4 decl" id="244rotation_matrix_rotated_p" title='rotation_matrix_rotated_p' data-type='double [3]' data-ref="244rotation_matrix_rotated_p">rotation_matrix_rotated_p</dfn>[<var>3</var>];</td></tr>
<tr><th id="991">991</th><td></td></tr>
<tr><th id="992">992</th><td>  <b>for</b> (<em>int</em> <dfn class="local col5 decl" id="245i" title='i' data-type='int' data-ref="245i">i</dfn> = <var>0</var>; <a class="local col5 ref" href="#245i" title='i' data-ref="245i">i</a> &lt; <var>10000</var>; ++<a class="local col5 ref" href="#245i" title='i' data-ref="245i">i</a>) {</td></tr>
<tr><th id="993">993</th><td>    <em>double</em> <dfn class="local col6 decl" id="246norm2" title='norm2' data-type='double' data-ref="246norm2">norm2</dfn> = <var>0.0</var>;</td></tr>
<tr><th id="994">994</th><td>    <b>for</b> (<em>int</em> <dfn class="local col7 decl" id="247k" title='k' data-type='int' data-ref="247k">k</dfn> = <var>0</var>; <a class="local col7 ref" href="#247k" title='k' data-ref="247k">k</a> &lt; <var>3</var>; ++<a class="local col7 ref" href="#247k" title='k' data-ref="247k">k</a>) {</td></tr>
<tr><th id="995">995</th><td>      <a class="local col0 ref" href="#240angle_axis" title='angle_axis' data-ref="240angle_axis">angle_axis</a>[<a class="local col7 ref" href="#247k" title='k' data-ref="247k">k</a>] = <var>2.0</var> * <a class="ref" href="#_ZN5ceres8internal10RandDoubleEv" title='ceres::internal::RandDouble' data-ref="_ZN5ceres8internal10RandDoubleEv">RandDouble</a>() - <var>1.0</var>;</td></tr>
<tr><th id="996">996</th><td>      <a class="local col2 ref" href="#242p" title='p' data-ref="242p">p</a>[<a class="local col7 ref" href="#247k" title='k' data-ref="247k">k</a>] = <var>2.0</var> * <a class="ref" href="#_ZN5ceres8internal10RandDoubleEv" title='ceres::internal::RandDouble' data-ref="_ZN5ceres8internal10RandDoubleEv">RandDouble</a>() - <var>1.0</var>;</td></tr>
<tr><th id="997">997</th><td>      <a class="local col6 ref" href="#246norm2" title='norm2' data-ref="246norm2">norm2</a> = <a class="local col0 ref" href="#240angle_axis" title='angle_axis' data-ref="240angle_axis">angle_axis</a>[<a class="local col7 ref" href="#247k" title='k' data-ref="247k">k</a>] * <a class="local col0 ref" href="#240angle_axis" title='angle_axis' data-ref="240angle_axis">angle_axis</a>[<a class="local col7 ref" href="#247k" title='k' data-ref="247k">k</a>];</td></tr>
<tr><th id="998">998</th><td>    }</td></tr>
<tr><th id="999">999</th><td></td></tr>
<tr><th id="1000">1000</th><td>    <em>double</em> <dfn class="local col8 decl" id="248theta" title='theta' data-type='double' data-ref="248theta">theta</dfn> = (<var>2.0</var> * <a class="local col5 ref" href="#245i" title='i' data-ref="245i">i</a> * <var>0.0001</var>  - <var>1.0</var>) * <var>1e-16</var>;</td></tr>
<tr><th id="1001">1001</th><td>    <em>const</em> <em>double</em> <dfn class="local col9 decl" id="249inv_norm" title='inv_norm' data-type='const double' data-ref="249inv_norm">inv_norm</dfn> = <a class="local col8 ref" href="#248theta" title='theta' data-ref="248theta">theta</a> / <a class="ref" href="../../include/ceres/jet.h.html#_ZN5ceres4sqrtEd" title='ceres::sqrt' data-ref="_ZN5ceres4sqrtEd">sqrt</a>(<a class="local col6 ref" href="#246norm2" title='norm2' data-ref="246norm2">norm2</a>);</td></tr>
<tr><th id="1002">1002</th><td>    <b>for</b> (<em>int</em> <dfn class="local col0 decl" id="250k" title='k' data-type='int' data-ref="250k">k</dfn> = <var>0</var>; <a class="local col0 ref" href="#250k" title='k' data-ref="250k">k</a> &lt; <var>3</var>; ++<a class="local col0 ref" href="#250k" title='k' data-ref="250k">k</a>) {</td></tr>
<tr><th id="1003">1003</th><td>      <a class="local col0 ref" href="#240angle_axis" title='angle_axis' data-ref="240angle_axis">angle_axis</a>[<a class="local col0 ref" href="#250k" title='k' data-ref="250k">k</a>] *= <a class="local col9 ref" href="#249inv_norm" title='inv_norm' data-ref="249inv_norm">inv_norm</a>;</td></tr>
<tr><th id="1004">1004</th><td>    }</td></tr>
<tr><th id="1005">1005</th><td></td></tr>
<tr><th id="1006">1006</th><td>    <a class="ref" href="../../include/ceres/rotation.h.html#_ZN5ceres25AngleAxisToRotationMatrixEPKT_PS0_" title='ceres::AngleAxisToRotationMatrix' data-ref="_ZN5ceres25AngleAxisToRotationMatrixEPKT_PS0_">AngleAxisToRotationMatrix</a>(<a class="local col0 ref" href="#240angle_axis" title='angle_axis' data-ref="240angle_axis">angle_axis</a>, <a class="local col1 ref" href="#241R" title='R' data-ref="241R">R</a>);</td></tr>
<tr><th id="1007">1007</th><td>    <a class="local col4 ref" href="#244rotation_matrix_rotated_p" title='rotation_matrix_rotated_p' data-ref="244rotation_matrix_rotated_p">rotation_matrix_rotated_p</a>[<var>0</var>] = <a class="local col1 ref" href="#241R" title='R' data-ref="241R">R</a>[<var>0</var>] * <a class="local col2 ref" href="#242p" title='p' data-ref="242p">p</a>[<var>0</var>] + <a class="local col1 ref" href="#241R" title='R' data-ref="241R">R</a>[<var>3</var>] * <a class="local col2 ref" href="#242p" title='p' data-ref="242p">p</a>[<var>1</var>] + <a class="local col1 ref" href="#241R" title='R' data-ref="241R">R</a>[<var>6</var>] * <a class="local col2 ref" href="#242p" title='p' data-ref="242p">p</a>[<var>2</var>];</td></tr>
<tr><th id="1008">1008</th><td>    <a class="local col4 ref" href="#244rotation_matrix_rotated_p" title='rotation_matrix_rotated_p' data-ref="244rotation_matrix_rotated_p">rotation_matrix_rotated_p</a>[<var>1</var>] = <a class="local col1 ref" href="#241R" title='R' data-ref="241R">R</a>[<var>1</var>] * <a class="local col2 ref" href="#242p" title='p' data-ref="242p">p</a>[<var>0</var>] + <a class="local col1 ref" href="#241R" title='R' data-ref="241R">R</a>[<var>4</var>] * <a class="local col2 ref" href="#242p" title='p' data-ref="242p">p</a>[<var>1</var>] + <a class="local col1 ref" href="#241R" title='R' data-ref="241R">R</a>[<var>7</var>] * <a class="local col2 ref" href="#242p" title='p' data-ref="242p">p</a>[<var>2</var>];</td></tr>
<tr><th id="1009">1009</th><td>    <a class="local col4 ref" href="#244rotation_matrix_rotated_p" title='rotation_matrix_rotated_p' data-ref="244rotation_matrix_rotated_p">rotation_matrix_rotated_p</a>[<var>2</var>] = <a class="local col1 ref" href="#241R" title='R' data-ref="241R">R</a>[<var>2</var>] * <a class="local col2 ref" href="#242p" title='p' data-ref="242p">p</a>[<var>0</var>] + <a class="local col1 ref" href="#241R" title='R' data-ref="241R">R</a>[<var>5</var>] * <a class="local col2 ref" href="#242p" title='p' data-ref="242p">p</a>[<var>1</var>] + <a class="local col1 ref" href="#241R" title='R' data-ref="241R">R</a>[<var>8</var>] * <a class="local col2 ref" href="#242p" title='p' data-ref="242p">p</a>[<var>2</var>];</td></tr>
<tr><th id="1010">1010</th><td></td></tr>
<tr><th id="1011">1011</th><td>    <a class="ref" href="../../include/ceres/rotation.h.html#_ZN5ceres20AngleAxisRotatePointEPKT_S2_PS0_" title='ceres::AngleAxisRotatePoint' data-ref="_ZN5ceres20AngleAxisRotatePointEPKT_S2_PS0_">AngleAxisRotatePoint</a>(<a class="local col0 ref" href="#240angle_axis" title='angle_axis' data-ref="240angle_axis">angle_axis</a>, <a class="local col2 ref" href="#242p" title='p' data-ref="242p">p</a>, <a class="local col3 ref" href="#243angle_axis_rotated_p" title='angle_axis_rotated_p' data-ref="243angle_axis_rotated_p">angle_axis_rotated_p</a>);</td></tr>
<tr><th id="1012">1012</th><td>    <b>for</b> (<em>int</em> <dfn class="local col1 decl" id="251k" title='k' data-type='int' data-ref="251k">k</dfn> = <var>0</var>; <a class="local col1 ref" href="#251k" title='k' data-ref="251k">k</a> &lt; <var>3</var>; ++<a class="local col1 ref" href="#251k" title='k' data-ref="251k">k</a>) {</td></tr>
<tr><th id="1013">1013</th><td>      <a class="macro" href="gtest/gtest.h.html#21009" title="switch (0) case 0: default: if (const ::testing::AssertionResult gtest_ar = (::testing::internal::DoubleNearPredFormat(&quot;rotation_matrix_rotated_p[k]&quot;, &quot;angle_axis_rotated_p[k]&quot;, &quot;kTolerance&quot;, rotation_matrix_rotated_p[k], angle_axis_rotated_p[k], kTolerance))) ; else ::testing::internal::AssertHelper(::testing::TestPartResult::kNonFatalFailure, &quot;/home/yzf/code/ceres-solver/internal/ceres/rotation_test.cc&quot;, 1015, gtest_ar.failure_message()) = ::testing::Message()" data-ref="_M/EXPECT_NEAR">EXPECT_NEAR</a>(<a class="local col4 ref" href="#244rotation_matrix_rotated_p" title='rotation_matrix_rotated_p' data-ref="244rotation_matrix_rotated_p">rotation_matrix_rotated_p</a>[<a class="local col1 ref" href="#251k" title='k' data-ref="251k">k</a>],</td></tr>
<tr><th id="1014">1014</th><td>                  <a class="local col3 ref" href="#243angle_axis_rotated_p" title='angle_axis_rotated_p' data-ref="243angle_axis_rotated_p">angle_axis_rotated_p</a>[<a class="local col1 ref" href="#251k" title='k' data-ref="251k">k</a>],</td></tr>
<tr><th id="1015">1015</th><td>                  <a class="tu ref" href="#ceres::internal::kTolerance" title='ceres::internal::kTolerance' data-use='r' data-ref="ceres::internal::kTolerance">kTolerance</a>) <a class="ref" href="gtest/gtest.h.html#_ZN7testing7MessagelsERKT_" title='testing::Message::operator&lt;&lt;' data-ref="_ZN7testing7MessagelsERKT_">&lt;&lt;</a> <q>"p: "</q> <a class="ref" href="gtest/gtest.h.html#_ZN7testing7MessagelsERKT_" title='testing::Message::operator&lt;&lt;' data-ref="_ZN7testing7MessagelsERKT_">&lt;&lt;</a> <a class="local col2 ref" href="#242p" title='p' data-ref="242p">p</a>[<var>0</var>]</td></tr>
<tr><th id="1016">1016</th><td>                              <a class="ref" href="gtest/gtest.h.html#_ZN7testing7MessagelsERKT_" title='testing::Message::operator&lt;&lt;' data-ref="_ZN7testing7MessagelsERKT_">&lt;&lt;</a> <q>" "</q> <a class="ref" href="gtest/gtest.h.html#_ZN7testing7MessagelsERKT_" title='testing::Message::operator&lt;&lt;' data-ref="_ZN7testing7MessagelsERKT_">&lt;&lt;</a> <a class="local col2 ref" href="#242p" title='p' data-ref="242p">p</a>[<var>1</var>]</td></tr>
<tr><th id="1017">1017</th><td>                              <a class="ref" href="gtest/gtest.h.html#_ZN7testing7MessagelsERKT_" title='testing::Message::operator&lt;&lt;' data-ref="_ZN7testing7MessagelsERKT_">&lt;&lt;</a> <q>" "</q> <a class="ref" href="gtest/gtest.h.html#_ZN7testing7MessagelsERKT_" title='testing::Message::operator&lt;&lt;' data-ref="_ZN7testing7MessagelsERKT_">&lt;&lt;</a> <a class="local col2 ref" href="#242p" title='p' data-ref="242p">p</a>[<var>2</var>]</td></tr>
<tr><th id="1018">1018</th><td>                              <a class="ref" href="gtest/gtest.h.html#_ZN7testing7MessagelsERKT_" title='testing::Message::operator&lt;&lt;' data-ref="_ZN7testing7MessagelsERKT_">&lt;&lt;</a> <q>" angle_axis: "</q> <a class="ref" href="gtest/gtest.h.html#_ZN7testing7MessagelsERKT_" title='testing::Message::operator&lt;&lt;' data-ref="_ZN7testing7MessagelsERKT_">&lt;&lt;</a> <a class="local col0 ref" href="#240angle_axis" title='angle_axis' data-ref="240angle_axis">angle_axis</a>[<var>0</var>]</td></tr>
<tr><th id="1019">1019</th><td>                              <a class="ref" href="gtest/gtest.h.html#_ZN7testing7MessagelsERKT_" title='testing::Message::operator&lt;&lt;' data-ref="_ZN7testing7MessagelsERKT_">&lt;&lt;</a> <q>" "</q> <a class="ref" href="gtest/gtest.h.html#_ZN7testing7MessagelsERKT_" title='testing::Message::operator&lt;&lt;' data-ref="_ZN7testing7MessagelsERKT_">&lt;&lt;</a> <a class="local col0 ref" href="#240angle_axis" title='angle_axis' data-ref="240angle_axis">angle_axis</a>[<var>1</var>]</td></tr>
<tr><th id="1020">1020</th><td>                              <a class="ref" href="gtest/gtest.h.html#_ZN7testing7MessagelsERKT_" title='testing::Message::operator&lt;&lt;' data-ref="_ZN7testing7MessagelsERKT_">&lt;&lt;</a> <q>" "</q> <a class="ref" href="gtest/gtest.h.html#_ZN7testing7MessagelsERKT_" title='testing::Message::operator&lt;&lt;' data-ref="_ZN7testing7MessagelsERKT_">&lt;&lt;</a> <a class="local col0 ref" href="#240angle_axis" title='angle_axis' data-ref="240angle_axis">angle_axis</a>[<var>2</var>];</td></tr>
<tr><th id="1021">1021</th><td>    }</td></tr>
<tr><th id="1022">1022</th><td>  }</td></tr>
<tr><th id="1023">1023</th><td>}</td></tr>
<tr><th id="1024">1024</th><td></td></tr>
<tr><th id="1025">1025</th><td><a class="macro" href="gtest/gtest.h.html#21153" title="class MatrixAdapter_RowMajor3x3ReturnTypeAndAccessIsCorrect_Test : public ::testing::Test { public: MatrixAdapter_RowMajor3x3ReturnTypeAndAccessIsCorrect_Test() {} private: virtual void TestBody(); static ::testing::TestInfo* const test_info_ __attribute__ ((unused)); MatrixAdapter_RowMajor3x3ReturnTypeAndAccessIsCorrect_Test(MatrixAdapter_RowMajor3x3ReturnTypeAndAccessIsCorrect_Test const &amp;); void operator=(MatrixAdapter_RowMajor3x3ReturnTypeAndAccessIsCorrect_Test const &amp;);};::testing::TestInfo* const MatrixAdapter_RowMajor3x3ReturnTypeAndAccessIsCorrect_Test ::test_info_ = ::testing::internal::MakeAndRegisterTestInfo( &quot;MatrixAdapter&quot;, &quot;RowMajor3x3ReturnTypeAndAccessIsCorrect&quot;, __null, __null, ::testing::internal::CodeLocation(&quot;/home/yzf/code/ceres-solver/internal/ceres/rotation_test.cc&quot;, 1025), (::testing::internal::GetTestTypeId()), ::testing::Test::SetUpTestCase, ::testing::Test::TearDownTestCase, new ::testing::internal::TestFactoryImpl&lt; MatrixAdapter_RowMajor3x3ReturnTypeAndAccessIsCorrect_Test&gt;);void MatrixAdapter_RowMajor3x3ReturnTypeAndAccessIsCorrect_Test::TestBody()" data-ref="_M/TEST">TEST</a>(MatrixAdapter, RowMajor3x3ReturnTypeAndAccessIsCorrect) {</td></tr>
<tr><th id="1026">1026</th><td>  <em>double</em> <dfn class="local col2 decl" id="252array" title='array' data-type='double [9]' data-ref="252array">array</dfn>[<var>9</var>] = { <var>1.0</var>, <var>2.0</var>, <var>3.0</var>, <var>4.0</var>, <var>5.0</var>, <var>6.0</var>, <var>7.0</var>, <var>8.0</var>, <var>9.0</var> };</td></tr>
<tr><th id="1027">1027</th><td>  <em>const</em> <em>float</em> <dfn class="local col3 decl" id="253const_array" title='const_array' data-type='const float [9]' data-ref="253const_array">const_array</dfn>[<var>9</var>] =</td></tr>
<tr><th id="1028">1028</th><td>      { <var>1.0f</var>, <var>2.0f</var>, <var>3.0f</var>, <var>4.0f</var>, <var>5.0f</var>, <var>6.0f</var>, <var>7.0f</var>, <var>8.0f</var>, <var>9.0f</var> };</td></tr>
<tr><th id="1029">1029</th><td>  <a class="type" href="../../include/ceres/rotation.h.html#ceres::MatrixAdapter" title='ceres::MatrixAdapter' data-ref="ceres::MatrixAdapter">MatrixAdapter</a>&lt;<em>double</em>, <var>3</var>, <var>1</var>&gt; <dfn class="local col4 decl" id="254A" title='A' data-type='MatrixAdapter&lt;double, 3, 1&gt;' data-ref="254A">A</dfn> = <a class="ref" href="../../include/ceres/rotation.h.html#_ZN5ceres18RowMajorAdapter3x3EPT_" title='ceres::RowMajorAdapter3x3' data-ref="_ZN5ceres18RowMajorAdapter3x3EPT_">RowMajorAdapter3x3</a>(<a class="local col2 ref" href="#252array" title='array' data-ref="252array">array</a>);</td></tr>
<tr><th id="1030">1030</th><td>  <a class="type" href="../../include/ceres/rotation.h.html#ceres::MatrixAdapter" title='ceres::MatrixAdapter' data-ref="ceres::MatrixAdapter">MatrixAdapter</a>&lt;<em>const</em> <em>float</em>, <var>3</var>, <var>1</var>&gt; <dfn class="local col5 decl" id="255B" title='B' data-type='MatrixAdapter&lt;const float, 3, 1&gt;' data-ref="255B">B</dfn> = <a class="ref" href="../../include/ceres/rotation.h.html#_ZN5ceres18RowMajorAdapter3x3EPT_" title='ceres::RowMajorAdapter3x3' data-ref="_ZN5ceres18RowMajorAdapter3x3EPT_">RowMajorAdapter3x3</a>(<a class="local col3 ref" href="#253const_array" title='const_array' data-ref="253const_array">const_array</a>);</td></tr>
<tr><th id="1031">1031</th><td></td></tr>
<tr><th id="1032">1032</th><td>  <b>for</b> (<em>int</em> <dfn class="local col6 decl" id="256i" title='i' data-type='int' data-ref="256i">i</dfn> = <var>0</var>; <a class="local col6 ref" href="#256i" title='i' data-ref="256i">i</a> &lt; <var>3</var>; ++<a class="local col6 ref" href="#256i" title='i' data-ref="256i">i</a>) {</td></tr>
<tr><th id="1033">1033</th><td>    <b>for</b> (<em>int</em> <dfn class="local col7 decl" id="257j" title='j' data-type='int' data-ref="257j">j</dfn> = <var>0</var>; <a class="local col7 ref" href="#257j" title='j' data-ref="257j">j</a> &lt; <var>3</var>; ++<a class="local col7 ref" href="#257j" title='j' data-ref="257j">j</a>) {</td></tr>
<tr><th id="1034">1034</th><td>      <i>// The values are integers from 1 to 9, so equality tests are appropriate</i></td></tr>
<tr><th id="1035">1035</th><td><i>      // even for float and double values.</i></td></tr>
<tr><th id="1036">1036</th><td>      <a class="macro" href="gtest/gtest.h.html#20888" title="switch (0) case 0: default: if (const ::testing::AssertionResult gtest_ar = (::testing::internal:: EqHelper&lt;(sizeof(::testing::internal::IsNullLiteralHelper(A(i, j))) == 1)&gt;::Compare(&quot;A(i, j)&quot;, &quot;array[3*i+j]&quot;, A(i, j), array[3*i+j]))) ; else ::testing::internal::AssertHelper(::testing::TestPartResult::kNonFatalFailure, &quot;/home/yzf/code/ceres-solver/internal/ceres/rotation_test.cc&quot;, 1036, gtest_ar.failure_message()) = ::testing::Message()" data-ref="_M/EXPECT_EQ">EXPECT_EQ</a>(<a class="local col4 ref" href="#254A" title='A' data-ref="254A">A</a>(<a class="local col6 ref" href="#256i" title='i' data-ref="256i">i</a>, <a class="local col7 ref" href="#257j" title='j' data-ref="257j">j</a>), <a class="local col2 ref" href="#252array" title='array' data-ref="252array">array</a>[<var>3</var>*<a class="local col6 ref" href="#256i" title='i' data-ref="256i">i</a>+<a class="local col7 ref" href="#257j" title='j' data-ref="257j">j</a>]);</td></tr>
<tr><th id="1037">1037</th><td>      <a class="macro" href="gtest/gtest.h.html#20888" title="switch (0) case 0: default: if (const ::testing::AssertionResult gtest_ar = (::testing::internal:: EqHelper&lt;(sizeof(::testing::internal::IsNullLiteralHelper(B(i, j))) == 1)&gt;::Compare(&quot;B(i, j)&quot;, &quot;const_array[3*i+j]&quot;, B(i, j), const_array[3*i+j]))) ; else ::testing::internal::AssertHelper(::testing::TestPartResult::kNonFatalFailure, &quot;/home/yzf/code/ceres-solver/internal/ceres/rotation_test.cc&quot;, 1037, gtest_ar.failure_message()) = ::testing::Message()" data-ref="_M/EXPECT_EQ">EXPECT_EQ</a>(<a class="local col5 ref" href="#255B" title='B' data-ref="255B">B</a>(<a class="local col6 ref" href="#256i" title='i' data-ref="256i">i</a>, <a class="local col7 ref" href="#257j" title='j' data-ref="257j">j</a>), <a class="local col3 ref" href="#253const_array" title='const_array' data-ref="253const_array">const_array</a>[<var>3</var>*<a class="local col6 ref" href="#256i" title='i' data-ref="256i">i</a>+<a class="local col7 ref" href="#257j" title='j' data-ref="257j">j</a>]);</td></tr>
<tr><th id="1038">1038</th><td>    }</td></tr>
<tr><th id="1039">1039</th><td>  }</td></tr>
<tr><th id="1040">1040</th><td>}</td></tr>
<tr><th id="1041">1041</th><td></td></tr>
<tr><th id="1042">1042</th><td><a class="macro" href="gtest/gtest.h.html#21153" title="class MatrixAdapter_ColumnMajor3x3ReturnTypeAndAccessIsCorrect_Test : public ::testing::Test { public: MatrixAdapter_ColumnMajor3x3ReturnTypeAndAccessIsCorrect_Test() {} private: virtual void TestBody(); static ::testing::TestInfo* const test_info_ __attribute__ ((unused)); MatrixAdapter_ColumnMajor3x3ReturnTypeAndAccessIsCorrect_Test(MatrixAdapter_ColumnMajor3x3ReturnTypeAndAccessIsCorrect_Test const &amp;); void operator=(MatrixAdapter_ColumnMajor3x3ReturnTypeAndAccessIsCorrect_Test const &amp;);};::testing::TestInfo* const MatrixAdapter_ColumnMajor3x3ReturnTypeAndAccessIsCorrect_Test ::test_info_ = ::testing::internal::MakeAndRegisterTestInfo( &quot;MatrixAdapter&quot;, &quot;ColumnMajor3x3ReturnTypeAndAccessIsCorrect&quot;, __null, __null, ::testing::internal::CodeLocation(&quot;/home/yzf/code/ceres-solver/internal/ceres/rotation_test.cc&quot;, 1042), (::testing::internal::GetTestTypeId()), ::testing::Test::SetUpTestCase, ::testing::Test::TearDownTestCase, new ::testing::internal::TestFactoryImpl&lt; MatrixAdapter_ColumnMajor3x3ReturnTypeAndAccessIsCorrect_Test&gt;);void MatrixAdapter_ColumnMajor3x3ReturnTypeAndAccessIsCorrect_Test::TestBody()" data-ref="_M/TEST">TEST</a>(MatrixAdapter, ColumnMajor3x3ReturnTypeAndAccessIsCorrect) {</td></tr>
<tr><th id="1043">1043</th><td>  <em>double</em> <dfn class="local col8 decl" id="258array" title='array' data-type='double [9]' data-ref="258array">array</dfn>[<var>9</var>] = { <var>1.0</var>, <var>2.0</var>, <var>3.0</var>, <var>4.0</var>, <var>5.0</var>, <var>6.0</var>, <var>7.0</var>, <var>8.0</var>, <var>9.0</var> };</td></tr>
<tr><th id="1044">1044</th><td>  <em>const</em> <em>float</em> <dfn class="local col9 decl" id="259const_array" title='const_array' data-type='const float [9]' data-ref="259const_array">const_array</dfn>[<var>9</var>] =</td></tr>
<tr><th id="1045">1045</th><td>      { <var>1.0f</var>, <var>2.0f</var>, <var>3.0f</var>, <var>4.0f</var>, <var>5.0f</var>, <var>6.0f</var>, <var>7.0f</var>, <var>8.0f</var>, <var>9.0f</var> };</td></tr>
<tr><th id="1046">1046</th><td>  <a class="type" href="../../include/ceres/rotation.h.html#ceres::MatrixAdapter" title='ceres::MatrixAdapter' data-ref="ceres::MatrixAdapter">MatrixAdapter</a>&lt;<em>double</em>, <var>1</var>, <var>3</var>&gt; <dfn class="local col0 decl" id="260A" title='A' data-type='MatrixAdapter&lt;double, 1, 3&gt;' data-ref="260A">A</dfn> = <a class="ref" href="../../include/ceres/rotation.h.html#_ZN5ceres21ColumnMajorAdapter3x3EPT_" title='ceres::ColumnMajorAdapter3x3' data-ref="_ZN5ceres21ColumnMajorAdapter3x3EPT_">ColumnMajorAdapter3x3</a>(<a class="local col8 ref" href="#258array" title='array' data-ref="258array">array</a>);</td></tr>
<tr><th id="1047">1047</th><td>  <a class="type" href="../../include/ceres/rotation.h.html#ceres::MatrixAdapter" title='ceres::MatrixAdapter' data-ref="ceres::MatrixAdapter">MatrixAdapter</a>&lt;<em>const</em> <em>float</em>, <var>1</var>, <var>3</var>&gt; <dfn class="local col1 decl" id="261B" title='B' data-type='MatrixAdapter&lt;const float, 1, 3&gt;' data-ref="261B">B</dfn> = <a class="ref" href="../../include/ceres/rotation.h.html#_ZN5ceres21ColumnMajorAdapter3x3EPT_" title='ceres::ColumnMajorAdapter3x3' data-ref="_ZN5ceres21ColumnMajorAdapter3x3EPT_">ColumnMajorAdapter3x3</a>(<a class="local col9 ref" href="#259const_array" title='const_array' data-ref="259const_array">const_array</a>);</td></tr>
<tr><th id="1048">1048</th><td></td></tr>
<tr><th id="1049">1049</th><td>  <b>for</b> (<em>int</em> <dfn class="local col2 decl" id="262i" title='i' data-type='int' data-ref="262i">i</dfn> = <var>0</var>; <a class="local col2 ref" href="#262i" title='i' data-ref="262i">i</a> &lt; <var>3</var>; ++<a class="local col2 ref" href="#262i" title='i' data-ref="262i">i</a>) {</td></tr>
<tr><th id="1050">1050</th><td>    <b>for</b> (<em>int</em> <dfn class="local col3 decl" id="263j" title='j' data-type='int' data-ref="263j">j</dfn> = <var>0</var>; <a class="local col3 ref" href="#263j" title='j' data-ref="263j">j</a> &lt; <var>3</var>; ++<a class="local col3 ref" href="#263j" title='j' data-ref="263j">j</a>) {</td></tr>
<tr><th id="1051">1051</th><td>      <i>// The values are integers from 1 to 9, so equality tests are</i></td></tr>
<tr><th id="1052">1052</th><td><i>      // appropriate even for float and double values.</i></td></tr>
<tr><th id="1053">1053</th><td>      <a class="macro" href="gtest/gtest.h.html#20888" title="switch (0) case 0: default: if (const ::testing::AssertionResult gtest_ar = (::testing::internal:: EqHelper&lt;(sizeof(::testing::internal::IsNullLiteralHelper(A(i, j))) == 1)&gt;::Compare(&quot;A(i, j)&quot;, &quot;array[3*j+i]&quot;, A(i, j), array[3*j+i]))) ; else ::testing::internal::AssertHelper(::testing::TestPartResult::kNonFatalFailure, &quot;/home/yzf/code/ceres-solver/internal/ceres/rotation_test.cc&quot;, 1053, gtest_ar.failure_message()) = ::testing::Message()" data-ref="_M/EXPECT_EQ">EXPECT_EQ</a>(<a class="local col0 ref" href="#260A" title='A' data-ref="260A">A</a>(<a class="local col2 ref" href="#262i" title='i' data-ref="262i">i</a>, <a class="local col3 ref" href="#263j" title='j' data-ref="263j">j</a>), <a class="local col8 ref" href="#258array" title='array' data-ref="258array">array</a>[<var>3</var>*<a class="local col3 ref" href="#263j" title='j' data-ref="263j">j</a>+<a class="local col2 ref" href="#262i" title='i' data-ref="262i">i</a>]);</td></tr>
<tr><th id="1054">1054</th><td>      <a class="macro" href="gtest/gtest.h.html#20888" title="switch (0) case 0: default: if (const ::testing::AssertionResult gtest_ar = (::testing::internal:: EqHelper&lt;(sizeof(::testing::internal::IsNullLiteralHelper(B(i, j))) == 1)&gt;::Compare(&quot;B(i, j)&quot;, &quot;const_array[3*j+i]&quot;, B(i, j), const_array[3*j+i]))) ; else ::testing::internal::AssertHelper(::testing::TestPartResult::kNonFatalFailure, &quot;/home/yzf/code/ceres-solver/internal/ceres/rotation_test.cc&quot;, 1054, gtest_ar.failure_message()) = ::testing::Message()" data-ref="_M/EXPECT_EQ">EXPECT_EQ</a>(<a class="local col1 ref" href="#261B" title='B' data-ref="261B">B</a>(<a class="local col2 ref" href="#262i" title='i' data-ref="262i">i</a>, <a class="local col3 ref" href="#263j" title='j' data-ref="263j">j</a>), <a class="local col9 ref" href="#259const_array" title='const_array' data-ref="259const_array">const_array</a>[<var>3</var>*<a class="local col3 ref" href="#263j" title='j' data-ref="263j">j</a>+<a class="local col2 ref" href="#262i" title='i' data-ref="262i">i</a>]);</td></tr>
<tr><th id="1055">1055</th><td>    }</td></tr>
<tr><th id="1056">1056</th><td>  }</td></tr>
<tr><th id="1057">1057</th><td>}</td></tr>
<tr><th id="1058">1058</th><td></td></tr>
<tr><th id="1059">1059</th><td><a class="macro" href="gtest/gtest.h.html#21153" title="class MatrixAdapter_RowMajor2x4IsCorrect_Test : public ::testing::Test { public: MatrixAdapter_RowMajor2x4IsCorrect_Test() {} private: virtual void TestBody(); static ::testing::TestInfo* const test_info_ __attribute__ ((unused)); MatrixAdapter_RowMajor2x4IsCorrect_Test(MatrixAdapter_RowMajor2x4IsCorrect_Test const &amp;); void operator=(MatrixAdapter_RowMajor2x4IsCorrect_Test const &amp;);};::testing::TestInfo* const MatrixAdapter_RowMajor2x4IsCorrect_Test ::test_info_ = ::testing::internal::MakeAndRegisterTestInfo( &quot;MatrixAdapter&quot;, &quot;RowMajor2x4IsCorrect&quot;, __null, __null, ::testing::internal::CodeLocation(&quot;/home/yzf/code/ceres-solver/internal/ceres/rotation_test.cc&quot;, 1059), (::testing::internal::GetTestTypeId()), ::testing::Test::SetUpTestCase, ::testing::Test::TearDownTestCase, new ::testing::internal::TestFactoryImpl&lt; MatrixAdapter_RowMajor2x4IsCorrect_Test&gt;);void MatrixAdapter_RowMajor2x4IsCorrect_Test::TestBody()" data-ref="_M/TEST">TEST</a>(MatrixAdapter, RowMajor2x4IsCorrect) {</td></tr>
<tr><th id="1060">1060</th><td>  <em>const</em> <em>int</em> <dfn class="local col4 decl" id="264expected" title='expected' data-type='const int [8]' data-ref="264expected">expected</dfn>[<var>8</var>] = { <var>1</var>, <var>2</var>, <var>3</var>, <var>4</var>, <var>5</var>, <var>6</var>, <var>7</var>, <var>8</var> };</td></tr>
<tr><th id="1061">1061</th><td>  <em>int</em> <dfn class="local col5 decl" id="265array" title='array' data-type='int [8]' data-ref="265array">array</dfn>[<var>8</var>];</td></tr>
<tr><th id="1062">1062</th><td>  <a class="type" href="../../include/ceres/rotation.h.html#ceres::MatrixAdapter" title='ceres::MatrixAdapter' data-ref="ceres::MatrixAdapter">MatrixAdapter</a>&lt;<em>int</em>, <var>4</var>, <var>1</var>&gt; <dfn class="local col6 decl" id="266M" title='M' data-type='MatrixAdapter&lt;int, 4, 1&gt;' data-ref="266M">M</dfn><a class="ref" href="../../include/ceres/rotation.h.html#_ZN5ceres13MatrixAdapterC1EPT_" title='ceres::MatrixAdapter::MatrixAdapter&lt;T, row_stride, col_stride&gt;' data-ref="_ZN5ceres13MatrixAdapterC1EPT_">(</a><a class="local col5 ref" href="#265array" title='array' data-ref="265array">array</a>);</td></tr>
<tr><th id="1063">1063</th><td>  <a class="local col6 ref" href="#266M" title='M' data-ref="266M">M</a><a class="ref" href="../../include/ceres/rotation.h.html#_ZNK5ceres13MatrixAdapterclEii" title='ceres::MatrixAdapter::operator()' data-ref="_ZNK5ceres13MatrixAdapterclEii">(<var>0</var>, <var>0</var>)</a> = <var>1</var>; <a class="local col6 ref" href="#266M" title='M' data-ref="266M">M</a><a class="ref" href="../../include/ceres/rotation.h.html#_ZNK5ceres13MatrixAdapterclEii" title='ceres::MatrixAdapter::operator()' data-ref="_ZNK5ceres13MatrixAdapterclEii">(<var>0</var>, <var>1</var>)</a> = <var>2</var>; <a class="local col6 ref" href="#266M" title='M' data-ref="266M">M</a><a class="ref" href="../../include/ceres/rotation.h.html#_ZNK5ceres13MatrixAdapterclEii" title='ceres::MatrixAdapter::operator()' data-ref="_ZNK5ceres13MatrixAdapterclEii">(<var>0</var>, <var>2</var>)</a> = <var>3</var>; <a class="local col6 ref" href="#266M" title='M' data-ref="266M">M</a><a class="ref" href="../../include/ceres/rotation.h.html#_ZNK5ceres13MatrixAdapterclEii" title='ceres::MatrixAdapter::operator()' data-ref="_ZNK5ceres13MatrixAdapterclEii">(<var>0</var>, <var>3</var>)</a> = <var>4</var>;</td></tr>
<tr><th id="1064">1064</th><td>  <a class="local col6 ref" href="#266M" title='M' data-ref="266M">M</a><a class="ref" href="../../include/ceres/rotation.h.html#_ZNK5ceres13MatrixAdapterclEii" title='ceres::MatrixAdapter::operator()' data-ref="_ZNK5ceres13MatrixAdapterclEii">(<var>1</var>, <var>0</var>)</a> = <var>5</var>; <a class="local col6 ref" href="#266M" title='M' data-ref="266M">M</a><a class="ref" href="../../include/ceres/rotation.h.html#_ZNK5ceres13MatrixAdapterclEii" title='ceres::MatrixAdapter::operator()' data-ref="_ZNK5ceres13MatrixAdapterclEii">(<var>1</var>, <var>1</var>)</a> = <var>6</var>; <a class="local col6 ref" href="#266M" title='M' data-ref="266M">M</a><a class="ref" href="../../include/ceres/rotation.h.html#_ZNK5ceres13MatrixAdapterclEii" title='ceres::MatrixAdapter::operator()' data-ref="_ZNK5ceres13MatrixAdapterclEii">(<var>1</var>, <var>2</var>)</a> = <var>7</var>; <a class="local col6 ref" href="#266M" title='M' data-ref="266M">M</a><a class="ref" href="../../include/ceres/rotation.h.html#_ZNK5ceres13MatrixAdapterclEii" title='ceres::MatrixAdapter::operator()' data-ref="_ZNK5ceres13MatrixAdapterclEii">(<var>1</var>, <var>3</var>)</a> = <var>8</var>;</td></tr>
<tr><th id="1065">1065</th><td>  <b>for</b> (<em>int</em> <dfn class="local col7 decl" id="267k" title='k' data-type='int' data-ref="267k">k</dfn> = <var>0</var>; <a class="local col7 ref" href="#267k" title='k' data-ref="267k">k</a> &lt; <var>8</var>; ++<a class="local col7 ref" href="#267k" title='k' data-ref="267k">k</a>) {</td></tr>
<tr><th id="1066">1066</th><td>    <a class="macro" href="gtest/gtest.h.html#20888" title="switch (0) case 0: default: if (const ::testing::AssertionResult gtest_ar = (::testing::internal:: EqHelper&lt;(sizeof(::testing::internal::IsNullLiteralHelper(array[k])) == 1)&gt;::Compare(&quot;array[k]&quot;, &quot;expected[k]&quot;, array[k], expected[k]))) ; else ::testing::internal::AssertHelper(::testing::TestPartResult::kNonFatalFailure, &quot;/home/yzf/code/ceres-solver/internal/ceres/rotation_test.cc&quot;, 1066, gtest_ar.failure_message()) = ::testing::Message()" data-ref="_M/EXPECT_EQ">EXPECT_EQ</a>(<a class="local col5 ref" href="#265array" title='array' data-ref="265array">array</a>[<a class="local col7 ref" href="#267k" title='k' data-ref="267k">k</a>], <a class="local col4 ref" href="#264expected" title='expected' data-ref="264expected">expected</a>[<a class="local col7 ref" href="#267k" title='k' data-ref="267k">k</a>]);</td></tr>
<tr><th id="1067">1067</th><td>  }</td></tr>
<tr><th id="1068">1068</th><td>}</td></tr>
<tr><th id="1069">1069</th><td></td></tr>
<tr><th id="1070">1070</th><td><a class="macro" href="gtest/gtest.h.html#21153" title="class MatrixAdapter_ColumnMajor2x4IsCorrect_Test : public ::testing::Test { public: MatrixAdapter_ColumnMajor2x4IsCorrect_Test() {} private: virtual void TestBody(); static ::testing::TestInfo* const test_info_ __attribute__ ((unused)); MatrixAdapter_ColumnMajor2x4IsCorrect_Test(MatrixAdapter_ColumnMajor2x4IsCorrect_Test const &amp;); void operator=(MatrixAdapter_ColumnMajor2x4IsCorrect_Test const &amp;);};::testing::TestInfo* const MatrixAdapter_ColumnMajor2x4IsCorrect_Test ::test_info_ = ::testing::internal::MakeAndRegisterTestInfo( &quot;MatrixAdapter&quot;, &quot;ColumnMajor2x4IsCorrect&quot;, __null, __null, ::testing::internal::CodeLocation(&quot;/home/yzf/code/ceres-solver/internal/ceres/rotation_test.cc&quot;, 1070), (::testing::internal::GetTestTypeId()), ::testing::Test::SetUpTestCase, ::testing::Test::TearDownTestCase, new ::testing::internal::TestFactoryImpl&lt; MatrixAdapter_ColumnMajor2x4IsCorrect_Test&gt;);void MatrixAdapter_ColumnMajor2x4IsCorrect_Test::TestBody()" data-ref="_M/TEST">TEST</a>(MatrixAdapter, ColumnMajor2x4IsCorrect) {</td></tr>
<tr><th id="1071">1071</th><td>  <em>const</em> <em>int</em> <dfn class="local col8 decl" id="268expected" title='expected' data-type='const int [8]' data-ref="268expected">expected</dfn>[<var>8</var>] = { <var>1</var>, <var>5</var>, <var>2</var>, <var>6</var>, <var>3</var>, <var>7</var>, <var>4</var>, <var>8</var> };</td></tr>
<tr><th id="1072">1072</th><td>  <em>int</em> <dfn class="local col9 decl" id="269array" title='array' data-type='int [8]' data-ref="269array">array</dfn>[<var>8</var>];</td></tr>
<tr><th id="1073">1073</th><td>  <a class="type" href="../../include/ceres/rotation.h.html#ceres::MatrixAdapter" title='ceres::MatrixAdapter' data-ref="ceres::MatrixAdapter">MatrixAdapter</a>&lt;<em>int</em>, <var>1</var>, <var>2</var>&gt; <dfn class="local col0 decl" id="270M" title='M' data-type='MatrixAdapter&lt;int, 1, 2&gt;' data-ref="270M">M</dfn><a class="ref" href="../../include/ceres/rotation.h.html#_ZN5ceres13MatrixAdapterC1EPT_" title='ceres::MatrixAdapter::MatrixAdapter&lt;T, row_stride, col_stride&gt;' data-ref="_ZN5ceres13MatrixAdapterC1EPT_">(</a><a class="local col9 ref" href="#269array" title='array' data-ref="269array">array</a>);</td></tr>
<tr><th id="1074">1074</th><td>  <a class="local col0 ref" href="#270M" title='M' data-ref="270M">M</a><a class="ref" href="../../include/ceres/rotation.h.html#_ZNK5ceres13MatrixAdapterclEii" title='ceres::MatrixAdapter::operator()' data-ref="_ZNK5ceres13MatrixAdapterclEii">(<var>0</var>, <var>0</var>)</a> = <var>1</var>; <a class="local col0 ref" href="#270M" title='M' data-ref="270M">M</a><a class="ref" href="../../include/ceres/rotation.h.html#_ZNK5ceres13MatrixAdapterclEii" title='ceres::MatrixAdapter::operator()' data-ref="_ZNK5ceres13MatrixAdapterclEii">(<var>0</var>, <var>1</var>)</a> = <var>2</var>; <a class="local col0 ref" href="#270M" title='M' data-ref="270M">M</a><a class="ref" href="../../include/ceres/rotation.h.html#_ZNK5ceres13MatrixAdapterclEii" title='ceres::MatrixAdapter::operator()' data-ref="_ZNK5ceres13MatrixAdapterclEii">(<var>0</var>, <var>2</var>)</a> = <var>3</var>; <a class="local col0 ref" href="#270M" title='M' data-ref="270M">M</a><a class="ref" href="../../include/ceres/rotation.h.html#_ZNK5ceres13MatrixAdapterclEii" title='ceres::MatrixAdapter::operator()' data-ref="_ZNK5ceres13MatrixAdapterclEii">(<var>0</var>, <var>3</var>)</a> = <var>4</var>;</td></tr>
<tr><th id="1075">1075</th><td>  <a class="local col0 ref" href="#270M" title='M' data-ref="270M">M</a><a class="ref" href="../../include/ceres/rotation.h.html#_ZNK5ceres13MatrixAdapterclEii" title='ceres::MatrixAdapter::operator()' data-ref="_ZNK5ceres13MatrixAdapterclEii">(<var>1</var>, <var>0</var>)</a> = <var>5</var>; <a class="local col0 ref" href="#270M" title='M' data-ref="270M">M</a><a class="ref" href="../../include/ceres/rotation.h.html#_ZNK5ceres13MatrixAdapterclEii" title='ceres::MatrixAdapter::operator()' data-ref="_ZNK5ceres13MatrixAdapterclEii">(<var>1</var>, <var>1</var>)</a> = <var>6</var>; <a class="local col0 ref" href="#270M" title='M' data-ref="270M">M</a><a class="ref" href="../../include/ceres/rotation.h.html#_ZNK5ceres13MatrixAdapterclEii" title='ceres::MatrixAdapter::operator()' data-ref="_ZNK5ceres13MatrixAdapterclEii">(<var>1</var>, <var>2</var>)</a> = <var>7</var>; <a class="local col0 ref" href="#270M" title='M' data-ref="270M">M</a><a class="ref" href="../../include/ceres/rotation.h.html#_ZNK5ceres13MatrixAdapterclEii" title='ceres::MatrixAdapter::operator()' data-ref="_ZNK5ceres13MatrixAdapterclEii">(<var>1</var>, <var>3</var>)</a> = <var>8</var>;</td></tr>
<tr><th id="1076">1076</th><td>  <b>for</b> (<em>int</em> <dfn class="local col1 decl" id="271k" title='k' data-type='int' data-ref="271k">k</dfn> = <var>0</var>; <a class="local col1 ref" href="#271k" title='k' data-ref="271k">k</a> &lt; <var>8</var>; ++<a class="local col1 ref" href="#271k" title='k' data-ref="271k">k</a>) {</td></tr>
<tr><th id="1077">1077</th><td>    <a class="macro" href="gtest/gtest.h.html#20888" title="switch (0) case 0: default: if (const ::testing::AssertionResult gtest_ar = (::testing::internal:: EqHelper&lt;(sizeof(::testing::internal::IsNullLiteralHelper(array[k])) == 1)&gt;::Compare(&quot;array[k]&quot;, &quot;expected[k]&quot;, array[k], expected[k]))) ; else ::testing::internal::AssertHelper(::testing::TestPartResult::kNonFatalFailure, &quot;/home/yzf/code/ceres-solver/internal/ceres/rotation_test.cc&quot;, 1077, gtest_ar.failure_message()) = ::testing::Message()" data-ref="_M/EXPECT_EQ">EXPECT_EQ</a>(<a class="local col9 ref" href="#269array" title='array' data-ref="269array">array</a>[<a class="local col1 ref" href="#271k" title='k' data-ref="271k">k</a>], <a class="local col8 ref" href="#268expected" title='expected' data-ref="268expected">expected</a>[<a class="local col1 ref" href="#271k" title='k' data-ref="271k">k</a>]);</td></tr>
<tr><th id="1078">1078</th><td>  }</td></tr>
<tr><th id="1079">1079</th><td>}</td></tr>
<tr><th id="1080">1080</th><td></td></tr>
<tr><th id="1081">1081</th><td><a class="macro" href="gtest/gtest.h.html#21153" title="class RotationMatrixToAngleAxis_NearPiExampleOneFromTobiasStrauss_Test : public ::testing::Test { public: RotationMatrixToAngleAxis_NearPiExampleOneFromTobiasStrauss_Test() {} private: virtual void TestBody(); static ::testing::TestInfo* const test_info_ __attribute__ ((unused)); RotationMatrixToAngleAxis_NearPiExampleOneFromTobiasStrauss_Test(RotationMatrixToAngleAxis_NearPiExampleOneFromTobiasStrauss_Test const &amp;); void operator=(RotationMatrixToAngleAxis_NearPiExampleOneFromTobiasStrauss_Test const &amp;);};::testing::TestInfo* const RotationMatrixToAngleAxis_NearPiExampleOneFromTobiasStrauss_Test ::test_info_ = ::testing::internal::MakeAndRegisterTestInfo( &quot;RotationMatrixToAngleAxis&quot;, &quot;NearPiExampleOneFromTobiasStrauss&quot;, __null, __null, ::testing::internal::CodeLocation(&quot;/home/yzf/code/ceres-solver/internal/ceres/rotation_test.cc&quot;, 1081), (::testing::internal::GetTestTypeId()), ::testing::Test::SetUpTestCase, ::testing::Test::TearDownTestCase, new ::testing::internal::TestFactoryImpl&lt; RotationMatrixToAngleAxis_NearPiExampleOneFromTobiasStrauss_Test&gt;);void RotationMatrixToAngleAxis_NearPiExampleOneFromTobiasStrauss_Test::TestBody()" data-ref="_M/TEST">TEST</a>(RotationMatrixToAngleAxis, NearPiExampleOneFromTobiasStrauss) {</td></tr>
<tr><th id="1082">1082</th><td>  <i>// Example from Tobias Strauss</i></td></tr>
<tr><th id="1083">1083</th><td>  <em>const</em> <em>double</em> <dfn class="local col2 decl" id="272rotation_matrix" title='rotation_matrix' data-type='const double [9]' data-ref="272rotation_matrix">rotation_matrix</dfn>[] = {</td></tr>
<tr><th id="1084">1084</th><td>    -<var>0.999807135425239</var>,    -<var>0.0128154391194470</var>,   -<var>0.0148814136745799</var>,</td></tr>
<tr><th id="1085">1085</th><td>    -<var>0.0128154391194470</var>,   -<var>0.148441438622958</var>,     <var>0.988838158557669</var>,</td></tr>
<tr><th id="1086">1086</th><td>    -<var>0.0148814136745799</var>,    <var>0.988838158557669</var>,     <var>0.148248574048196</var></td></tr>
<tr><th id="1087">1087</th><td>  };</td></tr>
<tr><th id="1088">1088</th><td></td></tr>
<tr><th id="1089">1089</th><td>  <em>double</em> <dfn class="local col3 decl" id="273angle_axis" title='angle_axis' data-type='double [3]' data-ref="273angle_axis">angle_axis</dfn>[<var>3</var>];</td></tr>
<tr><th id="1090">1090</th><td>  <a class="ref" href="../../include/ceres/rotation.h.html#_ZN5ceres25RotationMatrixToAngleAxisERKNS_13MatrixAdapterIKT_XT0_EXT1_EEEPS1_" title='ceres::RotationMatrixToAngleAxis' data-ref="_ZN5ceres25RotationMatrixToAngleAxisERKNS_13MatrixAdapterIKT_XT0_EXT1_EEEPS1_">RotationMatrixToAngleAxis</a>(<a class="ref" href="../../include/ceres/rotation.h.html#_ZN5ceres18RowMajorAdapter3x3EPT_" title='ceres::RowMajorAdapter3x3' data-ref="_ZN5ceres18RowMajorAdapter3x3EPT_">RowMajorAdapter3x3</a>(<a class="local col2 ref" href="#272rotation_matrix" title='rotation_matrix' data-ref="272rotation_matrix">rotation_matrix</a>), <a class="local col3 ref" href="#273angle_axis" title='angle_axis' data-ref="273angle_axis">angle_axis</a>);</td></tr>
<tr><th id="1091">1091</th><td>  <em>double</em> <dfn class="local col4 decl" id="274round_trip" title='round_trip' data-type='double [9]' data-ref="274round_trip">round_trip</dfn>[<var>9</var>];</td></tr>
<tr><th id="1092">1092</th><td>  <a class="ref" href="../../include/ceres/rotation.h.html#_ZN5ceres25AngleAxisToRotationMatrixEPKT_RKNS_13MatrixAdapterIS0_XT0_EXT1_EEE" title='ceres::AngleAxisToRotationMatrix' data-ref="_ZN5ceres25AngleAxisToRotationMatrixEPKT_RKNS_13MatrixAdapterIS0_XT0_EXT1_EEE">AngleAxisToRotationMatrix</a>(<a class="local col3 ref" href="#273angle_axis" title='angle_axis' data-ref="273angle_axis">angle_axis</a>, <a class="ref" href="../../include/ceres/rotation.h.html#_ZN5ceres18RowMajorAdapter3x3EPT_" title='ceres::RowMajorAdapter3x3' data-ref="_ZN5ceres18RowMajorAdapter3x3EPT_">RowMajorAdapter3x3</a>(<a class="local col4 ref" href="#274round_trip" title='round_trip' data-ref="274round_trip">round_trip</a>));</td></tr>
<tr><th id="1093">1093</th><td>  <a class="macro" href="gmock/gmock.h.html#9209" title="switch (0) case 0: default: if (const ::testing::AssertionResult gtest_ar = (::testing::internal::MakePredicateFormatterFromMatcher(IsNear3x3Matrix(round_trip))(&quot;rotation_matrix&quot;, rotation_matrix))) ; else ::testing::internal::AssertHelper(::testing::TestPartResult::kNonFatalFailure, &quot;/home/yzf/code/ceres-solver/internal/ceres/rotation_test.cc&quot;, 1093, gtest_ar.failure_message()) = ::testing::Message()" data-ref="_M/EXPECT_THAT">EXPECT_THAT</a>(<a class="local col2 ref" href="#272rotation_matrix" title='rotation_matrix' data-ref="272rotation_matrix">rotation_matrix</a>, <a class="ref" href="#210" title='ceres::internal::IsNear3x3Matrix' data-ref="_ZN5ceres8internal15IsNear3x3MatrixET_">IsNear3x3Matrix</a>(<a class="local col4 ref" href="#274round_trip" title='round_trip' data-ref="274round_trip">round_trip</a>));</td></tr>
<tr><th id="1094">1094</th><td>}</td></tr>
<tr><th id="1095">1095</th><td></td></tr>
<tr><th id="1096">1096</th><td><em>void</em> <dfn class="decl def" id="_ZN5ceres8internal39CheckRotationMatrixToAngleAxisRoundTripEddd" title='ceres::internal::CheckRotationMatrixToAngleAxisRoundTrip' data-ref="_ZN5ceres8internal39CheckRotationMatrixToAngleAxisRoundTripEddd">CheckRotationMatrixToAngleAxisRoundTrip</dfn>(<em>const</em> <em>double</em> <dfn class="local col5 decl" id="275theta" title='theta' data-type='const double' data-ref="275theta">theta</dfn>,</td></tr>
<tr><th id="1097">1097</th><td>                                             <em>const</em> <em>double</em> <dfn class="local col6 decl" id="276phi" title='phi' data-type='const double' data-ref="276phi">phi</dfn>,</td></tr>
<tr><th id="1098">1098</th><td>                                             <em>const</em> <em>double</em> <dfn class="local col7 decl" id="277angle" title='angle' data-type='const double' data-ref="277angle">angle</dfn>) {</td></tr>
<tr><th id="1099">1099</th><td>  <em>double</em> <dfn class="local col8 decl" id="278angle_axis" title='angle_axis' data-type='double [3]' data-ref="278angle_axis">angle_axis</dfn>[<var>3</var>];</td></tr>
<tr><th id="1100">1100</th><td>  <a class="local col8 ref" href="#278angle_axis" title='angle_axis' data-ref="278angle_axis">angle_axis</a>[<var>0</var>] = <a class="local col7 ref" href="#277angle" title='angle' data-ref="277angle">angle</a> * <a class="ref" href="../../include/ceres/jet.h.html#_ZN5ceres3sinEd" title='ceres::sin' data-ref="_ZN5ceres3sinEd">sin</a>(<a class="local col6 ref" href="#276phi" title='phi' data-ref="276phi">phi</a>) * <a class="ref" href="../../include/ceres/jet.h.html#_ZN5ceres3cosEd" title='ceres::cos' data-ref="_ZN5ceres3cosEd">cos</a>(<a class="local col5 ref" href="#275theta" title='theta' data-ref="275theta">theta</a>);</td></tr>
<tr><th id="1101">1101</th><td>  <a class="local col8 ref" href="#278angle_axis" title='angle_axis' data-ref="278angle_axis">angle_axis</a>[<var>1</var>] = <a class="local col7 ref" href="#277angle" title='angle' data-ref="277angle">angle</a> * <a class="ref" href="../../include/ceres/jet.h.html#_ZN5ceres3sinEd" title='ceres::sin' data-ref="_ZN5ceres3sinEd">sin</a>(<a class="local col6 ref" href="#276phi" title='phi' data-ref="276phi">phi</a>) * <a class="ref" href="../../include/ceres/jet.h.html#_ZN5ceres3sinEd" title='ceres::sin' data-ref="_ZN5ceres3sinEd">sin</a>(<a class="local col5 ref" href="#275theta" title='theta' data-ref="275theta">theta</a>);</td></tr>
<tr><th id="1102">1102</th><td>  <a class="local col8 ref" href="#278angle_axis" title='angle_axis' data-ref="278angle_axis">angle_axis</a>[<var>2</var>] = <a class="local col7 ref" href="#277angle" title='angle' data-ref="277angle">angle</a> * <a class="ref" href="../../include/ceres/jet.h.html#_ZN5ceres3cosEd" title='ceres::cos' data-ref="_ZN5ceres3cosEd">cos</a>(<a class="local col6 ref" href="#276phi" title='phi' data-ref="276phi">phi</a>);</td></tr>
<tr><th id="1103">1103</th><td></td></tr>
<tr><th id="1104">1104</th><td>  <em>double</em> <dfn class="local col9 decl" id="279rotation_matrix" title='rotation_matrix' data-type='double [9]' data-ref="279rotation_matrix">rotation_matrix</dfn>[<var>9</var>];</td></tr>
<tr><th id="1105">1105</th><td>  <a class="ref" href="../../include/ceres/rotation.h.html#_ZN5ceres25AngleAxisToRotationMatrixEPKT_PS0_" title='ceres::AngleAxisToRotationMatrix' data-ref="_ZN5ceres25AngleAxisToRotationMatrixEPKT_PS0_">AngleAxisToRotationMatrix</a>(<a class="local col8 ref" href="#278angle_axis" title='angle_axis' data-ref="278angle_axis">angle_axis</a>, <a class="local col9 ref" href="#279rotation_matrix" title='rotation_matrix' data-ref="279rotation_matrix">rotation_matrix</a>);</td></tr>
<tr><th id="1106">1106</th><td></td></tr>
<tr><th id="1107">1107</th><td>  <em>double</em> <dfn class="local col0 decl" id="280angle_axis_round_trip" title='angle_axis_round_trip' data-type='double [3]' data-ref="280angle_axis_round_trip">angle_axis_round_trip</dfn>[<var>3</var>];</td></tr>
<tr><th id="1108">1108</th><td>  <a class="ref" href="../../include/ceres/rotation.h.html#_ZN5ceres25RotationMatrixToAngleAxisEPKT_PS0_" title='ceres::RotationMatrixToAngleAxis' data-ref="_ZN5ceres25RotationMatrixToAngleAxisEPKT_PS0_">RotationMatrixToAngleAxis</a>(<a class="local col9 ref" href="#279rotation_matrix" title='rotation_matrix' data-ref="279rotation_matrix">rotation_matrix</a>, <a class="local col0 ref" href="#280angle_axis_round_trip" title='angle_axis_round_trip' data-ref="280angle_axis_round_trip">angle_axis_round_trip</a>);</td></tr>
<tr><th id="1109">1109</th><td>  <a class="macro" href="gmock/gmock.h.html#9209" title="switch (0) case 0: default: if (const ::testing::AssertionResult gtest_ar = (::testing::internal::MakePredicateFormatterFromMatcher(IsNearAngleAxis(angle_axis))(&quot;angle_axis_round_trip&quot;, angle_axis_round_trip))) ; else ::testing::internal::AssertHelper(::testing::TestPartResult::kNonFatalFailure, &quot;/home/yzf/code/ceres-solver/internal/ceres/rotation_test.cc&quot;, 1109, gtest_ar.failure_message()) = ::testing::Message()" data-ref="_M/EXPECT_THAT">EXPECT_THAT</a>(<a class="local col0 ref" href="#280angle_axis_round_trip" title='angle_axis_round_trip' data-ref="280angle_axis_round_trip">angle_axis_round_trip</a>, <a class="ref" href="#140" title='ceres::internal::IsNearAngleAxis' data-ref="_ZN5ceres8internal15IsNearAngleAxisET_">IsNearAngleAxis</a>(<a class="local col8 ref" href="#278angle_axis" title='angle_axis' data-ref="278angle_axis">angle_axis</a>));</td></tr>
<tr><th id="1110">1110</th><td>}</td></tr>
<tr><th id="1111">1111</th><td></td></tr>
<tr><th id="1112">1112</th><td><a class="macro" href="gtest/gtest.h.html#21153" title="class RotationMatrixToAngleAxis_ExhaustiveRoundTrip_Test : public ::testing::Test { public: RotationMatrixToAngleAxis_ExhaustiveRoundTrip_Test() {} private: virtual void TestBody(); static ::testing::TestInfo* const test_info_ __attribute__ ((unused)); RotationMatrixToAngleAxis_ExhaustiveRoundTrip_Test(RotationMatrixToAngleAxis_ExhaustiveRoundTrip_Test const &amp;); void operator=(RotationMatrixToAngleAxis_ExhaustiveRoundTrip_Test const &amp;);};::testing::TestInfo* const RotationMatrixToAngleAxis_ExhaustiveRoundTrip_Test ::test_info_ = ::testing::internal::MakeAndRegisterTestInfo( &quot;RotationMatrixToAngleAxis&quot;, &quot;ExhaustiveRoundTrip&quot;, __null, __null, ::testing::internal::CodeLocation(&quot;/home/yzf/code/ceres-solver/internal/ceres/rotation_test.cc&quot;, 1112), (::testing::internal::GetTestTypeId()), ::testing::Test::SetUpTestCase, ::testing::Test::TearDownTestCase, new ::testing::internal::TestFactoryImpl&lt; RotationMatrixToAngleAxis_ExhaustiveRoundTrip_Test&gt;);void RotationMatrixToAngleAxis_ExhaustiveRoundTrip_Test::TestBody()" data-ref="_M/TEST">TEST</a>(RotationMatrixToAngleAxis, ExhaustiveRoundTrip) {</td></tr>
<tr><th id="1113">1113</th><td>  <em>const</em> <em>double</em> <dfn class="local col1 decl" id="281kMaxSmallAngle" title='kMaxSmallAngle' data-type='const double' data-ref="281kMaxSmallAngle">kMaxSmallAngle</dfn> = <var>1e-8</var>;</td></tr>
<tr><th id="1114">1114</th><td>  <em>const</em> <em>int</em> <dfn class="local col2 decl" id="282kNumSteps" title='kNumSteps' data-type='const int' data-ref="282kNumSteps">kNumSteps</dfn> = <var>1000</var>;</td></tr>
<tr><th id="1115">1115</th><td>  <b>for</b> (<em>int</em> <dfn class="local col3 decl" id="283i" title='i' data-type='int' data-ref="283i">i</dfn> = <var>0</var>; <a class="local col3 ref" href="#283i" title='i' data-ref="283i">i</a> &lt; <a class="local col2 ref" href="#282kNumSteps" title='kNumSteps' data-ref="282kNumSteps">kNumSteps</a>; ++<a class="local col3 ref" href="#283i" title='i' data-ref="283i">i</a>) {</td></tr>
<tr><th id="1116">1116</th><td>    <em>const</em> <em>double</em> <dfn class="local col4 decl" id="284theta" title='theta' data-type='const double' data-ref="284theta">theta</dfn> = <b>static_cast</b>&lt;<em>double</em>&gt;(<a class="local col3 ref" href="#283i" title='i' data-ref="283i">i</a>) / <a class="local col2 ref" href="#282kNumSteps" title='kNumSteps' data-ref="282kNumSteps">kNumSteps</a> * <var>2.0</var> * <a class="tu ref" href="#ceres::internal::kPi" title='ceres::internal::kPi' data-use='r' data-ref="ceres::internal::kPi">kPi</a>;</td></tr>
<tr><th id="1117">1117</th><td>    <b>for</b> (<em>int</em> <dfn class="local col5 decl" id="285j" title='j' data-type='int' data-ref="285j">j</dfn> = <var>0</var>; <a class="local col5 ref" href="#285j" title='j' data-ref="285j">j</a> &lt; <a class="local col2 ref" href="#282kNumSteps" title='kNumSteps' data-ref="282kNumSteps">kNumSteps</a>; ++<a class="local col5 ref" href="#285j" title='j' data-ref="285j">j</a>) {</td></tr>
<tr><th id="1118">1118</th><td>      <em>const</em> <em>double</em> <dfn class="local col6 decl" id="286phi" title='phi' data-type='const double' data-ref="286phi">phi</dfn> = <b>static_cast</b>&lt;<em>double</em>&gt;(<a class="local col5 ref" href="#285j" title='j' data-ref="285j">j</a>) / <a class="local col2 ref" href="#282kNumSteps" title='kNumSteps' data-ref="282kNumSteps">kNumSteps</a> * <a class="tu ref" href="#ceres::internal::kPi" title='ceres::internal::kPi' data-use='r' data-ref="ceres::internal::kPi">kPi</a>;</td></tr>
<tr><th id="1119">1119</th><td>      <i>// Rotations of angle Pi.</i></td></tr>
<tr><th id="1120">1120</th><td>      <a class="ref" href="#_ZN5ceres8internal39CheckRotationMatrixToAngleAxisRoundTripEddd" title='ceres::internal::CheckRotationMatrixToAngleAxisRoundTrip' data-ref="_ZN5ceres8internal39CheckRotationMatrixToAngleAxisRoundTripEddd">CheckRotationMatrixToAngleAxisRoundTrip</a>(<a class="local col4 ref" href="#284theta" title='theta' data-ref="284theta">theta</a>, <a class="local col6 ref" href="#286phi" title='phi' data-ref="286phi">phi</a>, <a class="tu ref" href="#ceres::internal::kPi" title='ceres::internal::kPi' data-use='r' data-ref="ceres::internal::kPi">kPi</a>);</td></tr>
<tr><th id="1121">1121</th><td>      <i>// Rotation of angle approximately Pi.</i></td></tr>
<tr><th id="1122">1122</th><td>      <a class="ref" href="#_ZN5ceres8internal39CheckRotationMatrixToAngleAxisRoundTripEddd" title='ceres::internal::CheckRotationMatrixToAngleAxisRoundTrip' data-ref="_ZN5ceres8internal39CheckRotationMatrixToAngleAxisRoundTripEddd">CheckRotationMatrixToAngleAxisRoundTrip</a>(</td></tr>
<tr><th id="1123">1123</th><td>          <a class="local col4 ref" href="#284theta" title='theta' data-ref="284theta">theta</a>, <a class="local col6 ref" href="#286phi" title='phi' data-ref="286phi">phi</a>, <a class="tu ref" href="#ceres::internal::kPi" title='ceres::internal::kPi' data-use='r' data-ref="ceres::internal::kPi">kPi</a> - <a class="local col1 ref" href="#281kMaxSmallAngle" title='kMaxSmallAngle' data-ref="281kMaxSmallAngle">kMaxSmallAngle</a> * <a class="ref" href="#_ZN5ceres8internal10RandDoubleEv" title='ceres::internal::RandDouble' data-ref="_ZN5ceres8internal10RandDoubleEv">RandDouble</a>());</td></tr>
<tr><th id="1124">1124</th><td>      <i>// Rotations of angle approximately zero.</i></td></tr>
<tr><th id="1125">1125</th><td>      <a class="ref" href="#_ZN5ceres8internal39CheckRotationMatrixToAngleAxisRoundTripEddd" title='ceres::internal::CheckRotationMatrixToAngleAxisRoundTrip' data-ref="_ZN5ceres8internal39CheckRotationMatrixToAngleAxisRoundTripEddd">CheckRotationMatrixToAngleAxisRoundTrip</a>(</td></tr>
<tr><th id="1126">1126</th><td>          <a class="local col4 ref" href="#284theta" title='theta' data-ref="284theta">theta</a>, <a class="local col6 ref" href="#286phi" title='phi' data-ref="286phi">phi</a>, <a class="local col1 ref" href="#281kMaxSmallAngle" title='kMaxSmallAngle' data-ref="281kMaxSmallAngle">kMaxSmallAngle</a> * <var>2.0</var> * <a class="ref" href="#_ZN5ceres8internal10RandDoubleEv" title='ceres::internal::RandDouble' data-ref="_ZN5ceres8internal10RandDoubleEv">RandDouble</a>() - <var>1.0</var>);</td></tr>
<tr><th id="1127">1127</th><td>    }</td></tr>
<tr><th id="1128">1128</th><td>  }</td></tr>
<tr><th id="1129">1129</th><td>}</td></tr>
<tr><th id="1130">1130</th><td></td></tr>
<tr><th id="1131">1131</th><td>}  <i>// namespace internal</i></td></tr>
<tr><th id="1132">1132</th><td>}  <i>// namespace ceres</i></td></tr>
<tr><th id="1133">1133</th><td></td></tr>
</table><hr/><p id='footer'>
Generated on <em>2017-May-11</em> from project ceres-solver revision <em>1.12.0-69-g39388bd</em><br />Powered by <a href='https://woboq.com'><img alt='Woboq' src='https://code.woboq.org/woboq-16.png' width='41' height='16' /></a> <a href='https://code.woboq.org'>Code Browser</a> 2.0.1
<br/>Generator usage only permitted with license.</p>
</div></body></html>
